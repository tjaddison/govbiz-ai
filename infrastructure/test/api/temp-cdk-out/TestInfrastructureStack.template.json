{
 "Resources": {
  "govbizaiencryptionkeyC77D74E4": {
   "Type": "AWS::KMS::Key",
   "Properties": {
    "Description": "KMS key for GovBizAI system encryption",
    "EnableKeyRotation": true,
    "KeyPolicy": {
     "Statement": [
      {
       "Action": "kms:*",
       "Effect": "Allow",
       "Principal": {
        "AWS": {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":iam::",
           {
            "Ref": "AWS::AccountId"
           },
           ":root"
          ]
         ]
        }
       },
       "Resource": "*"
      },
      {
       "Action": [
        "kms:Encrypt",
        "kms:Decrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*",
        "kms:DescribeKey"
       ],
       "Condition": {
        "ArnEquals": {
         "kms:EncryptionContext:aws:logs:arn": {
          "Fn::Join": [
           "",
           [
            "arn:aws:logs:",
            {
             "Ref": "AWS::Region"
            },
            ":",
            {
             "Ref": "AWS::AccountId"
            },
            ":log-group:/aws/cloudtrail/govbizai"
           ]
          ]
         }
        }
       },
       "Effect": "Allow",
       "Principal": {
        "Service": {
         "Fn::Join": [
          "",
          [
           "logs.",
           {
            "Ref": "AWS::Region"
           },
           ".amazonaws.com"
          ]
         ]
        }
       },
       "Resource": "*"
      },
      {
       "Action": [
        "kms:Encrypt",
        "kms:Decrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*",
        "kms:DescribeKey"
       ],
       "Effect": "Allow",
       "Principal": {
        "Service": "cloudtrail.amazonaws.com"
       },
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "govbizaiencryptionkeyAlias19258499": {
   "Type": "AWS::KMS::Alias",
   "Properties": {
    "AliasName": "alias/govbizai-encryption-key",
    "TargetKeyId": {
     "Fn::GetAtt": [
      "govbizaiencryptionkeyC77D74E4",
      "Arn"
     ]
    }
   }
  },
  "govbizaivpcC82B5B04": {
   "Type": "AWS::EC2::VPC",
   "Properties": {
    "CidrBlock": "10.0.0.0/16",
    "EnableDnsHostnames": true,
    "EnableDnsSupport": true,
    "InstanceTenancy": "default",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Name",
      "Value": "govbizai-vpc"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   }
  },
  "govbizaivpcgovbizaipublicsubnetSubnet1Subnet7171BD1B": {
   "Type": "AWS::EC2::Subnet",
   "Properties": {
    "AvailabilityZone": {
     "Fn::Select": [
      0,
      {
       "Fn::GetAZs": ""
      }
     ]
    },
    "CidrBlock": "10.0.0.0/24",
    "MapPublicIpOnLaunch": true,
    "Tags": [
     {
      "Key": "aws-cdk:subnet-name",
      "Value": "govbizai-public-subnet"
     },
     {
      "Key": "aws-cdk:subnet-type",
      "Value": "Public"
     },
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Name",
      "Value": "TestInfrastructureStack/govbizai-vpc/govbizai-public-subnetSubnet1"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   }
  },
  "govbizaivpcgovbizaipublicsubnetSubnet1RouteTableB90BAA78": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Name",
      "Value": "TestInfrastructureStack/govbizai-vpc/govbizai-public-subnetSubnet1"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   }
  },
  "govbizaivpcgovbizaipublicsubnetSubnet1RouteTableAssociation67A23F4C": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "govbizaivpcgovbizaipublicsubnetSubnet1RouteTableB90BAA78"
    },
    "SubnetId": {
     "Ref": "govbizaivpcgovbizaipublicsubnetSubnet1Subnet7171BD1B"
    }
   }
  },
  "govbizaivpcgovbizaipublicsubnetSubnet1DefaultRouteAAAAE712": {
   "Type": "AWS::EC2::Route",
   "Properties": {
    "DestinationCidrBlock": "0.0.0.0/0",
    "GatewayId": {
     "Ref": "govbizaivpcIGWB32B4CD2"
    },
    "RouteTableId": {
     "Ref": "govbizaivpcgovbizaipublicsubnetSubnet1RouteTableB90BAA78"
    }
   },
   "DependsOn": [
    "govbizaivpcVPCGWF58BCFC6"
   ]
  },
  "govbizaivpcgovbizaipublicsubnetSubnet1EIP54986573": {
   "Type": "AWS::EC2::EIP",
   "Properties": {
    "Domain": "vpc",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Name",
      "Value": "TestInfrastructureStack/govbizai-vpc/govbizai-public-subnetSubnet1"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   }
  },
  "govbizaivpcgovbizaipublicsubnetSubnet1NATGatewayBC304E83": {
   "Type": "AWS::EC2::NatGateway",
   "Properties": {
    "AllocationId": {
     "Fn::GetAtt": [
      "govbizaivpcgovbizaipublicsubnetSubnet1EIP54986573",
      "AllocationId"
     ]
    },
    "SubnetId": {
     "Ref": "govbizaivpcgovbizaipublicsubnetSubnet1Subnet7171BD1B"
    },
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Name",
      "Value": "TestInfrastructureStack/govbizai-vpc/govbizai-public-subnetSubnet1"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaipublicsubnetSubnet1DefaultRouteAAAAE712",
    "govbizaivpcgovbizaipublicsubnetSubnet1RouteTableAssociation67A23F4C"
   ]
  },
  "govbizaivpcgovbizaipublicsubnetSubnet2SubnetAD54449B": {
   "Type": "AWS::EC2::Subnet",
   "Properties": {
    "AvailabilityZone": {
     "Fn::Select": [
      1,
      {
       "Fn::GetAZs": ""
      }
     ]
    },
    "CidrBlock": "10.0.1.0/24",
    "MapPublicIpOnLaunch": true,
    "Tags": [
     {
      "Key": "aws-cdk:subnet-name",
      "Value": "govbizai-public-subnet"
     },
     {
      "Key": "aws-cdk:subnet-type",
      "Value": "Public"
     },
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Name",
      "Value": "TestInfrastructureStack/govbizai-vpc/govbizai-public-subnetSubnet2"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   }
  },
  "govbizaivpcgovbizaipublicsubnetSubnet2RouteTable6CB4905C": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Name",
      "Value": "TestInfrastructureStack/govbizai-vpc/govbizai-public-subnetSubnet2"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   }
  },
  "govbizaivpcgovbizaipublicsubnetSubnet2RouteTableAssociationFB0E7F75": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "govbizaivpcgovbizaipublicsubnetSubnet2RouteTable6CB4905C"
    },
    "SubnetId": {
     "Ref": "govbizaivpcgovbizaipublicsubnetSubnet2SubnetAD54449B"
    }
   }
  },
  "govbizaivpcgovbizaipublicsubnetSubnet2DefaultRoute12B616BC": {
   "Type": "AWS::EC2::Route",
   "Properties": {
    "DestinationCidrBlock": "0.0.0.0/0",
    "GatewayId": {
     "Ref": "govbizaivpcIGWB32B4CD2"
    },
    "RouteTableId": {
     "Ref": "govbizaivpcgovbizaipublicsubnetSubnet2RouteTable6CB4905C"
    }
   },
   "DependsOn": [
    "govbizaivpcVPCGWF58BCFC6"
   ]
  },
  "govbizaivpcgovbizaipublicsubnetSubnet2EIP1F41A622": {
   "Type": "AWS::EC2::EIP",
   "Properties": {
    "Domain": "vpc",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Name",
      "Value": "TestInfrastructureStack/govbizai-vpc/govbizai-public-subnetSubnet2"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   }
  },
  "govbizaivpcgovbizaipublicsubnetSubnet2NATGatewayA4B62B2D": {
   "Type": "AWS::EC2::NatGateway",
   "Properties": {
    "AllocationId": {
     "Fn::GetAtt": [
      "govbizaivpcgovbizaipublicsubnetSubnet2EIP1F41A622",
      "AllocationId"
     ]
    },
    "SubnetId": {
     "Ref": "govbizaivpcgovbizaipublicsubnetSubnet2SubnetAD54449B"
    },
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Name",
      "Value": "TestInfrastructureStack/govbizai-vpc/govbizai-public-subnetSubnet2"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaipublicsubnetSubnet2DefaultRoute12B616BC",
    "govbizaivpcgovbizaipublicsubnetSubnet2RouteTableAssociationFB0E7F75"
   ]
  },
  "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8": {
   "Type": "AWS::EC2::Subnet",
   "Properties": {
    "AvailabilityZone": {
     "Fn::Select": [
      0,
      {
       "Fn::GetAZs": ""
      }
     ]
    },
    "CidrBlock": "10.0.2.0/24",
    "MapPublicIpOnLaunch": false,
    "Tags": [
     {
      "Key": "aws-cdk:subnet-name",
      "Value": "govbizai-private-subnet"
     },
     {
      "Key": "aws-cdk:subnet-type",
      "Value": "Private"
     },
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Name",
      "Value": "TestInfrastructureStack/govbizai-vpc/govbizai-private-subnetSubnet1"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   }
  },
  "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableBD20F7E4": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Name",
      "Value": "TestInfrastructureStack/govbizai-vpc/govbizai-private-subnetSubnet1"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   }
  },
  "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableBD20F7E4"
    },
    "SubnetId": {
     "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
    }
   }
  },
  "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88": {
   "Type": "AWS::EC2::Route",
   "Properties": {
    "DestinationCidrBlock": "0.0.0.0/0",
    "NatGatewayId": {
     "Ref": "govbizaivpcgovbizaipublicsubnetSubnet1NATGatewayBC304E83"
    },
    "RouteTableId": {
     "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableBD20F7E4"
    }
   }
  },
  "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D": {
   "Type": "AWS::EC2::Subnet",
   "Properties": {
    "AvailabilityZone": {
     "Fn::Select": [
      1,
      {
       "Fn::GetAZs": ""
      }
     ]
    },
    "CidrBlock": "10.0.3.0/24",
    "MapPublicIpOnLaunch": false,
    "Tags": [
     {
      "Key": "aws-cdk:subnet-name",
      "Value": "govbizai-private-subnet"
     },
     {
      "Key": "aws-cdk:subnet-type",
      "Value": "Private"
     },
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Name",
      "Value": "TestInfrastructureStack/govbizai-vpc/govbizai-private-subnetSubnet2"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   }
  },
  "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTable619D4450": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Name",
      "Value": "TestInfrastructureStack/govbizai-vpc/govbizai-private-subnetSubnet2"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   }
  },
  "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTable619D4450"
    },
    "SubnetId": {
     "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
    }
   }
  },
  "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C": {
   "Type": "AWS::EC2::Route",
   "Properties": {
    "DestinationCidrBlock": "0.0.0.0/0",
    "NatGatewayId": {
     "Ref": "govbizaivpcgovbizaipublicsubnetSubnet2NATGatewayA4B62B2D"
    },
    "RouteTableId": {
     "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTable619D4450"
    }
   }
  },
  "govbizaivpcgovbizaiisolatedsubnetSubnet1Subnet781E2D84": {
   "Type": "AWS::EC2::Subnet",
   "Properties": {
    "AvailabilityZone": {
     "Fn::Select": [
      0,
      {
       "Fn::GetAZs": ""
      }
     ]
    },
    "CidrBlock": "10.0.4.0/28",
    "MapPublicIpOnLaunch": false,
    "Tags": [
     {
      "Key": "aws-cdk:subnet-name",
      "Value": "govbizai-isolated-subnet"
     },
     {
      "Key": "aws-cdk:subnet-type",
      "Value": "Isolated"
     },
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Name",
      "Value": "TestInfrastructureStack/govbizai-vpc/govbizai-isolated-subnetSubnet1"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   }
  },
  "govbizaivpcgovbizaiisolatedsubnetSubnet1RouteTable31F6002D": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Name",
      "Value": "TestInfrastructureStack/govbizai-vpc/govbizai-isolated-subnetSubnet1"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   }
  },
  "govbizaivpcgovbizaiisolatedsubnetSubnet1RouteTableAssociation61D0E243": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "govbizaivpcgovbizaiisolatedsubnetSubnet1RouteTable31F6002D"
    },
    "SubnetId": {
     "Ref": "govbizaivpcgovbizaiisolatedsubnetSubnet1Subnet781E2D84"
    }
   }
  },
  "govbizaivpcgovbizaiisolatedsubnetSubnet2Subnet5F032299": {
   "Type": "AWS::EC2::Subnet",
   "Properties": {
    "AvailabilityZone": {
     "Fn::Select": [
      1,
      {
       "Fn::GetAZs": ""
      }
     ]
    },
    "CidrBlock": "10.0.4.16/28",
    "MapPublicIpOnLaunch": false,
    "Tags": [
     {
      "Key": "aws-cdk:subnet-name",
      "Value": "govbizai-isolated-subnet"
     },
     {
      "Key": "aws-cdk:subnet-type",
      "Value": "Isolated"
     },
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Name",
      "Value": "TestInfrastructureStack/govbizai-vpc/govbizai-isolated-subnetSubnet2"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   }
  },
  "govbizaivpcgovbizaiisolatedsubnetSubnet2RouteTableFA721D3A": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Name",
      "Value": "TestInfrastructureStack/govbizai-vpc/govbizai-isolated-subnetSubnet2"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   }
  },
  "govbizaivpcgovbizaiisolatedsubnetSubnet2RouteTableAssociationCFD06DD3": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "govbizaivpcgovbizaiisolatedsubnetSubnet2RouteTableFA721D3A"
    },
    "SubnetId": {
     "Ref": "govbizaivpcgovbizaiisolatedsubnetSubnet2Subnet5F032299"
    }
   }
  },
  "govbizaivpcIGWB32B4CD2": {
   "Type": "AWS::EC2::InternetGateway",
   "Properties": {
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Name",
      "Value": "govbizai-vpc"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   }
  },
  "govbizaivpcVPCGWF58BCFC6": {
   "Type": "AWS::EC2::VPCGatewayAttachment",
   "Properties": {
    "InternetGatewayId": {
     "Ref": "govbizaivpcIGWB32B4CD2"
    },
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   }
  },
  "govbizaivpcs36E2CF0DF": {
   "Type": "AWS::EC2::VPCEndpoint",
   "Properties": {
    "RouteTableIds": [
     {
      "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableBD20F7E4"
     },
     {
      "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTable619D4450"
     },
     {
      "Ref": "govbizaivpcgovbizaipublicsubnetSubnet1RouteTableB90BAA78"
     },
     {
      "Ref": "govbizaivpcgovbizaipublicsubnetSubnet2RouteTable6CB4905C"
     },
     {
      "Ref": "govbizaivpcgovbizaiisolatedsubnetSubnet1RouteTable31F6002D"
     },
     {
      "Ref": "govbizaivpcgovbizaiisolatedsubnetSubnet2RouteTableFA721D3A"
     }
    ],
    "ServiceName": {
     "Fn::Join": [
      "",
      [
       "com.amazonaws.",
       {
        "Ref": "AWS::Region"
       },
       ".s3"
      ]
     ]
    },
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Name",
      "Value": "govbizai-vpc"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcEndpointType": "Gateway",
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   }
  },
  "govbizaivpcdynamodb2E696A6C": {
   "Type": "AWS::EC2::VPCEndpoint",
   "Properties": {
    "RouteTableIds": [
     {
      "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableBD20F7E4"
     },
     {
      "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTable619D4450"
     },
     {
      "Ref": "govbizaivpcgovbizaipublicsubnetSubnet1RouteTableB90BAA78"
     },
     {
      "Ref": "govbizaivpcgovbizaipublicsubnetSubnet2RouteTable6CB4905C"
     },
     {
      "Ref": "govbizaivpcgovbizaiisolatedsubnetSubnet1RouteTable31F6002D"
     },
     {
      "Ref": "govbizaivpcgovbizaiisolatedsubnetSubnet2RouteTableFA721D3A"
     }
    ],
    "ServiceName": {
     "Fn::Join": [
      "",
      [
       "com.amazonaws.",
       {
        "Ref": "AWS::Region"
       },
       ".dynamodb"
      ]
     ]
    },
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Name",
      "Value": "govbizai-vpc"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcEndpointType": "Gateway",
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   }
  },
  "govbizaivpcendpointsgBFFB67C4": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Security group for VPC endpoints",
    "SecurityGroupEgress": [
     {
      "CidrIp": "255.255.255.255/32",
      "Description": "Disallow all traffic",
      "FromPort": 252,
      "IpProtocol": "icmp",
      "ToPort": 86
     }
    ],
    "SecurityGroupIngress": [
     {
      "CidrIp": {
       "Fn::GetAtt": [
        "govbizaivpcC82B5B04",
        "CidrBlock"
       ]
      },
      "Description": "Allow HTTPS from VPC",
      "FromPort": 443,
      "IpProtocol": "tcp",
      "ToPort": 443
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   }
  },
  "govbizaibedrockendpoint0548617D": {
   "Type": "AWS::EC2::VPCEndpoint",
   "Properties": {
    "PrivateDnsEnabled": true,
    "SecurityGroupIds": [
     {
      "Fn::GetAtt": [
       "govbizaivpcendpointsgBFFB67C4",
       "GroupId"
      ]
     }
    ],
    "ServiceName": {
     "Fn::Join": [
      "",
      [
       "com.amazonaws.",
       {
        "Ref": "AWS::Region"
       },
       ".bedrock"
      ]
     ]
    },
    "SubnetIds": [
     {
      "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
     },
     {
      "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcEndpointType": "Interface",
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   }
  },
  "govbizaibedrockruntimeendpointC5313AC9": {
   "Type": "AWS::EC2::VPCEndpoint",
   "Properties": {
    "PrivateDnsEnabled": true,
    "SecurityGroupIds": [
     {
      "Fn::GetAtt": [
       "govbizaivpcendpointsgBFFB67C4",
       "GroupId"
      ]
     }
    ],
    "ServiceName": {
     "Fn::Join": [
      "",
      [
       "com.amazonaws.",
       {
        "Ref": "AWS::Region"
       },
       ".bedrock-runtime"
      ]
     ]
    },
    "SubnetIds": [
     {
      "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
     },
     {
      "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcEndpointType": "Interface",
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   }
  },
  "govbizailambdaendpointF68586A0": {
   "Type": "AWS::EC2::VPCEndpoint",
   "Properties": {
    "PrivateDnsEnabled": true,
    "SecurityGroupIds": [
     {
      "Fn::GetAtt": [
       "govbizaivpcendpointsgBFFB67C4",
       "GroupId"
      ]
     }
    ],
    "ServiceName": {
     "Fn::Join": [
      "",
      [
       "com.amazonaws.",
       {
        "Ref": "AWS::Region"
       },
       ".lambda"
      ]
     ]
    },
    "SubnetIds": [
     {
      "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
     },
     {
      "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcEndpointType": "Interface",
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   }
  },
  "govbizaisqsendpoint63FE92C4": {
   "Type": "AWS::EC2::VPCEndpoint",
   "Properties": {
    "PrivateDnsEnabled": true,
    "SecurityGroupIds": [
     {
      "Fn::GetAtt": [
       "govbizaivpcendpointsgBFFB67C4",
       "GroupId"
      ]
     }
    ],
    "ServiceName": {
     "Fn::Join": [
      "",
      [
       "com.amazonaws.",
       {
        "Ref": "AWS::Region"
       },
       ".sqs"
      ]
     ]
    },
    "SubnetIds": [
     {
      "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
     },
     {
      "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcEndpointType": "Interface",
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   }
  },
  "govbizaisnsendpoint42CED390": {
   "Type": "AWS::EC2::VPCEndpoint",
   "Properties": {
    "PrivateDnsEnabled": true,
    "SecurityGroupIds": [
     {
      "Fn::GetAtt": [
       "govbizaivpcendpointsgBFFB67C4",
       "GroupId"
      ]
     }
    ],
    "ServiceName": {
     "Fn::Join": [
      "",
      [
       "com.amazonaws.",
       {
        "Ref": "AWS::Region"
       },
       ".sns"
      ]
     ]
    },
    "SubnetIds": [
     {
      "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
     },
     {
      "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcEndpointType": "Interface",
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   }
  },
  "govbizaicloudwatchlogsendpoint9725A2F5": {
   "Type": "AWS::EC2::VPCEndpoint",
   "Properties": {
    "PrivateDnsEnabled": true,
    "SecurityGroupIds": [
     {
      "Fn::GetAtt": [
       "govbizaivpcendpointsgBFFB67C4",
       "GroupId"
      ]
     }
    ],
    "ServiceName": {
     "Fn::Join": [
      "",
      [
       "com.amazonaws.",
       {
        "Ref": "AWS::Region"
       },
       ".logs"
      ]
     ]
    },
    "SubnetIds": [
     {
      "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
     },
     {
      "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcEndpointType": "Interface",
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   }
  },
  "govbizaistepfunctionsendpoint17AEBF41": {
   "Type": "AWS::EC2::VPCEndpoint",
   "Properties": {
    "PrivateDnsEnabled": true,
    "SecurityGroupIds": [
     {
      "Fn::GetAtt": [
       "govbizaivpcendpointsgBFFB67C4",
       "GroupId"
      ]
     }
    ],
    "ServiceName": {
     "Fn::Join": [
      "",
      [
       "com.amazonaws.",
       {
        "Ref": "AWS::Region"
       },
       ".states"
      ]
     ]
    },
    "SubnetIds": [
     {
      "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
     },
     {
      "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcEndpointType": "Interface",
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   }
  },
  "govbizaieventbridgeendpointE04FEC33": {
   "Type": "AWS::EC2::VPCEndpoint",
   "Properties": {
    "PrivateDnsEnabled": true,
    "SecurityGroupIds": [
     {
      "Fn::GetAtt": [
       "govbizaivpcendpointsgBFFB67C4",
       "GroupId"
      ]
     }
    ],
    "ServiceName": {
     "Fn::Join": [
      "",
      [
       "com.amazonaws.",
       {
        "Ref": "AWS::Region"
       },
       ".events"
      ]
     ]
    },
    "SubnetIds": [
     {
      "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
     },
     {
      "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcEndpointType": "Interface",
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   }
  },
  "govbizaitextractendpoint20CF986D": {
   "Type": "AWS::EC2::VPCEndpoint",
   "Properties": {
    "PrivateDnsEnabled": true,
    "SecurityGroupIds": [
     {
      "Fn::GetAtt": [
       "govbizaivpcendpointsgBFFB67C4",
       "GroupId"
      ]
     }
    ],
    "ServiceName": {
     "Fn::Join": [
      "",
      [
       "com.amazonaws.",
       {
        "Ref": "AWS::Region"
       },
       ".textract"
      ]
     ]
    },
    "SubnetIds": [
     {
      "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
     },
     {
      "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcEndpointType": "Interface",
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   }
  },
  "govbizairawdocumentsC6263907": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "BucketEncryption": {
     "ServerSideEncryptionConfiguration": [
      {
       "ServerSideEncryptionByDefault": {
        "KMSMasterKeyID": {
         "Fn::GetAtt": [
          "govbizaiencryptionkeyC77D74E4",
          "Arn"
         ]
        },
        "SSEAlgorithm": "aws:kms"
       }
      }
     ]
    },
    "BucketName": {
     "Fn::Join": [
      "",
      [
       "govbizai-raw-documents-",
       {
        "Ref": "AWS::AccountId"
       },
       "-",
       {
        "Ref": "AWS::Region"
       }
      ]
     ]
    },
    "LifecycleConfiguration": {
     "Rules": [
      {
       "Id": "govbizai-raw-documents-lifecycle",
       "Status": "Enabled",
       "Transitions": [
        {
         "StorageClass": "STANDARD_IA",
         "TransitionInDays": 30
        },
        {
         "StorageClass": "GLACIER_IR",
         "TransitionInDays": 90
        }
       ]
      }
     ]
    },
    "PublicAccessBlockConfiguration": {
     "BlockPublicAcls": true,
     "BlockPublicPolicy": true,
     "IgnorePublicAcls": true,
     "RestrictPublicBuckets": true
    },
    "Tags": [
     {
      "Key": "aws-cdk:auto-delete-objects",
      "Value": "true"
     },
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VersioningConfiguration": {
     "Status": "Enabled"
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "govbizairawdocumentsPolicy97E60CFC": {
   "Type": "AWS::S3::BucketPolicy",
   "Properties": {
    "Bucket": {
     "Ref": "govbizairawdocumentsC6263907"
    },
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "s3:*",
       "Condition": {
        "Bool": {
         "aws:SecureTransport": "false"
        }
       },
       "Effect": "Deny",
       "Principal": {
        "AWS": "*"
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizairawdocumentsC6263907",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizairawdocumentsC6263907",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:PutBucketPolicy",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*"
       ],
       "Effect": "Allow",
       "Principal": {
        "AWS": {
         "Fn::GetAtt": [
          "CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092",
          "Arn"
         ]
        }
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizairawdocumentsC6263907",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizairawdocumentsC6263907",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    }
   }
  },
  "govbizairawdocumentsAutoDeleteObjectsCustomResource0A1B78A4": {
   "Type": "Custom::S3AutoDeleteObjects",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "CustomS3AutoDeleteObjectsCustomResourceProviderHandler9D90184F",
      "Arn"
     ]
    },
    "BucketName": {
     "Ref": "govbizairawdocumentsC6263907"
    }
   },
   "DependsOn": [
    "govbizairawdocumentsPolicy97E60CFC"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Version": "2012-10-17",
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ]
    },
    "ManagedPolicyArns": [
     {
      "Fn::Sub": "arn:${AWS::Partition}:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
     }
    ]
   }
  },
  "CustomS3AutoDeleteObjectsCustomResourceProviderHandler9D90184F": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "faa95a81ae7d7373f3e1f242268f904eb748d8d0fdd306e8a6fe515a1905a7d6.zip"
    },
    "Timeout": 900,
    "MemorySize": 128,
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092",
      "Arn"
     ]
    },
    "Runtime": "nodejs22.x",
    "Description": {
     "Fn::Join": [
      "",
      [
       "Lambda function for auto-deleting objects in ",
       {
        "Ref": "govbizairawdocumentsC6263907"
       },
       " S3 bucket."
      ]
     ]
    }
   },
   "DependsOn": [
    "CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092"
   ]
  },
  "govbizaiprocesseddocumentsEB84F3C4": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "BucketEncryption": {
     "ServerSideEncryptionConfiguration": [
      {
       "ServerSideEncryptionByDefault": {
        "KMSMasterKeyID": {
         "Fn::GetAtt": [
          "govbizaiencryptionkeyC77D74E4",
          "Arn"
         ]
        },
        "SSEAlgorithm": "aws:kms"
       }
      }
     ]
    },
    "BucketName": {
     "Fn::Join": [
      "",
      [
       "govbizai-processed-documents-",
       {
        "Ref": "AWS::AccountId"
       },
       "-",
       {
        "Ref": "AWS::Region"
       }
      ]
     ]
    },
    "LifecycleConfiguration": {
     "Rules": [
      {
       "Id": "govbizai-processed-documents-lifecycle",
       "Status": "Enabled",
       "Transitions": [
        {
         "StorageClass": "STANDARD_IA",
         "TransitionInDays": 30
        },
        {
         "StorageClass": "GLACIER_IR",
         "TransitionInDays": 90
        }
       ]
      }
     ]
    },
    "PublicAccessBlockConfiguration": {
     "BlockPublicAcls": true,
     "BlockPublicPolicy": true,
     "IgnorePublicAcls": true,
     "RestrictPublicBuckets": true
    },
    "Tags": [
     {
      "Key": "aws-cdk:auto-delete-objects",
      "Value": "true"
     },
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VersioningConfiguration": {
     "Status": "Enabled"
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "govbizaiprocesseddocumentsPolicy24FAD4DB": {
   "Type": "AWS::S3::BucketPolicy",
   "Properties": {
    "Bucket": {
     "Ref": "govbizaiprocesseddocumentsEB84F3C4"
    },
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "s3:*",
       "Condition": {
        "Bool": {
         "aws:SecureTransport": "false"
        }
       },
       "Effect": "Deny",
       "Principal": {
        "AWS": "*"
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiprocesseddocumentsEB84F3C4",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiprocesseddocumentsEB84F3C4",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:PutBucketPolicy",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*"
       ],
       "Effect": "Allow",
       "Principal": {
        "AWS": {
         "Fn::GetAtt": [
          "CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092",
          "Arn"
         ]
        }
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiprocesseddocumentsEB84F3C4",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiprocesseddocumentsEB84F3C4",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    }
   }
  },
  "govbizaiprocesseddocumentsAutoDeleteObjectsCustomResource39379270": {
   "Type": "Custom::S3AutoDeleteObjects",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "CustomS3AutoDeleteObjectsCustomResourceProviderHandler9D90184F",
      "Arn"
     ]
    },
    "BucketName": {
     "Ref": "govbizaiprocesseddocumentsEB84F3C4"
    }
   },
   "DependsOn": [
    "govbizaiprocesseddocumentsPolicy24FAD4DB"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "govbizaiembeddings9C1E2D0C": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "BucketEncryption": {
     "ServerSideEncryptionConfiguration": [
      {
       "ServerSideEncryptionByDefault": {
        "KMSMasterKeyID": {
         "Fn::GetAtt": [
          "govbizaiencryptionkeyC77D74E4",
          "Arn"
         ]
        },
        "SSEAlgorithm": "aws:kms"
       }
      }
     ]
    },
    "BucketName": {
     "Fn::Join": [
      "",
      [
       "govbizai-embeddings-",
       {
        "Ref": "AWS::AccountId"
       },
       "-",
       {
        "Ref": "AWS::Region"
       }
      ]
     ]
    },
    "LifecycleConfiguration": {
     "Rules": [
      {
       "Id": "govbizai-embeddings-lifecycle",
       "Status": "Enabled",
       "Transitions": [
        {
         "StorageClass": "STANDARD_IA",
         "TransitionInDays": 60
        }
       ]
      }
     ]
    },
    "PublicAccessBlockConfiguration": {
     "BlockPublicAcls": true,
     "BlockPublicPolicy": true,
     "IgnorePublicAcls": true,
     "RestrictPublicBuckets": true
    },
    "Tags": [
     {
      "Key": "aws-cdk:auto-delete-objects",
      "Value": "true"
     },
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VersioningConfiguration": {
     "Status": "Enabled"
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "govbizaiembeddingsPolicy7BD36E2E": {
   "Type": "AWS::S3::BucketPolicy",
   "Properties": {
    "Bucket": {
     "Ref": "govbizaiembeddings9C1E2D0C"
    },
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "s3:*",
       "Condition": {
        "Bool": {
         "aws:SecureTransport": "false"
        }
       },
       "Effect": "Deny",
       "Principal": {
        "AWS": "*"
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiembeddings9C1E2D0C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiembeddings9C1E2D0C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:PutBucketPolicy",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*"
       ],
       "Effect": "Allow",
       "Principal": {
        "AWS": {
         "Fn::GetAtt": [
          "CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092",
          "Arn"
         ]
        }
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiembeddings9C1E2D0C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiembeddings9C1E2D0C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    }
   }
  },
  "govbizaiembeddingsAutoDeleteObjectsCustomResource510AF300": {
   "Type": "Custom::S3AutoDeleteObjects",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "CustomS3AutoDeleteObjectsCustomResourceProviderHandler9D90184F",
      "Arn"
     ]
    },
    "BucketName": {
     "Ref": "govbizaiembeddings9C1E2D0C"
    }
   },
   "DependsOn": [
    "govbizaiembeddingsPolicy7BD36E2E"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "govbizaitempprocessing8660E60C": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "BucketEncryption": {
     "ServerSideEncryptionConfiguration": [
      {
       "ServerSideEncryptionByDefault": {
        "KMSMasterKeyID": {
         "Fn::GetAtt": [
          "govbizaiencryptionkeyC77D74E4",
          "Arn"
         ]
        },
        "SSEAlgorithm": "aws:kms"
       }
      }
     ]
    },
    "BucketName": {
     "Fn::Join": [
      "",
      [
       "govbizai-temp-processing-",
       {
        "Ref": "AWS::AccountId"
       },
       "-",
       {
        "Ref": "AWS::Region"
       }
      ]
     ]
    },
    "LifecycleConfiguration": {
     "Rules": [
      {
       "ExpirationInDays": 7,
       "Id": "govbizai-temp-processing-lifecycle",
       "Status": "Enabled"
      }
     ]
    },
    "PublicAccessBlockConfiguration": {
     "BlockPublicAcls": true,
     "BlockPublicPolicy": true,
     "IgnorePublicAcls": true,
     "RestrictPublicBuckets": true
    },
    "Tags": [
     {
      "Key": "aws-cdk:auto-delete-objects",
      "Value": "true"
     },
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VersioningConfiguration": {
     "Status": "Enabled"
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "govbizaitempprocessingPolicyC352D29A": {
   "Type": "AWS::S3::BucketPolicy",
   "Properties": {
    "Bucket": {
     "Ref": "govbizaitempprocessing8660E60C"
    },
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "s3:*",
       "Condition": {
        "Bool": {
         "aws:SecureTransport": "false"
        }
       },
       "Effect": "Deny",
       "Principal": {
        "AWS": "*"
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaitempprocessing8660E60C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaitempprocessing8660E60C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:PutBucketPolicy",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*"
       ],
       "Effect": "Allow",
       "Principal": {
        "AWS": {
         "Fn::GetAtt": [
          "CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092",
          "Arn"
         ]
        }
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaitempprocessing8660E60C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaitempprocessing8660E60C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    }
   }
  },
  "govbizaitempprocessingAutoDeleteObjectsCustomResource34858E76": {
   "Type": "Custom::S3AutoDeleteObjects",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "CustomS3AutoDeleteObjectsCustomResourceProviderHandler9D90184F",
      "Arn"
     ]
    },
    "BucketName": {
     "Ref": "govbizaitempprocessing8660E60C"
    }
   },
   "DependsOn": [
    "govbizaitempprocessingPolicyC352D29A"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "govbizaiarchive5B5E91E9": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "BucketEncryption": {
     "ServerSideEncryptionConfiguration": [
      {
       "ServerSideEncryptionByDefault": {
        "KMSMasterKeyID": {
         "Fn::GetAtt": [
          "govbizaiencryptionkeyC77D74E4",
          "Arn"
         ]
        },
        "SSEAlgorithm": "aws:kms"
       }
      }
     ]
    },
    "BucketName": {
     "Fn::Join": [
      "",
      [
       "govbizai-archive-",
       {
        "Ref": "AWS::AccountId"
       },
       "-",
       {
        "Ref": "AWS::Region"
       }
      ]
     ]
    },
    "LifecycleConfiguration": {
     "Rules": [
      {
       "Id": "govbizai-archive-lifecycle",
       "Status": "Enabled",
       "Transitions": [
        {
         "StorageClass": "GLACIER_IR",
         "TransitionInDays": 1
        },
        {
         "StorageClass": "DEEP_ARCHIVE",
         "TransitionInDays": 180
        }
       ]
      }
     ]
    },
    "PublicAccessBlockConfiguration": {
     "BlockPublicAcls": true,
     "BlockPublicPolicy": true,
     "IgnorePublicAcls": true,
     "RestrictPublicBuckets": true
    },
    "Tags": [
     {
      "Key": "aws-cdk:auto-delete-objects",
      "Value": "true"
     },
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VersioningConfiguration": {
     "Status": "Enabled"
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "govbizaiarchivePolicy3285076F": {
   "Type": "AWS::S3::BucketPolicy",
   "Properties": {
    "Bucket": {
     "Ref": "govbizaiarchive5B5E91E9"
    },
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "s3:*",
       "Condition": {
        "Bool": {
         "aws:SecureTransport": "false"
        }
       },
       "Effect": "Deny",
       "Principal": {
        "AWS": "*"
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiarchive5B5E91E9",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiarchive5B5E91E9",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:PutBucketPolicy",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*"
       ],
       "Effect": "Allow",
       "Principal": {
        "AWS": {
         "Fn::GetAtt": [
          "CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092",
          "Arn"
         ]
        }
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiarchive5B5E91E9",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiarchive5B5E91E9",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    }
   }
  },
  "govbizaiarchiveAutoDeleteObjectsCustomResource0C1D299B": {
   "Type": "Custom::S3AutoDeleteObjects",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "CustomS3AutoDeleteObjectsCustomResourceProviderHandler9D90184F",
      "Arn"
     ]
    },
    "BucketName": {
     "Ref": "govbizaiarchive5B5E91E9"
    }
   },
   "DependsOn": [
    "govbizaiarchivePolicy3285076F"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "govbizaiopportunities87C89AB3": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "notice_id",
      "AttributeType": "S"
     },
     {
      "AttributeName": "posted_date",
      "AttributeType": "S"
     },
     {
      "AttributeName": "archive_date",
      "AttributeType": "S"
     },
     {
      "AttributeName": "naics_code",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "GlobalSecondaryIndexes": [
     {
      "IndexName": "archive-date-index",
      "KeySchema": [
       {
        "AttributeName": "archive_date",
        "KeyType": "HASH"
       },
       {
        "AttributeName": "posted_date",
        "KeyType": "RANGE"
       }
      ],
      "Projection": {
       "ProjectionType": "ALL"
      }
     },
     {
      "IndexName": "naics-code-index",
      "KeySchema": [
       {
        "AttributeName": "naics_code",
        "KeyType": "HASH"
       },
       {
        "AttributeName": "posted_date",
        "KeyType": "RANGE"
       }
      ],
      "Projection": {
       "ProjectionType": "ALL"
      }
     }
    ],
    "KeySchema": [
     {
      "AttributeName": "notice_id",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "posted_date",
      "KeyType": "RANGE"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "SSESpecification": {
     "KMSMasterKeyId": {
      "Fn::GetAtt": [
       "govbizaiencryptionkeyC77D74E4",
       "Arn"
      ]
     },
     "SSEEnabled": true,
     "SSEType": "KMS"
    },
    "TableName": "govbizai-opportunities",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "govbizaicompaniesEF47080E": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "company_id",
      "AttributeType": "S"
     },
     {
      "AttributeName": "tenant_id",
      "AttributeType": "S"
     },
     {
      "AttributeName": "company_name",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "GlobalSecondaryIndexes": [
     {
      "IndexName": "tenant-id-index",
      "KeySchema": [
       {
        "AttributeName": "tenant_id",
        "KeyType": "HASH"
       },
       {
        "AttributeName": "company_name",
        "KeyType": "RANGE"
       }
      ],
      "Projection": {
       "ProjectionType": "ALL"
      }
     }
    ],
    "KeySchema": [
     {
      "AttributeName": "company_id",
      "KeyType": "HASH"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "SSESpecification": {
     "KMSMasterKeyId": {
      "Fn::GetAtt": [
       "govbizaiencryptionkeyC77D74E4",
       "Arn"
      ]
     },
     "SSEEnabled": true,
     "SSEType": "KMS"
    },
    "TableName": "govbizai-companies",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "govbizaimatches22EB0E45": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "company_id",
      "AttributeType": "S"
     },
     {
      "AttributeName": "opportunity_id",
      "AttributeType": "S"
     },
     {
      "AttributeName": "total_score",
      "AttributeType": "N"
     },
     {
      "AttributeName": "confidence_level",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "GlobalSecondaryIndexes": [
     {
      "IndexName": "opportunity-id-index",
      "KeySchema": [
       {
        "AttributeName": "opportunity_id",
        "KeyType": "HASH"
       },
       {
        "AttributeName": "total_score",
        "KeyType": "RANGE"
       }
      ],
      "Projection": {
       "ProjectionType": "ALL"
      }
     },
     {
      "IndexName": "confidence-level-index",
      "KeySchema": [
       {
        "AttributeName": "confidence_level",
        "KeyType": "HASH"
       },
       {
        "AttributeName": "total_score",
        "KeyType": "RANGE"
       }
      ],
      "Projection": {
       "ProjectionType": "ALL"
      }
     }
    ],
    "KeySchema": [
     {
      "AttributeName": "company_id",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "opportunity_id",
      "KeyType": "RANGE"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "SSESpecification": {
     "KMSMasterKeyId": {
      "Fn::GetAtt": [
       "govbizaiencryptionkeyC77D74E4",
       "Arn"
      ]
     },
     "SSEEnabled": true,
     "SSEType": "KMS"
    },
    "TableName": "govbizai-matches",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "govbizaiuserprofiles6B97A1D0": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "user_id",
      "AttributeType": "S"
     },
     {
      "AttributeName": "tenant_id",
      "AttributeType": "S"
     },
     {
      "AttributeName": "email",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "GlobalSecondaryIndexes": [
     {
      "IndexName": "tenant-id-index",
      "KeySchema": [
       {
        "AttributeName": "tenant_id",
        "KeyType": "HASH"
       },
       {
        "AttributeName": "email",
        "KeyType": "RANGE"
       }
      ],
      "Projection": {
       "ProjectionType": "ALL"
      }
     }
    ],
    "KeySchema": [
     {
      "AttributeName": "user_id",
      "KeyType": "HASH"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "SSESpecification": {
     "KMSMasterKeyId": {
      "Fn::GetAtt": [
       "govbizaiencryptionkeyC77D74E4",
       "Arn"
      ]
     },
     "SSEEnabled": true,
     "SSEType": "KMS"
    },
    "TableName": "govbizai-user-profiles",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "govbizaiauditlog8C2898B9": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "tenant_id",
      "AttributeType": "S"
     },
     {
      "AttributeName": "timestamp",
      "AttributeType": "S"
     },
     {
      "AttributeName": "action_type",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "GlobalSecondaryIndexes": [
     {
      "IndexName": "action-type-index",
      "KeySchema": [
       {
        "AttributeName": "action_type",
        "KeyType": "HASH"
       },
       {
        "AttributeName": "timestamp",
        "KeyType": "RANGE"
       }
      ],
      "Projection": {
       "ProjectionType": "ALL"
      }
     }
    ],
    "KeySchema": [
     {
      "AttributeName": "tenant_id",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "timestamp",
      "KeyType": "RANGE"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "SSESpecification": {
     "KMSMasterKeyId": {
      "Fn::GetAtt": [
       "govbizaiencryptionkeyC77D74E4",
       "Arn"
      ]
     },
     "SSEEnabled": true,
     "SSEType": "KMS"
    },
    "TableName": "govbizai-audit-log",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "TimeToLiveSpecification": {
     "AttributeName": "ttl",
     "Enabled": true
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "govbizaifeedbackA5E7768E": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "match_id",
      "AttributeType": "S"
     },
     {
      "AttributeName": "feedback_timestamp",
      "AttributeType": "S"
     },
     {
      "AttributeName": "company_id",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "GlobalSecondaryIndexes": [
     {
      "IndexName": "company-id-index",
      "KeySchema": [
       {
        "AttributeName": "company_id",
        "KeyType": "HASH"
       },
       {
        "AttributeName": "feedback_timestamp",
        "KeyType": "RANGE"
       }
      ],
      "Projection": {
       "ProjectionType": "ALL"
      }
     }
    ],
    "KeySchema": [
     {
      "AttributeName": "match_id",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "feedback_timestamp",
      "KeyType": "RANGE"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "SSESpecification": {
     "KMSMasterKeyId": {
      "Fn::GetAtt": [
       "govbizaiencryptionkeyC77D74E4",
       "Arn"
      ]
     },
     "SSEEnabled": true,
     "SSEType": "KMS"
    },
    "TableName": "govbizai-feedback",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "govbizaitenantsA724F50D": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "tenant_id",
      "AttributeType": "S"
     },
     {
      "AttributeName": "tenant_name",
      "AttributeType": "S"
     },
     {
      "AttributeName": "subscription_tier",
      "AttributeType": "S"
     },
     {
      "AttributeName": "created_at",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "GlobalSecondaryIndexes": [
     {
      "IndexName": "tenant-name-index",
      "KeySchema": [
       {
        "AttributeName": "tenant_name",
        "KeyType": "HASH"
       }
      ],
      "Projection": {
       "ProjectionType": "ALL"
      }
     },
     {
      "IndexName": "subscription-tier-index",
      "KeySchema": [
       {
        "AttributeName": "subscription_tier",
        "KeyType": "HASH"
       },
       {
        "AttributeName": "created_at",
        "KeyType": "RANGE"
       }
      ],
      "Projection": {
       "ProjectionType": "ALL"
      }
     }
    ],
    "KeySchema": [
     {
      "AttributeName": "tenant_id",
      "KeyType": "HASH"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "SSESpecification": {
     "KMSMasterKeyId": {
      "Fn::GetAtt": [
       "govbizaiencryptionkeyC77D74E4",
       "Arn"
      ]
     },
     "SSEEnabled": true,
     "SSEType": "KMS"
    },
    "TableName": "govbizai-tenants",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "govbizaicloudtrailloggroup162648EF": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": "/aws/cloudtrail/govbizai",
    "RetentionInDays": 365,
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "govbizaicloudtrailS3D3F47E33": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain"
  },
  "govbizaicloudtrailS3Policy55854313": {
   "Type": "AWS::S3::BucketPolicy",
   "Properties": {
    "Bucket": {
     "Ref": "govbizaicloudtrailS3D3F47E33"
    },
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "s3:*",
       "Condition": {
        "Bool": {
         "aws:SecureTransport": "false"
        }
       },
       "Effect": "Deny",
       "Principal": {
        "AWS": "*"
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicloudtrailS3D3F47E33",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicloudtrailS3D3F47E33",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "s3:GetBucketAcl",
       "Effect": "Allow",
       "Principal": {
        "Service": "cloudtrail.amazonaws.com"
       },
       "Resource": {
        "Fn::GetAtt": [
         "govbizaicloudtrailS3D3F47E33",
         "Arn"
        ]
       }
      },
      {
       "Action": "s3:PutObject",
       "Condition": {
        "StringEquals": {
         "s3:x-amz-acl": "bucket-owner-full-control"
        }
       },
       "Effect": "Allow",
       "Principal": {
        "Service": "cloudtrail.amazonaws.com"
       },
       "Resource": {
        "Fn::Join": [
         "",
         [
          {
           "Fn::GetAtt": [
            "govbizaicloudtrailS3D3F47E33",
            "Arn"
           ]
          },
          "/AWSLogs/",
          {
           "Ref": "AWS::AccountId"
          },
          "/*"
         ]
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    }
   }
  },
  "govbizaicloudtrailLogsRoleF1686EF2": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "cloudtrail.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   }
  },
  "govbizaicloudtrailLogsRoleDefaultPolicy68739B5B": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "logs:PutLogEvents",
        "logs:CreateLogStream"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaicloudtrailloggroup162648EF",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaicloudtrailLogsRoleDefaultPolicy68739B5B",
    "Roles": [
     {
      "Ref": "govbizaicloudtrailLogsRoleF1686EF2"
     }
    ]
   }
  },
  "govbizaicloudtrailC0AECAA4": {
   "Type": "AWS::CloudTrail::Trail",
   "Properties": {
    "CloudWatchLogsLogGroupArn": {
     "Fn::GetAtt": [
      "govbizaicloudtrailloggroup162648EF",
      "Arn"
     ]
    },
    "CloudWatchLogsRoleArn": {
     "Fn::GetAtt": [
      "govbizaicloudtrailLogsRoleF1686EF2",
      "Arn"
     ]
    },
    "EnableLogFileValidation": true,
    "EventSelectors": [],
    "IncludeGlobalServiceEvents": true,
    "IsLogging": true,
    "IsMultiRegionTrail": true,
    "S3BucketName": {
     "Ref": "govbizaicloudtrailS3D3F47E33"
    },
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "TrailName": "govbizai-cloudtrail"
   },
   "DependsOn": [
    "govbizaicloudtrailLogsRoleDefaultPolicy68739B5B",
    "govbizaicloudtrailLogsRoleF1686EF2",
    "govbizaicloudtrailS3Policy55854313"
   ]
  },
  "govbizaiuserpoolsmsRoleF26FED2D": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Condition": {
        "StringEquals": {
         "sts:ExternalId": "TestInfrastructureStackgovbizaiuserpoolAEB7EFD0"
        }
       },
       "Effect": "Allow",
       "Principal": {
        "Service": "cognito-idp.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Policies": [
     {
      "PolicyDocument": {
       "Statement": [
        {
         "Action": "sns:Publish",
         "Effect": "Allow",
         "Resource": "*"
        }
       ],
       "Version": "2012-10-17"
      },
      "PolicyName": "sns-publish"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   }
  },
  "govbizaiuserpool36C7E10A": {
   "Type": "AWS::Cognito::UserPool",
   "Properties": {
    "AccountRecoverySetting": {
     "RecoveryMechanisms": [
      {
       "Name": "verified_email",
       "Priority": 1
      }
     ]
    },
    "AdminCreateUserConfig": {
     "AllowAdminCreateUserOnly": false
    },
    "AutoVerifiedAttributes": [
     "email"
    ],
    "EmailVerificationMessage": "Thank you for signing up to GovBizAI! Your verification code is {####}",
    "EmailVerificationSubject": "Welcome to GovBizAI - Verify your email",
    "EnabledMfas": [
     "SMS_MFA",
     "SOFTWARE_TOKEN_MFA"
    ],
    "LambdaConfig": {
     "PostConfirmation": {
      "Fn::GetAtt": [
       "govbizaipostconfirmation6D22F3BD",
       "Arn"
      ]
     },
     "PreSignUp": {
      "Fn::GetAtt": [
       "govbizaipresignup74411E2A",
       "Arn"
      ]
     }
    },
    "MfaConfiguration": "OPTIONAL",
    "Policies": {
     "PasswordPolicy": {
      "MinimumLength": 12,
      "RequireLowercase": true,
      "RequireNumbers": true,
      "RequireSymbols": true,
      "RequireUppercase": true,
      "TemporaryPasswordValidityDays": 7
     }
    },
    "Schema": [
     {
      "Mutable": true,
      "Name": "email",
      "Required": true
     },
     {
      "Mutable": true,
      "Name": "given_name",
      "Required": true
     },
     {
      "Mutable": true,
      "Name": "family_name",
      "Required": true
     },
     {
      "Mutable": true,
      "Name": "phone_number",
      "Required": false
     },
     {
      "AttributeDataType": "String",
      "Mutable": true,
      "Name": "company_id"
     },
     {
      "AttributeDataType": "String",
      "Mutable": true,
      "Name": "tenant_id"
     },
     {
      "AttributeDataType": "String",
      "Mutable": true,
      "Name": "role"
     },
     {
      "AttributeDataType": "String",
      "Mutable": true,
      "Name": "subscription_tier"
     }
    ],
    "SmsConfiguration": {
     "ExternalId": "TestInfrastructureStackgovbizaiuserpoolAEB7EFD0",
     "SnsCallerArn": {
      "Fn::GetAtt": [
       "govbizaiuserpoolsmsRoleF26FED2D",
       "Arn"
      ]
     }
    },
    "SmsVerificationMessage": "The verification code to your new account is {####}",
    "UserPoolName": "govbizai-user-pool",
    "UserPoolTags": {
     "Environment": "dev",
     "ManagedBy": "CDK",
     "Project": "govbizai"
    },
    "UsernameAttributes": [
     "email"
    ],
    "VerificationMessageTemplate": {
     "DefaultEmailOption": "CONFIRM_WITH_CODE",
     "EmailMessage": "Thank you for signing up to GovBizAI! Your verification code is {####}",
     "EmailSubject": "Welcome to GovBizAI - Verify your email",
     "SmsMessage": "The verification code to your new account is {####}"
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "govbizaiuserpoolPostConfirmationCognito7983BE94": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "govbizaipostconfirmation6D22F3BD",
      "Arn"
     ]
    },
    "Principal": "cognito-idp.amazonaws.com",
    "SourceArn": {
     "Fn::GetAtt": [
      "govbizaiuserpool36C7E10A",
      "Arn"
     ]
    }
   }
  },
  "govbizaiuserpoolPreSignUpCognito4A16EB3C": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "govbizaipresignup74411E2A",
      "Arn"
     ]
    },
    "Principal": "cognito-idp.amazonaws.com",
    "SourceArn": {
     "Fn::GetAtt": [
      "govbizaiuserpool36C7E10A",
      "Arn"
     ]
    }
   }
  },
  "govbizaiuserpooldomainFCB1ACC2": {
   "Type": "AWS::Cognito::UserPoolDomain",
   "Properties": {
    "Domain": {
     "Fn::Join": [
      "",
      [
       "govbizai-",
       {
        "Ref": "AWS::AccountId"
       }
      ]
     ]
    },
    "UserPoolId": {
     "Ref": "govbizaiuserpool36C7E10A"
    }
   }
  },
  "govbizaiuserpoolclientBE0A385B": {
   "Type": "AWS::Cognito::UserPoolClient",
   "Properties": {
    "AccessTokenValidity": 60,
    "AllowedOAuthFlows": [
     "code"
    ],
    "AllowedOAuthFlowsUserPoolClient": true,
    "AllowedOAuthScopes": [
     "openid",
     "email",
     "profile"
    ],
    "CallbackURLs": [
     "http://localhost:3000/auth/callback",
     "https://app.govbizai.com/auth/callback"
    ],
    "ClientName": "govbizai-web-client",
    "ExplicitAuthFlows": [
     "ALLOW_USER_SRP_AUTH",
     "ALLOW_REFRESH_TOKEN_AUTH"
    ],
    "GenerateSecret": false,
    "IdTokenValidity": 60,
    "LogoutURLs": [
     "http://localhost:3000/auth/logout",
     "https://app.govbizai.com/auth/logout"
    ],
    "PreventUserExistenceErrors": "ENABLED",
    "ReadAttributes": [
     "custom:company_id",
     "custom:role",
     "custom:subscription_tier",
     "custom:tenant_id",
     "email",
     "family_name",
     "given_name",
     "phone_number"
    ],
    "RefreshTokenValidity": 43200,
    "SupportedIdentityProviders": [
     "COGNITO"
    ],
    "TokenValidityUnits": {
     "AccessToken": "minutes",
     "IdToken": "minutes",
     "RefreshToken": "minutes"
    },
    "UserPoolId": {
     "Ref": "govbizaiuserpool36C7E10A"
    },
    "WriteAttributes": [
     "custom:company_id",
     "custom:role",
     "custom:subscription_tier",
     "custom:tenant_id",
     "email",
     "family_name",
     "given_name",
     "phone_number"
    ]
   }
  },
  "govbizaiidentitypool": {
   "Type": "AWS::Cognito::IdentityPool",
   "Properties": {
    "AllowUnauthenticatedIdentities": false,
    "CognitoIdentityProviders": [
     {
      "ClientId": {
       "Ref": "govbizaiuserpoolclientBE0A385B"
      },
      "ProviderName": {
       "Fn::GetAtt": [
        "govbizaiuserpool36C7E10A",
        "ProviderName"
       ]
      },
      "ServerSideTokenCheck": true
     }
    ],
    "IdentityPoolName": "govbizai-identity-pool",
    "IdentityPoolTags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   }
  },
  "govbizaicognitoauthenticatedroleA265FB82": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRoleWithWebIdentity",
       "Condition": {
        "StringEquals": {
         "cognito-identity.amazonaws.com:aud": {
          "Ref": "govbizaiidentitypool"
         }
        },
        "ForAnyValue:StringLike": {
         "cognito-identity.amazonaws.com:amr": "authenticated"
        }
       },
       "Effect": "Allow",
       "Principal": {
        "Federated": "cognito-identity.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Policies": [
     {
      "PolicyDocument": {
       "Statement": [
        {
         "Action": [
          "cognito-identity:GetCredentialsForIdentity",
          "cognito-identity:GetId"
         ],
         "Effect": "Allow",
         "Resource": "*"
        },
        {
         "Action": [
          "s3:GetObject",
          "s3:PutObject",
          "s3:DeleteObject"
         ],
         "Condition": {
          "StringEquals": {
           "s3:x-amz-acl": "bucket-owner-full-control"
          }
         },
         "Effect": "Allow",
         "Resource": [
          {
           "Fn::Join": [
            "",
            [
             {
              "Fn::GetAtt": [
               "govbizairawdocumentsC6263907",
               "Arn"
              ]
             },
             "/${cognito-identity.amazonaws.com:sub}/*"
            ]
           ]
          },
          {
           "Fn::Join": [
            "",
            [
             {
              "Fn::GetAtt": [
               "govbizaiprocesseddocumentsEB84F3C4",
               "Arn"
              ]
             },
             "/${cognito-identity.amazonaws.com:sub}/*"
            ]
           ]
          }
         ]
        }
       ],
       "Version": "2012-10-17"
      },
      "PolicyName": "govbizai-authenticated-user-policy"
     }
    ],
    "RoleName": "govbizai-cognito-authenticated-role",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   }
  },
  "govbizaiidentitypoolroleattachment": {
   "Type": "AWS::Cognito::IdentityPoolRoleAttachment",
   "Properties": {
    "IdentityPoolId": {
     "Ref": "govbizaiidentitypool"
    },
    "Roles": {
     "authenticated": {
      "Fn::GetAtt": [
       "govbizaicognitoauthenticatedroleA265FB82",
       "Arn"
      ]
     }
    }
   }
  },
  "govbizaicommonlayer61433DB8": {
   "Type": "AWS::Lambda::LayerVersion",
   "Properties": {
    "CompatibleRuntimes": [
     "python3.11"
    ],
    "Content": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "8be1d5a6b71c3b436d4f7f75722f70a7b6873dc8d908dd295a5957db83842168.zip"
    },
    "Description": "Common dependencies for GovBizAI Lambda functions",
    "LayerName": "govbizai-common-layer"
   }
  },
  "govbizaicreatetenantServiceRole89C096AE": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaicreatetenantServiceRoleDefaultPolicy941F4329": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaitenantsA724F50D",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaitenantsA724F50D",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiuserprofiles6B97A1D0",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiuserprofiles6B97A1D0",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiauditlog8C2898B9",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiauditlog8C2898B9",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicompaniesEF47080E",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicompaniesEF47080E",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaicreatetenantServiceRoleDefaultPolicy941F4329",
    "Roles": [
     {
      "Ref": "govbizaicreatetenantServiceRole89C096AE"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaicreatetenantSecurityGroup2C9BFB05": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizaicreatetenant72454016",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaicreatetenantA6EE1C83": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "02c073041d3ab305187c5e988923fe6bb098ad8a9d980e246ebd4744a5b645b4.zip"
    },
    "Description": "Creates a new tenant with company profile",
    "Environment": {
     "Variables": {
      "TENANTS_TABLE_NAME": {
       "Ref": "govbizaitenantsA724F50D"
      },
      "USER_PROFILES_TABLE_NAME": {
       "Ref": "govbizaiuserprofiles6B97A1D0"
      },
      "AUDIT_LOG_TABLE_NAME": {
       "Ref": "govbizaiauditlog8C2898B9"
      },
      "COMPANIES_TABLE_NAME": {
       "Ref": "govbizaicompaniesEF47080E"
      }
     }
    },
    "FunctionName": "govbizai-create-tenant",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaicommonlayer61433DB8"
     }
    ],
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "govbizaicreatetenantServiceRole89C096AE",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 30,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizaicreatetenantSecurityGroup2C9BFB05",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizaicreatetenantServiceRoleDefaultPolicy941F4329",
    "govbizaicreatetenantServiceRole89C096AE",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiupdatetenantServiceRoleAE4C6735": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiupdatetenantServiceRoleDefaultPolicy36C88447": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaitenantsA724F50D",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaitenantsA724F50D",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiuserprofiles6B97A1D0",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiuserprofiles6B97A1D0",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiauditlog8C2898B9",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiauditlog8C2898B9",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicompaniesEF47080E",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicompaniesEF47080E",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaiupdatetenantServiceRoleDefaultPolicy36C88447",
    "Roles": [
     {
      "Ref": "govbizaiupdatetenantServiceRoleAE4C6735"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiupdatetenantSecurityGroup5863571B": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizaiupdatetenant98BABD01",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiupdatetenant4465400B": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "745fae6e15e135b0a5e85947c4dd12c7823f231d3dd2b1974c46dfe205ac4136.zip"
    },
    "Description": "Updates tenant information and settings",
    "Environment": {
     "Variables": {
      "TENANTS_TABLE_NAME": {
       "Ref": "govbizaitenantsA724F50D"
      },
      "USER_PROFILES_TABLE_NAME": {
       "Ref": "govbizaiuserprofiles6B97A1D0"
      },
      "AUDIT_LOG_TABLE_NAME": {
       "Ref": "govbizaiauditlog8C2898B9"
      },
      "COMPANIES_TABLE_NAME": {
       "Ref": "govbizaicompaniesEF47080E"
      }
     }
    },
    "FunctionName": "govbizai-update-tenant",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaicommonlayer61433DB8"
     }
    ],
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "govbizaiupdatetenantServiceRoleAE4C6735",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 30,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizaiupdatetenantSecurityGroup5863571B",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizaiupdatetenantServiceRoleDefaultPolicy36C88447",
    "govbizaiupdatetenantServiceRoleAE4C6735",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaideletetenantServiceRole900B08B2": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaideletetenantServiceRoleDefaultPolicy95751350": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaitenantsA724F50D",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaitenantsA724F50D",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiuserprofiles6B97A1D0",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiuserprofiles6B97A1D0",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiauditlog8C2898B9",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiauditlog8C2898B9",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicompaniesEF47080E",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicompaniesEF47080E",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaideletetenantServiceRoleDefaultPolicy95751350",
    "Roles": [
     {
      "Ref": "govbizaideletetenantServiceRole900B08B2"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaideletetenantSecurityGroupD58204EE": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizaideletetenant56ED0836",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaideletetenant7284722D": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "417a44f4fb1131b1da4a49b700c6f0789b8a704733d5804a31f3fe547b80190f.zip"
    },
    "Description": "Deletes tenant and all associated data",
    "Environment": {
     "Variables": {
      "TENANTS_TABLE_NAME": {
       "Ref": "govbizaitenantsA724F50D"
      },
      "USER_PROFILES_TABLE_NAME": {
       "Ref": "govbizaiuserprofiles6B97A1D0"
      },
      "AUDIT_LOG_TABLE_NAME": {
       "Ref": "govbizaiauditlog8C2898B9"
      },
      "COMPANIES_TABLE_NAME": {
       "Ref": "govbizaicompaniesEF47080E"
      }
     }
    },
    "FunctionName": "govbizai-delete-tenant",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaicommonlayer61433DB8"
     }
    ],
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "govbizaideletetenantServiceRole900B08B2",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 30,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizaideletetenantSecurityGroupD58204EE",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizaideletetenantServiceRoleDefaultPolicy95751350",
    "govbizaideletetenantServiceRole900B08B2",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaigettenantServiceRole8EDBD948": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaigettenantServiceRoleDefaultPolicy262EFEC1": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaitenantsA724F50D",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaitenantsA724F50D",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiuserprofiles6B97A1D0",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiuserprofiles6B97A1D0",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiauditlog8C2898B9",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiauditlog8C2898B9",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicompaniesEF47080E",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicompaniesEF47080E",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaigettenantServiceRoleDefaultPolicy262EFEC1",
    "Roles": [
     {
      "Ref": "govbizaigettenantServiceRole8EDBD948"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaigettenantSecurityGroup434E3E6C": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizaigettenant45BAB1FB",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaigettenant1C7B9A38": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "03a17d049894b25799d127dcc153ffc4b3200ef4e0ebe405609993a854c7a3ad.zip"
    },
    "Description": "Retrieves tenant details and configuration",
    "Environment": {
     "Variables": {
      "TENANTS_TABLE_NAME": {
       "Ref": "govbizaitenantsA724F50D"
      },
      "USER_PROFILES_TABLE_NAME": {
       "Ref": "govbizaiuserprofiles6B97A1D0"
      },
      "AUDIT_LOG_TABLE_NAME": {
       "Ref": "govbizaiauditlog8C2898B9"
      },
      "COMPANIES_TABLE_NAME": {
       "Ref": "govbizaicompaniesEF47080E"
      }
     }
    },
    "FunctionName": "govbizai-get-tenant",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaicommonlayer61433DB8"
     }
    ],
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "govbizaigettenantServiceRole8EDBD948",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 30,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizaigettenantSecurityGroup434E3E6C",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizaigettenantServiceRoleDefaultPolicy262EFEC1",
    "govbizaigettenantServiceRole8EDBD948",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaipostconfirmationServiceRoleA69B8E0C": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   }
  },
  "govbizaipostconfirmationServiceRoleDefaultPolicyE2365E57": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaitenantsA724F50D",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaitenantsA724F50D",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiuserprofiles6B97A1D0",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiuserprofiles6B97A1D0",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiauditlog8C2898B9",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiauditlog8C2898B9",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaipostconfirmationServiceRoleDefaultPolicyE2365E57",
    "Roles": [
     {
      "Ref": "govbizaipostconfirmationServiceRoleA69B8E0C"
     }
    ]
   }
  },
  "govbizaipostconfirmation6D22F3BD": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "70596166cac956fbb58885bf5c00261a8009f739fb5192593679ea2cf8466c5f.zip"
    },
    "Description": "Post-confirmation trigger for user registration",
    "Environment": {
     "Variables": {
      "TENANTS_TABLE_NAME": {
       "Ref": "govbizaitenantsA724F50D"
      },
      "USER_PROFILES_TABLE_NAME": {
       "Ref": "govbizaiuserprofiles6B97A1D0"
      },
      "AUDIT_LOG_TABLE_NAME": {
       "Ref": "govbizaiauditlog8C2898B9"
      },
      "COMPANIES_TABLE_NAME": {
       "Ref": "govbizaicompaniesEF47080E"
      }
     }
    },
    "FunctionName": "govbizai-post-confirmation",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaicommonlayer61433DB8"
     }
    ],
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "govbizaipostconfirmationServiceRoleA69B8E0C",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 30
   },
   "DependsOn": [
    "govbizaipostconfirmationServiceRoleDefaultPolicyE2365E57",
    "govbizaipostconfirmationServiceRoleA69B8E0C"
   ]
  },
  "govbizaipresignupServiceRole24DFC433": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   }
  },
  "govbizaipresignupServiceRoleDefaultPolicyEB4ABD44": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaitenantsA724F50D",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaitenantsA724F50D",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiuserprofiles6B97A1D0",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiuserprofiles6B97A1D0",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiauditlog8C2898B9",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiauditlog8C2898B9",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaipresignupServiceRoleDefaultPolicyEB4ABD44",
    "Roles": [
     {
      "Ref": "govbizaipresignupServiceRole24DFC433"
     }
    ]
   }
  },
  "govbizaipresignup74411E2A": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "70c9ecae409b42aa6d645277a4d40c155b20fd2d1d1bb8f3bf3476f32f672155.zip"
    },
    "Description": "Pre-sign-up trigger for user validation",
    "Environment": {
     "Variables": {
      "TENANTS_TABLE_NAME": {
       "Ref": "govbizaitenantsA724F50D"
      },
      "USER_PROFILES_TABLE_NAME": {
       "Ref": "govbizaiuserprofiles6B97A1D0"
      },
      "AUDIT_LOG_TABLE_NAME": {
       "Ref": "govbizaiauditlog8C2898B9"
      },
      "COMPANIES_TABLE_NAME": {
       "Ref": "govbizaicompaniesEF47080E"
      }
     }
    },
    "FunctionName": "govbizai-pre-sign-up",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaicommonlayer61433DB8"
     }
    ],
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "govbizaipresignupServiceRole24DFC433",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 30
   },
   "DependsOn": [
    "govbizaipresignupServiceRoleDefaultPolicyEB4ABD44",
    "govbizaipresignupServiceRole24DFC433"
   ]
  },
  "govbizaidocumentprocessinglayer39856FE2": {
   "Type": "AWS::Lambda::LayerVersion",
   "Properties": {
    "CompatibleRuntimes": [
     "python3.11"
    ],
    "Content": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "01516f5a047839893043fb7b31d669081901a0f38e06d3319147ac3d1985f90b.zip"
    },
    "Description": "Document processing dependencies including PyMuPDF, python-docx, openpyxl, etc.",
    "LayerName": "govbizai-document-processing-layer"
   }
  },
  "govbizaitextextractionServiceRole95CCE328": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaitextextractionServiceRoleDefaultPolicyCC07BCE9": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizairawdocumentsC6263907",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizairawdocumentsC6263907",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiprocesseddocumentsEB84F3C4",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiprocesseddocumentsEB84F3C4",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaitempprocessing8660E60C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaitempprocessing8660E60C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicompaniesEF47080E",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicompaniesEF47080E",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "textract:StartDocumentTextDetection",
        "textract:GetDocumentTextDetection",
        "textract:StartDocumentAnalysis",
        "textract:GetDocumentAnalysis",
        "textract:DetectDocumentText",
        "textract:AnalyzeDocument"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaitextextractionServiceRoleDefaultPolicyCC07BCE9",
    "Roles": [
     {
      "Ref": "govbizaitextextractionServiceRole95CCE328"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaitextextractionSecurityGroup512FB609": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizaitextextraction62A54F3E",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaitextextraction0C176196": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "7928248872ab51b72dcb9e77bbedaf02ea7302408520a5d7bb5e40afa80c80f4.zip"
    },
    "Description": "Extract text from PDF documents using PyMuPDF with Textract fallback",
    "Environment": {
     "Variables": {
      "RAW_DOCUMENTS_BUCKET": {
       "Ref": "govbizairawdocumentsC6263907"
      },
      "PROCESSED_DOCUMENTS_BUCKET": {
       "Ref": "govbizaiprocesseddocumentsEB84F3C4"
      },
      "TEMP_PROCESSING_BUCKET": {
       "Ref": "govbizaitempprocessing8660E60C"
      },
      "COMPANIES_TABLE": {
       "Ref": "govbizaicompaniesEF47080E"
      },
      "TEXTRACT_ROLE_ARN": {
       "Fn::Join": [
        "",
        [
         "arn:aws:iam::",
         {
          "Ref": "AWS::AccountId"
         },
         ":role/govbizai-lambda-execution-role"
        ]
       ]
      }
     }
    },
    "FunctionName": "govbizai-text-extraction",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaidocumentprocessinglayer39856FE2"
     }
    ],
    "MemorySize": 1024,
    "Role": {
     "Fn::GetAtt": [
      "govbizaitextextractionServiceRole95CCE328",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 900,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizaitextextractionSecurityGroup512FB609",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizaitextextractionServiceRoleDefaultPolicyCC07BCE9",
    "govbizaitextextractionServiceRole95CCE328",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaitextractprocessorServiceRole3ADF62DB": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaitextractprocessorServiceRoleDefaultPolicy93382A5B": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizairawdocumentsC6263907",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizairawdocumentsC6263907",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiprocesseddocumentsEB84F3C4",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiprocesseddocumentsEB84F3C4",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaitempprocessing8660E60C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaitempprocessing8660E60C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicompaniesEF47080E",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicompaniesEF47080E",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "textract:StartDocumentTextDetection",
        "textract:GetDocumentTextDetection",
        "textract:StartDocumentAnalysis",
        "textract:GetDocumentAnalysis",
        "textract:DetectDocumentText",
        "textract:AnalyzeDocument"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaitextractprocessorServiceRoleDefaultPolicy93382A5B",
    "Roles": [
     {
      "Ref": "govbizaitextractprocessorServiceRole3ADF62DB"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaitextractprocessorSecurityGroup1F0662ED": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizaitextractprocessor752A3E15",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaitextractprocessor559DCF0C": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "569676427f6fe7f20e0d0876b084bb9cfdba24f3ca820caa7f5f71fc1b075a26.zip"
    },
    "Description": "Process documents using Amazon Textract for scanned/image PDFs",
    "Environment": {
     "Variables": {
      "RAW_DOCUMENTS_BUCKET": {
       "Ref": "govbizairawdocumentsC6263907"
      },
      "PROCESSED_DOCUMENTS_BUCKET": {
       "Ref": "govbizaiprocesseddocumentsEB84F3C4"
      },
      "TEMP_PROCESSING_BUCKET": {
       "Ref": "govbizaitempprocessing8660E60C"
      },
      "COMPANIES_TABLE": {
       "Ref": "govbizaicompaniesEF47080E"
      },
      "TEXTRACT_ROLE_ARN": {
       "Fn::Join": [
        "",
        [
         "arn:aws:iam::",
         {
          "Ref": "AWS::AccountId"
         },
         ":role/govbizai-lambda-execution-role"
        ]
       ]
      }
     }
    },
    "FunctionName": "govbizai-textract-processor",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaidocumentprocessinglayer39856FE2"
     }
    ],
    "MemorySize": 1024,
    "Role": {
     "Fn::GetAtt": [
      "govbizaitextractprocessorServiceRole3ADF62DB",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 900,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizaitextractprocessorSecurityGroup1F0662ED",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizaitextractprocessorServiceRoleDefaultPolicy93382A5B",
    "govbizaitextractprocessorServiceRole3ADF62DB",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaitextcleanerServiceRole19E2542A": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaitextcleanerServiceRoleDefaultPolicy3F964225": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizairawdocumentsC6263907",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizairawdocumentsC6263907",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiprocesseddocumentsEB84F3C4",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiprocesseddocumentsEB84F3C4",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaitempprocessing8660E60C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaitempprocessing8660E60C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicompaniesEF47080E",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicompaniesEF47080E",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "textract:StartDocumentTextDetection",
        "textract:GetDocumentTextDetection",
        "textract:StartDocumentAnalysis",
        "textract:GetDocumentAnalysis",
        "textract:DetectDocumentText",
        "textract:AnalyzeDocument"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaitextcleanerServiceRoleDefaultPolicy3F964225",
    "Roles": [
     {
      "Ref": "govbizaitextcleanerServiceRole19E2542A"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaitextcleanerSecurityGroup0CA116EB": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizaitextcleaner4BE2DA8D",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaitextcleaner06583528": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "96fc9058df5a2359166f96599be6da6b9564d0b015c6cf6d971f96dabd9cfb6a.zip"
    },
    "Description": "Clean and normalize extracted text from documents",
    "Environment": {
     "Variables": {
      "RAW_DOCUMENTS_BUCKET": {
       "Ref": "govbizairawdocumentsC6263907"
      },
      "PROCESSED_DOCUMENTS_BUCKET": {
       "Ref": "govbizaiprocesseddocumentsEB84F3C4"
      },
      "TEMP_PROCESSING_BUCKET": {
       "Ref": "govbizaitempprocessing8660E60C"
      },
      "COMPANIES_TABLE": {
       "Ref": "govbizaicompaniesEF47080E"
      },
      "TEXTRACT_ROLE_ARN": {
       "Fn::Join": [
        "",
        [
         "arn:aws:iam::",
         {
          "Ref": "AWS::AccountId"
         },
         ":role/govbizai-lambda-execution-role"
        ]
       ]
      }
     }
    },
    "FunctionName": "govbizai-text-cleaner",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaidocumentprocessinglayer39856FE2"
     }
    ],
    "MemorySize": 512,
    "Role": {
     "Fn::GetAtt": [
      "govbizaitextcleanerServiceRole19E2542A",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 600,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizaitextcleanerSecurityGroup0CA116EB",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizaitextcleanerServiceRoleDefaultPolicy3F964225",
    "govbizaitextcleanerServiceRole19E2542A",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaidocumentchunkerServiceRole174290E2": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaidocumentchunkerServiceRoleDefaultPolicy6C76B6BE": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizairawdocumentsC6263907",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizairawdocumentsC6263907",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiprocesseddocumentsEB84F3C4",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiprocesseddocumentsEB84F3C4",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaitempprocessing8660E60C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaitempprocessing8660E60C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicompaniesEF47080E",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicompaniesEF47080E",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "textract:StartDocumentTextDetection",
        "textract:GetDocumentTextDetection",
        "textract:StartDocumentAnalysis",
        "textract:GetDocumentAnalysis",
        "textract:DetectDocumentText",
        "textract:AnalyzeDocument"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaidocumentchunkerServiceRoleDefaultPolicy6C76B6BE",
    "Roles": [
     {
      "Ref": "govbizaidocumentchunkerServiceRole174290E2"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaidocumentchunkerSecurityGroup66161514": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizaidocumentchunkerB9FA8C82",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaidocumentchunker87A36F3D": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "4c87e475434595f4f689cb44c2632424ee0a13148c0ac703fce468b911f96e66.zip"
    },
    "Description": "Chunk documents into manageable segments for embedding generation",
    "Environment": {
     "Variables": {
      "RAW_DOCUMENTS_BUCKET": {
       "Ref": "govbizairawdocumentsC6263907"
      },
      "PROCESSED_DOCUMENTS_BUCKET": {
       "Ref": "govbizaiprocesseddocumentsEB84F3C4"
      },
      "TEMP_PROCESSING_BUCKET": {
       "Ref": "govbizaitempprocessing8660E60C"
      },
      "COMPANIES_TABLE": {
       "Ref": "govbizaicompaniesEF47080E"
      },
      "TEXTRACT_ROLE_ARN": {
       "Fn::Join": [
        "",
        [
         "arn:aws:iam::",
         {
          "Ref": "AWS::AccountId"
         },
         ":role/govbizai-lambda-execution-role"
        ]
       ]
      }
     }
    },
    "FunctionName": "govbizai-document-chunker",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaidocumentprocessinglayer39856FE2"
     }
    ],
    "MemorySize": 512,
    "Role": {
     "Fn::GetAtt": [
      "govbizaidocumentchunkerServiceRole174290E2",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 600,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizaidocumentchunkerSecurityGroup66161514",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizaidocumentchunkerServiceRoleDefaultPolicy6C76B6BE",
    "govbizaidocumentchunkerServiceRole174290E2",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaifilehandlersServiceRole843FA6B5": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaifilehandlersServiceRoleDefaultPolicy395A56C4": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizairawdocumentsC6263907",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizairawdocumentsC6263907",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiprocesseddocumentsEB84F3C4",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiprocesseddocumentsEB84F3C4",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaitempprocessing8660E60C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaitempprocessing8660E60C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicompaniesEF47080E",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicompaniesEF47080E",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "textract:StartDocumentTextDetection",
        "textract:GetDocumentTextDetection",
        "textract:StartDocumentAnalysis",
        "textract:GetDocumentAnalysis",
        "textract:DetectDocumentText",
        "textract:AnalyzeDocument"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaitextextraction0C176196",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaitextextraction0C176196",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaifilehandlersServiceRoleDefaultPolicy395A56C4",
    "Roles": [
     {
      "Ref": "govbizaifilehandlersServiceRole843FA6B5"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaifilehandlersSecurityGroupBA0EAC12": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizaifilehandlers082FA95F",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaifilehandlers2E6047C4": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "82f7ef976309ce46d17e42f48e819a61b7cd41773dcea77f25238d09bc490ca0.zip"
    },
    "Description": "Handle text extraction from various file formats (Word, Excel, Text, HTML)",
    "Environment": {
     "Variables": {
      "RAW_DOCUMENTS_BUCKET": {
       "Ref": "govbizairawdocumentsC6263907"
      },
      "PROCESSED_DOCUMENTS_BUCKET": {
       "Ref": "govbizaiprocesseddocumentsEB84F3C4"
      },
      "TEMP_PROCESSING_BUCKET": {
       "Ref": "govbizaitempprocessing8660E60C"
      },
      "COMPANIES_TABLE": {
       "Ref": "govbizaicompaniesEF47080E"
      },
      "TEXTRACT_ROLE_ARN": {
       "Fn::Join": [
        "",
        [
         "arn:aws:iam::",
         {
          "Ref": "AWS::AccountId"
         },
         ":role/govbizai-lambda-execution-role"
        ]
       ]
      },
      "TEXT_EXTRACTION_FUNCTION": {
       "Ref": "govbizaitextextraction0C176196"
      }
     }
    },
    "FunctionName": "govbizai-file-handlers",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaidocumentprocessinglayer39856FE2"
     }
    ],
    "MemorySize": 1024,
    "Role": {
     "Fn::GetAtt": [
      "govbizaifilehandlersServiceRole843FA6B5",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 900,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizaifilehandlersSecurityGroupBA0EAC12",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizaifilehandlersServiceRoleDefaultPolicy395A56C4",
    "govbizaifilehandlersServiceRole843FA6B5",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiunifiedprocessorServiceRoleE5FEDC2C": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiunifiedprocessorServiceRoleDefaultPolicyE6AD7EF8": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizairawdocumentsC6263907",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizairawdocumentsC6263907",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiprocesseddocumentsEB84F3C4",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiprocesseddocumentsEB84F3C4",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaitempprocessing8660E60C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaitempprocessing8660E60C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicompaniesEF47080E",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicompaniesEF47080E",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "textract:StartDocumentTextDetection",
        "textract:GetDocumentTextDetection",
        "textract:StartDocumentAnalysis",
        "textract:GetDocumentAnalysis",
        "textract:DetectDocumentText",
        "textract:AnalyzeDocument"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaitextextraction0C176196",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaitextextraction0C176196",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaitextractprocessor559DCF0C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaitextractprocessor559DCF0C",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaitextcleaner06583528",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaitextcleaner06583528",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaidocumentchunker87A36F3D",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaidocumentchunker87A36F3D",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaifilehandlers2E6047C4",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaifilehandlers2E6047C4",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaiunifiedprocessorServiceRoleDefaultPolicyE6AD7EF8",
    "Roles": [
     {
      "Ref": "govbizaiunifiedprocessorServiceRoleE5FEDC2C"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiunifiedprocessorSecurityGroup3F18A05A": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizaiunifiedprocessorA4E502ED",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiunifiedprocessor2109B988": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "3eba21f4c78e979ff3017ac8abcbfeb7ca463dde42991de15e7a9cab870b6c96.zip"
    },
    "Description": "Unified interface for orchestrating the complete document processing pipeline",
    "Environment": {
     "Variables": {
      "RAW_DOCUMENTS_BUCKET": {
       "Ref": "govbizairawdocumentsC6263907"
      },
      "PROCESSED_DOCUMENTS_BUCKET": {
       "Ref": "govbizaiprocesseddocumentsEB84F3C4"
      },
      "TEMP_PROCESSING_BUCKET": {
       "Ref": "govbizaitempprocessing8660E60C"
      },
      "COMPANIES_TABLE": {
       "Ref": "govbizaicompaniesEF47080E"
      },
      "TEXTRACT_ROLE_ARN": {
       "Fn::Join": [
        "",
        [
         "arn:aws:iam::",
         {
          "Ref": "AWS::AccountId"
         },
         ":role/govbizai-lambda-execution-role"
        ]
       ]
      },
      "FILE_HANDLERS_FUNCTION": {
       "Ref": "govbizaifilehandlers2E6047C4"
      },
      "TEXT_EXTRACTION_FUNCTION": {
       "Ref": "govbizaitextextraction0C176196"
      },
      "TEXTRACT_PROCESSOR_FUNCTION": {
       "Ref": "govbizaitextractprocessor559DCF0C"
      },
      "TEXT_CLEANER_FUNCTION": {
       "Ref": "govbizaitextcleaner06583528"
      },
      "DOCUMENT_CHUNKER_FUNCTION": {
       "Ref": "govbizaidocumentchunker87A36F3D"
      }
     }
    },
    "FunctionName": "govbizai-unified-processor",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaidocumentprocessinglayer39856FE2"
     }
    ],
    "MemorySize": 1024,
    "Role": {
     "Fn::GetAtt": [
      "govbizaiunifiedprocessorServiceRoleE5FEDC2C",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 300,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizaiunifiedprocessorSecurityGroup3F18A05A",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizaiunifiedprocessorServiceRoleDefaultPolicyE6AD7EF8",
    "govbizaiunifiedprocessorServiceRoleE5FEDC2C",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizailambdaexecutionrole23B5D5E8": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Policies": [
     {
      "PolicyDocument": {
       "Statement": [
        {
         "Action": [
          "s3:GetObject",
          "s3:PutObject",
          "s3:DeleteObject",
          "s3:ListBucket"
         ],
         "Effect": "Allow",
         "Resource": [
          {
           "Fn::GetAtt": [
            "govbizairawdocumentsC6263907",
            "Arn"
           ]
          },
          {
           "Fn::Join": [
            "",
            [
             {
              "Fn::GetAtt": [
               "govbizairawdocumentsC6263907",
               "Arn"
              ]
             },
             "/*"
            ]
           ]
          },
          {
           "Fn::GetAtt": [
            "govbizaiprocesseddocumentsEB84F3C4",
            "Arn"
           ]
          },
          {
           "Fn::Join": [
            "",
            [
             {
              "Fn::GetAtt": [
               "govbizaiprocesseddocumentsEB84F3C4",
               "Arn"
              ]
             },
             "/*"
            ]
           ]
          },
          {
           "Fn::GetAtt": [
            "govbizaiembeddings9C1E2D0C",
            "Arn"
           ]
          },
          {
           "Fn::Join": [
            "",
            [
             {
              "Fn::GetAtt": [
               "govbizaiembeddings9C1E2D0C",
               "Arn"
              ]
             },
             "/*"
            ]
           ]
          },
          {
           "Fn::GetAtt": [
            "govbizaitempprocessing8660E60C",
            "Arn"
           ]
          },
          {
           "Fn::Join": [
            "",
            [
             {
              "Fn::GetAtt": [
               "govbizaitempprocessing8660E60C",
               "Arn"
              ]
             },
             "/*"
            ]
           ]
          }
         ]
        },
        {
         "Action": [
          "dynamodb:GetItem",
          "dynamodb:PutItem",
          "dynamodb:UpdateItem",
          "dynamodb:DeleteItem",
          "dynamodb:Query",
          "dynamodb:Scan",
          "dynamodb:BatchGetItem",
          "dynamodb:BatchWriteItem"
         ],
         "Effect": "Allow",
         "Resource": [
          {
           "Fn::GetAtt": [
            "govbizaiopportunities87C89AB3",
            "Arn"
           ]
          },
          {
           "Fn::Join": [
            "",
            [
             {
              "Fn::GetAtt": [
               "govbizaiopportunities87C89AB3",
               "Arn"
              ]
             },
             "/index/*"
            ]
           ]
          },
          {
           "Fn::GetAtt": [
            "govbizaicompaniesEF47080E",
            "Arn"
           ]
          },
          {
           "Fn::Join": [
            "",
            [
             {
              "Fn::GetAtt": [
               "govbizaicompaniesEF47080E",
               "Arn"
              ]
             },
             "/index/*"
            ]
           ]
          },
          {
           "Fn::GetAtt": [
            "govbizaimatches22EB0E45",
            "Arn"
           ]
          },
          {
           "Fn::Join": [
            "",
            [
             {
              "Fn::GetAtt": [
               "govbizaimatches22EB0E45",
               "Arn"
              ]
             },
             "/index/*"
            ]
           ]
          },
          {
           "Fn::GetAtt": [
            "govbizaiuserprofiles6B97A1D0",
            "Arn"
           ]
          },
          {
           "Fn::Join": [
            "",
            [
             {
              "Fn::GetAtt": [
               "govbizaiuserprofiles6B97A1D0",
               "Arn"
              ]
             },
             "/index/*"
            ]
           ]
          },
          {
           "Fn::GetAtt": [
            "govbizaiauditlog8C2898B9",
            "Arn"
           ]
          },
          {
           "Fn::Join": [
            "",
            [
             {
              "Fn::GetAtt": [
               "govbizaiauditlog8C2898B9",
               "Arn"
              ]
             },
             "/index/*"
            ]
           ]
          },
          {
           "Fn::GetAtt": [
            "govbizaifeedbackA5E7768E",
            "Arn"
           ]
          },
          {
           "Fn::Join": [
            "",
            [
             {
              "Fn::GetAtt": [
               "govbizaifeedbackA5E7768E",
               "Arn"
              ]
             },
             "/index/*"
            ]
           ]
          },
          {
           "Fn::GetAtt": [
            "govbizaitenantsA724F50D",
            "Arn"
           ]
          },
          {
           "Fn::Join": [
            "",
            [
             {
              "Fn::GetAtt": [
               "govbizaitenantsA724F50D",
               "Arn"
              ]
             },
             "/index/*"
            ]
           ]
          }
         ]
        },
        {
         "Action": [
          "bedrock:InvokeModel",
          "bedrock:InvokeModelWithResponseStream"
         ],
         "Effect": "Allow",
         "Resource": {
          "Fn::Join": [
           "",
           [
            "arn:aws:bedrock:",
            {
             "Ref": "AWS::Region"
            },
            "::foundation-model/amazon.titan-embed-text-v2:0"
           ]
          ]
         }
        },
        {
         "Action": [
          "textract:StartDocumentTextDetection",
          "textract:GetDocumentTextDetection",
          "textract:StartDocumentAnalysis",
          "textract:GetDocumentAnalysis"
         ],
         "Effect": "Allow",
         "Resource": "*"
        },
        {
         "Action": [
          "cognito-idp:AdminGetUser",
          "cognito-idp:AdminUpdateUserAttributes",
          "cognito-idp:AdminSetUserPassword",
          "cognito-idp:AdminCreateUser",
          "cognito-idp:AdminDeleteUser",
          "cognito-idp:ListUsers"
         ],
         "Effect": "Allow",
         "Resource": {
          "Fn::GetAtt": [
           "govbizaiuserpool36C7E10A",
           "Arn"
          ]
         }
        }
       ],
       "Version": "2012-10-17"
      },
      "PolicyName": "govbizai-lambda-policy"
     }
    ],
    "RoleName": "govbizai-lambda-execution-role",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   }
  },
  "govbizaistepfunctionsrole7E7C04ED": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "states.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Policies": [
     {
      "PolicyDocument": {
       "Statement": [
        {
         "Action": "lambda:InvokeFunction",
         "Effect": "Allow",
         "Resource": {
          "Fn::Join": [
           "",
           [
            "arn:aws:lambda:",
            {
             "Ref": "AWS::Region"
            },
            ":",
            {
             "Ref": "AWS::AccountId"
            },
            ":function:govbizai-*"
           ]
          ]
         }
        },
        {
         "Action": [
          "logs:CreateLogGroup",
          "logs:CreateLogStream",
          "logs:PutLogEvents"
         ],
         "Effect": "Allow",
         "Resource": {
          "Fn::Join": [
           "",
           [
            "arn:aws:logs:",
            {
             "Ref": "AWS::Region"
            },
            ":",
            {
             "Ref": "AWS::AccountId"
            },
            ":*"
           ]
          ]
         }
        }
       ],
       "Version": "2012-10-17"
      },
      "PolicyName": "govbizai-step-functions-policy"
     }
    ],
    "RoleName": "govbizai-step-functions-role",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   }
  },
  "govbizaieventbridgerole2252CEC9": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "events.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Policies": [
     {
      "PolicyDocument": {
       "Statement": [
        {
         "Action": "states:StartExecution",
         "Effect": "Allow",
         "Resource": {
          "Fn::Join": [
           "",
           [
            "arn:aws:states:",
            {
             "Ref": "AWS::Region"
            },
            ":",
            {
             "Ref": "AWS::AccountId"
            },
            ":stateMachine:govbizai-*"
           ]
          ]
         }
        }
       ],
       "Version": "2012-10-17"
      },
      "PolicyName": "govbizai-eventbridge-policy"
     }
    ],
    "RoleName": "govbizai-eventbridge-role",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   }
  },
  "govbizaisamgovlayerE234361B": {
   "Type": "AWS::Lambda::LayerVersion",
   "Properties": {
    "CompatibleRuntimes": [
     "python3.11"
    ],
    "Content": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "b9b0c6a90dadd5da19735dbf70f215d87dbdc1e468f4d87ec89fb51e9b18f3a5.zip"
    },
    "Description": "SAM.gov integration dependencies including requests, pandas, boto3, etc.",
    "LayerName": "govbizai-samgov-layer"
   }
  },
  "govbizaiopportunityprocessingdlqBC2F7D9A": {
   "Type": "AWS::SQS::Queue",
   "Properties": {
    "QueueName": "govbizai-opportunity-processing-dlq",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "govbizaiopportunityprocessingqueueA25C3C4F": {
   "Type": "AWS::SQS::Queue",
   "Properties": {
    "MessageRetentionPeriod": 1209600,
    "QueueName": "govbizai-opportunity-processing-queue",
    "RedrivePolicy": {
     "deadLetterTargetArn": {
      "Fn::GetAtt": [
       "govbizaiopportunityprocessingdlqBC2F7D9A",
       "Arn"
      ]
     },
     "maxReceiveCount": 3
    },
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VisibilityTimeout": 900
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "govbizaicsvprocessorServiceRole0F060C40": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaicsvprocessorServiceRoleDefaultPolicyC5D6B8C7": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizairawdocumentsC6263907",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizairawdocumentsC6263907",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiprocesseddocumentsEB84F3C4",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiprocesseddocumentsEB84F3C4",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaitempprocessing8660E60C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaitempprocessing8660E60C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiembeddings9C1E2D0C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiembeddings9C1E2D0C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiopportunities87C89AB3",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiopportunities87C89AB3",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "sqs:SendMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiopportunityprocessingqueueA25C3C4F",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "sqs:ReceiveMessage",
        "sqs:ChangeMessageVisibility",
        "sqs:GetQueueUrl",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiopportunityprocessingqueueA25C3C4F",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "bedrock:InvokeModel",
        "bedrock:InvokeModelWithResponseStream"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:aws:bedrock:",
          {
           "Ref": "AWS::Region"
          },
          "::foundation-model/amazon.titan-embed-text-v2:0"
         ]
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaicsvprocessorServiceRoleDefaultPolicyC5D6B8C7",
    "Roles": [
     {
      "Ref": "govbizaicsvprocessorServiceRole0F060C40"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaicsvprocessorSecurityGroupC80D8CFF": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizaicsvprocessor4B677A63",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaicsvprocessorE4C498A4": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "6ef1510b6a8db900457862f0132012f093ce5dda9cd447e479d604fa17d17e13.zip"
    },
    "Description": "Download and process SAM.gov CSV files with filtering",
    "Environment": {
     "Variables": {
      "RAW_DOCUMENTS_BUCKET": {
       "Ref": "govbizairawdocumentsC6263907"
      },
      "PROCESSED_DOCUMENTS_BUCKET": {
       "Ref": "govbizaiprocesseddocumentsEB84F3C4"
      },
      "TEMP_PROCESSING_BUCKET": {
       "Ref": "govbizaitempprocessing8660E60C"
      },
      "EMBEDDINGS_BUCKET": {
       "Ref": "govbizaiembeddings9C1E2D0C"
      },
      "OPPORTUNITIES_TABLE": {
       "Ref": "govbizaiopportunities87C89AB3"
      },
      "PROCESSING_QUEUE_URL": {
       "Ref": "govbizaiopportunityprocessingqueueA25C3C4F"
      }
     }
    },
    "FunctionName": "govbizai-csv-processor",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaisamgovlayerE234361B"
     }
    ],
    "MemorySize": 1024,
    "Role": {
     "Fn::GetAtt": [
      "govbizaicsvprocessorServiceRole0F060C40",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 900,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizaicsvprocessorSecurityGroupC80D8CFF",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizaicsvprocessorServiceRoleDefaultPolicyC5D6B8C7",
    "govbizaicsvprocessorServiceRole0F060C40",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaisamgovapiclientServiceRole61DC75B8": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaisamgovapiclientServiceRoleDefaultPolicy89838494": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizairawdocumentsC6263907",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizairawdocumentsC6263907",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiprocesseddocumentsEB84F3C4",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiprocesseddocumentsEB84F3C4",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaitempprocessing8660E60C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaitempprocessing8660E60C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiembeddings9C1E2D0C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiembeddings9C1E2D0C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiopportunities87C89AB3",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiopportunities87C89AB3",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "sqs:SendMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiopportunityprocessingqueueA25C3C4F",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "sqs:ReceiveMessage",
        "sqs:ChangeMessageVisibility",
        "sqs:GetQueueUrl",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiopportunityprocessingqueueA25C3C4F",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "bedrock:InvokeModel",
        "bedrock:InvokeModelWithResponseStream"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:aws:bedrock:",
          {
           "Ref": "AWS::Region"
          },
          "::foundation-model/amazon.titan-embed-text-v2:0"
         ]
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaisamgovapiclientServiceRoleDefaultPolicy89838494",
    "Roles": [
     {
      "Ref": "govbizaisamgovapiclientServiceRole61DC75B8"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaisamgovapiclientSecurityGroupD94BA827": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizaisamgovapiclient2E08D267",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaisamgovapiclientD137678A": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "2a96d85c0416ddcb02d7ce1fa12f522853a28767d5561d4138a58cc05a708691.zip"
    },
    "Description": "SAM.gov API client with retry logic and rate limiting",
    "Environment": {
     "Variables": {
      "RAW_DOCUMENTS_BUCKET": {
       "Ref": "govbizairawdocumentsC6263907"
      },
      "PROCESSED_DOCUMENTS_BUCKET": {
       "Ref": "govbizaiprocesseddocumentsEB84F3C4"
      },
      "TEMP_PROCESSING_BUCKET": {
       "Ref": "govbizaitempprocessing8660E60C"
      },
      "EMBEDDINGS_BUCKET": {
       "Ref": "govbizaiembeddings9C1E2D0C"
      },
      "OPPORTUNITIES_TABLE": {
       "Ref": "govbizaiopportunities87C89AB3"
      },
      "PROCESSING_QUEUE_URL": {
       "Ref": "govbizaiopportunityprocessingqueueA25C3C4F"
      }
     }
    },
    "FunctionName": "govbizai-samgov-api-client",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaisamgovlayerE234361B"
     }
    ],
    "MemorySize": 1024,
    "Role": {
     "Fn::GetAtt": [
      "govbizaisamgovapiclientServiceRole61DC75B8",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 900,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizaisamgovapiclientSecurityGroupD94BA827",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizaisamgovapiclientServiceRoleDefaultPolicy89838494",
    "govbizaisamgovapiclientServiceRole61DC75B8",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiattachmentdownloaderServiceRole5D4ACF64": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiattachmentdownloaderServiceRoleDefaultPolicyF7A4D9F4": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizairawdocumentsC6263907",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizairawdocumentsC6263907",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiprocesseddocumentsEB84F3C4",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiprocesseddocumentsEB84F3C4",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaitempprocessing8660E60C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaitempprocessing8660E60C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiembeddings9C1E2D0C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiembeddings9C1E2D0C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiopportunities87C89AB3",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiopportunities87C89AB3",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "sqs:SendMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiopportunityprocessingqueueA25C3C4F",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "sqs:ReceiveMessage",
        "sqs:ChangeMessageVisibility",
        "sqs:GetQueueUrl",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiopportunityprocessingqueueA25C3C4F",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "bedrock:InvokeModel",
        "bedrock:InvokeModelWithResponseStream"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:aws:bedrock:",
          {
           "Ref": "AWS::Region"
          },
          "::foundation-model/amazon.titan-embed-text-v2:0"
         ]
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaiattachmentdownloaderServiceRoleDefaultPolicyF7A4D9F4",
    "Roles": [
     {
      "Ref": "govbizaiattachmentdownloaderServiceRole5D4ACF64"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiattachmentdownloaderSecurityGroup5D490164": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizaiattachmentdownloader3296DFB4",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiattachmentdownloaderCB0D7297": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "5e0e7c533023a179f7e911b92390424ded42b3c90c125ccea7c7b027a9ffeb2d.zip"
    },
    "Description": "Download and store opportunity attachments from SAM.gov",
    "Environment": {
     "Variables": {
      "RAW_DOCUMENTS_BUCKET": {
       "Ref": "govbizairawdocumentsC6263907"
      },
      "PROCESSED_DOCUMENTS_BUCKET": {
       "Ref": "govbizaiprocesseddocumentsEB84F3C4"
      },
      "TEMP_PROCESSING_BUCKET": {
       "Ref": "govbizaitempprocessing8660E60C"
      },
      "EMBEDDINGS_BUCKET": {
       "Ref": "govbizaiembeddings9C1E2D0C"
      },
      "OPPORTUNITIES_TABLE": {
       "Ref": "govbizaiopportunities87C89AB3"
      },
      "PROCESSING_QUEUE_URL": {
       "Ref": "govbizaiopportunityprocessingqueueA25C3C4F"
      }
     }
    },
    "FunctionName": "govbizai-attachment-downloader",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaisamgovlayerE234361B"
     }
    ],
    "MemorySize": 1024,
    "Role": {
     "Fn::GetAtt": [
      "govbizaiattachmentdownloaderServiceRole5D4ACF64",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 900,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizaiattachmentdownloaderSecurityGroup5D490164",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizaiattachmentdownloaderServiceRoleDefaultPolicyF7A4D9F4",
    "govbizaiattachmentdownloaderServiceRole5D4ACF64",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiopportunityprocessorServiceRole067EC6C5": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiopportunityprocessorServiceRoleDefaultPolicy6F16A3A5": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizairawdocumentsC6263907",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizairawdocumentsC6263907",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiprocesseddocumentsEB84F3C4",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiprocesseddocumentsEB84F3C4",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaitempprocessing8660E60C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaitempprocessing8660E60C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiembeddings9C1E2D0C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiembeddings9C1E2D0C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiopportunities87C89AB3",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiopportunities87C89AB3",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "sqs:SendMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiopportunityprocessingqueueA25C3C4F",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "sqs:ReceiveMessage",
        "sqs:ChangeMessageVisibility",
        "sqs:GetQueueUrl",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiopportunityprocessingqueueA25C3C4F",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "bedrock:InvokeModel",
        "bedrock:InvokeModelWithResponseStream"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:aws:bedrock:",
          {
           "Ref": "AWS::Region"
          },
          "::foundation-model/amazon.titan-embed-text-v2:0"
         ]
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaiopportunityprocessorServiceRoleDefaultPolicy6F16A3A5",
    "Roles": [
     {
      "Ref": "govbizaiopportunityprocessorServiceRole067EC6C5"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiopportunityprocessorSecurityGroup3F18D452": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizaiopportunityprocessor7D6AB1A9",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiopportunityprocessorE3114360": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "1067273bd68bd7d333ff5d28f7133e398a6f9326f9c3f7eafd26686917a5c062.zip"
    },
    "Description": "Process opportunities and generate embeddings",
    "Environment": {
     "Variables": {
      "RAW_DOCUMENTS_BUCKET": {
       "Ref": "govbizairawdocumentsC6263907"
      },
      "PROCESSED_DOCUMENTS_BUCKET": {
       "Ref": "govbizaiprocesseddocumentsEB84F3C4"
      },
      "TEMP_PROCESSING_BUCKET": {
       "Ref": "govbizaitempprocessing8660E60C"
      },
      "EMBEDDINGS_BUCKET": {
       "Ref": "govbizaiembeddings9C1E2D0C"
      },
      "OPPORTUNITIES_TABLE": {
       "Ref": "govbizaiopportunities87C89AB3"
      },
      "PROCESSING_QUEUE_URL": {
       "Ref": "govbizaiopportunityprocessingqueueA25C3C4F"
      }
     }
    },
    "FunctionName": "govbizai-opportunity-processor",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaisamgovlayerE234361B"
     }
    ],
    "MemorySize": 1024,
    "Role": {
     "Fn::GetAtt": [
      "govbizaiopportunityprocessorServiceRole067EC6C5",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 900,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizaiopportunityprocessorSecurityGroup3F18D452",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizaiopportunityprocessorServiceRoleDefaultPolicy6F16A3A5",
    "govbizaiopportunityprocessorServiceRole067EC6C5",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaidataretentionServiceRole296EC6D7": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaidataretentionServiceRoleDefaultPolicyACB78832": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizairawdocumentsC6263907",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizairawdocumentsC6263907",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiprocesseddocumentsEB84F3C4",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiprocesseddocumentsEB84F3C4",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaitempprocessing8660E60C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaitempprocessing8660E60C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiembeddings9C1E2D0C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiembeddings9C1E2D0C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiopportunities87C89AB3",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiopportunities87C89AB3",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "sqs:SendMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiopportunityprocessingqueueA25C3C4F",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "sqs:ReceiveMessage",
        "sqs:ChangeMessageVisibility",
        "sqs:GetQueueUrl",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiopportunityprocessingqueueA25C3C4F",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "bedrock:InvokeModel",
        "bedrock:InvokeModelWithResponseStream"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:aws:bedrock:",
          {
           "Ref": "AWS::Region"
          },
          "::foundation-model/amazon.titan-embed-text-v2:0"
         ]
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaidataretentionServiceRoleDefaultPolicyACB78832",
    "Roles": [
     {
      "Ref": "govbizaidataretentionServiceRole296EC6D7"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaidataretentionSecurityGroup46AFABD3": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizaidataretention17269923",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaidataretentionB54F2C67": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "25101b1509a6526f7ab4d7513dc1202a690f716846b764df68f44d7ad4a088a1.zip"
    },
    "Description": "Clean up expired opportunities and attachments",
    "Environment": {
     "Variables": {
      "RAW_DOCUMENTS_BUCKET": {
       "Ref": "govbizairawdocumentsC6263907"
      },
      "PROCESSED_DOCUMENTS_BUCKET": {
       "Ref": "govbizaiprocesseddocumentsEB84F3C4"
      },
      "TEMP_PROCESSING_BUCKET": {
       "Ref": "govbizaitempprocessing8660E60C"
      },
      "EMBEDDINGS_BUCKET": {
       "Ref": "govbizaiembeddings9C1E2D0C"
      },
      "OPPORTUNITIES_TABLE": {
       "Ref": "govbizaiopportunities87C89AB3"
      },
      "PROCESSING_QUEUE_URL": {
       "Ref": "govbizaiopportunityprocessingqueueA25C3C4F"
      }
     }
    },
    "FunctionName": "govbizai-data-retention",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaisamgovlayerE234361B"
     }
    ],
    "MemorySize": 512,
    "Role": {
     "Fn::GetAtt": [
      "govbizaidataretentionServiceRole296EC6D7",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 300,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizaidataretentionSecurityGroup46AFABD3",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizaidataretentionServiceRoleDefaultPolicyACB78832",
    "govbizaidataretentionServiceRole296EC6D7",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaisamgovorchestratorServiceRole2E927FA6": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaisamgovorchestratorServiceRoleDefaultPolicy8CF17B1F": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizairawdocumentsC6263907",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizairawdocumentsC6263907",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiprocesseddocumentsEB84F3C4",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiprocesseddocumentsEB84F3C4",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaitempprocessing8660E60C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaitempprocessing8660E60C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiembeddings9C1E2D0C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiembeddings9C1E2D0C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiopportunities87C89AB3",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiopportunities87C89AB3",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "sqs:SendMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiopportunityprocessingqueueA25C3C4F",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "sqs:ReceiveMessage",
        "sqs:ChangeMessageVisibility",
        "sqs:GetQueueUrl",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiopportunityprocessingqueueA25C3C4F",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "bedrock:InvokeModel",
        "bedrock:InvokeModelWithResponseStream"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:aws:bedrock:",
          {
           "Ref": "AWS::Region"
          },
          "::foundation-model/amazon.titan-embed-text-v2:0"
         ]
        ]
       }
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicsvprocessorE4C498A4",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicsvprocessorE4C498A4",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaisamgovapiclientD137678A",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaisamgovapiclientD137678A",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiattachmentdownloaderCB0D7297",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiattachmentdownloaderCB0D7297",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiopportunityprocessorE3114360",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiopportunityprocessorE3114360",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaisamgovorchestratorServiceRoleDefaultPolicy8CF17B1F",
    "Roles": [
     {
      "Ref": "govbizaisamgovorchestratorServiceRole2E927FA6"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaisamgovorchestratorSecurityGroup5157016D": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizaisamgovorchestrator35D42E34",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaisamgovorchestrator3A18D42F": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "de82c4e783817793080e0f47625a79961d3bde77b33b510e3081ed44097a3160.zip"
    },
    "Description": "Main orchestrator for SAM.gov nightly processing",
    "Environment": {
     "Variables": {
      "RAW_DOCUMENTS_BUCKET": {
       "Ref": "govbizairawdocumentsC6263907"
      },
      "PROCESSED_DOCUMENTS_BUCKET": {
       "Ref": "govbizaiprocesseddocumentsEB84F3C4"
      },
      "TEMP_PROCESSING_BUCKET": {
       "Ref": "govbizaitempprocessing8660E60C"
      },
      "EMBEDDINGS_BUCKET": {
       "Ref": "govbizaiembeddings9C1E2D0C"
      },
      "OPPORTUNITIES_TABLE": {
       "Ref": "govbizaiopportunities87C89AB3"
      },
      "PROCESSING_QUEUE_URL": {
       "Ref": "govbizaiopportunityprocessingqueueA25C3C4F"
      },
      "CSV_PROCESSOR_FUNCTION": {
       "Ref": "govbizaicsvprocessorE4C498A4"
      },
      "API_CLIENT_FUNCTION": {
       "Ref": "govbizaisamgovapiclientD137678A"
      },
      "ATTACHMENT_DOWNLOADER_FUNCTION": {
       "Ref": "govbizaiattachmentdownloaderCB0D7297"
      },
      "OPPORTUNITY_PROCESSOR_FUNCTION": {
       "Ref": "govbizaiopportunityprocessorE3114360"
      }
     }
    },
    "FunctionName": "govbizai-samgov-orchestrator",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaisamgovlayerE234361B"
     }
    ],
    "MemorySize": 1024,
    "Role": {
     "Fn::GetAtt": [
      "govbizaisamgovorchestratorServiceRole2E927FA6",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 300,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizaisamgovorchestratorSecurityGroup5157016D",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizaisamgovorchestratorServiceRoleDefaultPolicy8CF17B1F",
    "govbizaisamgovorchestratorServiceRole2E927FA6",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiprocessingstatemachinelogsF56F3F6E": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": "/aws/stepfunctions/govbizai-processing-state-machine",
    "RetentionInDays": 30,
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain"
  },
  "govbizaiprocessingstatemachineRole3B667984": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "states.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   }
  },
  "govbizaiprocessingstatemachineRoleDefaultPolicyD88C8811": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicsvprocessorE4C498A4",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicsvprocessorE4C498A4",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiopportunityprocessorE3114360",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiopportunityprocessorE3114360",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiattachmentdownloaderCB0D7297",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiattachmentdownloaderCB0D7297",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "logs:CreateLogDelivery",
        "logs:GetLogDelivery",
        "logs:UpdateLogDelivery",
        "logs:DeleteLogDelivery",
        "logs:ListLogDeliveries",
        "logs:PutResourcePolicy",
        "logs:DescribeResourcePolicies",
        "logs:DescribeLogGroups"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaiprocessingstatemachineRoleDefaultPolicyD88C8811",
    "Roles": [
     {
      "Ref": "govbizaiprocessingstatemachineRole3B667984"
     }
    ]
   }
  },
  "govbizaiprocessingstatemachineF42BD87C": {
   "Type": "AWS::StepFunctions::StateMachine",
   "Properties": {
    "DefinitionString": {
     "Fn::Join": [
      "",
      [
       "{\"StartAt\":\"Initialize Processing\",\"States\":{\"Initialize Processing\":{\"Next\":\"Process Opportunities in Parallel\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Catch\":[{\"ErrorEquals\":[\"States.ALL\"],\"ResultPath\":\"$.error\",\"Next\":\"Processing Failed\"}],\"Type\":\"Task\",\"OutputPath\":\"$.Payload\",\"Resource\":\"arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",
       {
        "Fn::GetAtt": [
         "govbizaicsvprocessorE4C498A4",
         "Arn"
        ]
       },
       "\",\"Payload.$\":\"$\"}},\"Process Opportunities in Parallel\":{\"Type\":\"Map\",\"Next\":\"Processing Complete\",\"Catch\":[{\"ErrorEquals\":[\"States.ALL\"],\"ResultPath\":\"$.error\",\"Next\":\"Processing Failed\"}],\"ItemsPath\":\"$.opportunities\",\"ItemProcessor\":{\"ProcessorConfig\":{\"Mode\":\"DISTRIBUTED\",\"ExecutionType\":\"STANDARD\"},\"StartAt\":\"Process Opportunity\",\"States\":{\"Process Opportunity\":{\"Next\":\"Download Attachments\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"OutputPath\":\"$.Payload\",\"Resource\":\"arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",
       {
        "Fn::GetAtt": [
         "govbizaiopportunityprocessorE3114360",
         "Arn"
        ]
       },
       "\",\"Payload.$\":\"$\"}},\"Download Attachments\":{\"End\":true,\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"OutputPath\":\"$.Payload\",\"Resource\":\"arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",
       {
        "Fn::GetAtt": [
         "govbizaiattachmentdownloaderCB0D7297",
         "Arn"
        ]
       },
       "\",\"Payload.$\":\"$\"}}}},\"MaxConcurrency\":50},\"Processing Complete\":{\"Type\":\"Succeed\",\"Comment\":\"All opportunities processed successfully\"},\"Processing Failed\":{\"Type\":\"Fail\",\"Comment\":\"Processing failed with errors\"}},\"TimeoutSeconds\":14400}"
      ]
     ]
    },
    "LoggingConfiguration": {
     "Destinations": [
      {
       "CloudWatchLogsLogGroup": {
        "LogGroupArn": {
         "Fn::GetAtt": [
          "govbizaiprocessingstatemachinelogsF56F3F6E",
          "Arn"
         ]
        }
       }
      }
     ],
     "Level": "ALL"
    },
    "RoleArn": {
     "Fn::GetAtt": [
      "govbizaiprocessingstatemachineRole3B667984",
      "Arn"
     ]
    },
    "StateMachineName": "govbizai-processing-state-machine",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaiprocessingstatemachineRoleDefaultPolicyD88C8811",
    "govbizaiprocessingstatemachineRole3B667984"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "govbizaiprocessingstatemachineDistributedMapPolicy0CFEC373": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "states:StartExecution",
       "Effect": "Allow",
       "Resource": {
        "Ref": "govbizaiprocessingstatemachineF42BD87C"
       }
      },
      {
       "Action": [
        "states:DescribeExecution",
        "states:StopExecution"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          {
           "Ref": "govbizaiprocessingstatemachineF42BD87C"
          },
          ":*"
         ]
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaiprocessingstatemachineDistributedMapPolicy0CFEC373",
    "Roles": [
     {
      "Ref": "govbizaiprocessingstatemachineRole3B667984"
     }
    ]
   }
  },
  "govbizaiprocessingstatemachineEventsRole4457CD0B": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "events.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   }
  },
  "govbizaiprocessingstatemachineEventsRoleDefaultPolicyBAF2150A": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "states:StartExecution",
       "Effect": "Allow",
       "Resource": {
        "Ref": "govbizaiprocessingstatemachineF42BD87C"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaiprocessingstatemachineEventsRoleDefaultPolicyBAF2150A",
    "Roles": [
     {
      "Ref": "govbizaiprocessingstatemachineEventsRole4457CD0B"
     }
    ]
   }
  },
  "govbizainightlyprocessingrule452CF89C": {
   "Type": "AWS::Events::Rule",
   "Properties": {
    "Description": "Trigger SAM.gov processing at 2:00 AM EST daily",
    "Name": "govbizai-nightly-processing-rule",
    "ScheduleExpression": "cron(0 7 * * ? *)",
    "State": "ENABLED",
    "Targets": [
     {
      "Arn": {
       "Ref": "govbizaiprocessingstatemachineF42BD87C"
      },
      "Id": "Target0",
      "RoleArn": {
       "Fn::GetAtt": [
        "govbizaiprocessingstatemachineEventsRole4457CD0B",
        "Arn"
       ]
      }
     }
    ]
   }
  },
  "govbizaidataretentionruleB4FB315A": {
   "Type": "AWS::Events::Rule",
   "Properties": {
    "Description": "Trigger data retention cleanup at 3:00 AM EST daily",
    "Name": "govbizai-data-retention-rule",
    "ScheduleExpression": "cron(0 8 * * ? *)",
    "State": "ENABLED",
    "Targets": [
     {
      "Arn": {
       "Fn::GetAtt": [
        "govbizaidataretentionB54F2C67",
        "Arn"
       ]
      },
      "Id": "Target0"
     }
    ]
   }
  },
  "govbizaidataretentionruleAllowEventRuleTestInfrastructureStackgovbizaidataretention17269923FE7D6FBD": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "govbizaidataretentionB54F2C67",
      "Arn"
     ]
    },
    "Principal": "events.amazonaws.com",
    "SourceArn": {
     "Fn::GetAtt": [
      "govbizaidataretentionruleB4FB315A",
      "Arn"
     ]
    }
   }
  },
  "govbizaicompanyprofilelayerA55DC6C5": {
   "Type": "AWS::Lambda::LayerVersion",
   "Properties": {
    "CompatibleRuntimes": [
     "python3.11"
    ],
    "Content": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "f74bcdfc4968de22ff341ec3a8174b0653bb22cc6749a34c4a7bf5667eb4d7fe.zip"
    },
    "Description": "Company profile management dependencies including requests, BeautifulSoup4, etc.",
    "LayerName": "govbizai-company-profile-layer"
   }
  },
  "govbizaiuploadpresignedurlServiceRole3BECF939": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiuploadpresignedurlServiceRoleDefaultPolicyB528EC84": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizairawdocumentsC6263907",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizairawdocumentsC6263907",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiprocesseddocumentsEB84F3C4",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiprocesseddocumentsEB84F3C4",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiembeddings9C1E2D0C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiembeddings9C1E2D0C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicompaniesEF47080E",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicompaniesEF47080E",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiauditlog8C2898B9",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiauditlog8C2898B9",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "bedrock:InvokeModel",
        "bedrock:InvokeModelWithResponseStream"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:bedrock:",
           {
            "Ref": "AWS::Region"
           },
           "::foundation-model/amazon.titan-embed-text-v2:0"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:bedrock:",
           {
            "Ref": "AWS::Region"
           },
           "::foundation-model/anthropic.claude-3-haiku-20240307-v1:0"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:lambda:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":function:govbizai-text-extraction"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:lambda:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":function:govbizai-*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaiuploadpresignedurlServiceRoleDefaultPolicyB528EC84",
    "Roles": [
     {
      "Ref": "govbizaiuploadpresignedurlServiceRole3BECF939"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiuploadpresignedurlSecurityGroupFF37A384": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizaiuploadpresignedurl12AA337F",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiuploadpresignedurl733AD037": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "2f1c079d51bbd5c386b7448ce70afbe33a6faae104c001947cea4256e8d31bc2.zip"
    },
    "Description": "Generate presigned URLs for secure document uploads",
    "Environment": {
     "Variables": {
      "RAW_DOCUMENTS_BUCKET": {
       "Ref": "govbizairawdocumentsC6263907"
      },
      "PROCESSED_DOCUMENTS_BUCKET": {
       "Ref": "govbizaiprocesseddocumentsEB84F3C4"
      },
      "EMBEDDINGS_BUCKET": {
       "Ref": "govbizaiembeddings9C1E2D0C"
      },
      "COMPANIES_TABLE_NAME": {
       "Ref": "govbizaicompaniesEF47080E"
      },
      "AUDIT_LOG_TABLE_NAME": {
       "Ref": "govbizaiauditlog8C2898B9"
      },
      "TEXT_EXTRACTION_FUNCTION": "govbizai-text-extraction"
     }
    },
    "FunctionName": "govbizai-upload-presigned-url",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaicompanyprofilelayerA55DC6C5"
     }
    ],
    "MemorySize": 512,
    "Role": {
     "Fn::GetAtt": [
      "govbizaiuploadpresignedurlServiceRole3BECF939",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 300,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizaiuploadpresignedurlSecurityGroupFF37A384",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizaiuploadpresignedurlServiceRoleDefaultPolicyB528EC84",
    "govbizaiuploadpresignedurlServiceRole3BECF939",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaimultipartuploadServiceRole4A0E3A89": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaimultipartuploadServiceRoleDefaultPolicyF39B0A03": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizairawdocumentsC6263907",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizairawdocumentsC6263907",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiprocesseddocumentsEB84F3C4",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiprocesseddocumentsEB84F3C4",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiembeddings9C1E2D0C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiembeddings9C1E2D0C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicompaniesEF47080E",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicompaniesEF47080E",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiauditlog8C2898B9",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiauditlog8C2898B9",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "bedrock:InvokeModel",
        "bedrock:InvokeModelWithResponseStream"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:bedrock:",
           {
            "Ref": "AWS::Region"
           },
           "::foundation-model/amazon.titan-embed-text-v2:0"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:bedrock:",
           {
            "Ref": "AWS::Region"
           },
           "::foundation-model/anthropic.claude-3-haiku-20240307-v1:0"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:lambda:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":function:govbizai-text-extraction"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:lambda:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":function:govbizai-*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaimultipartuploadServiceRoleDefaultPolicyF39B0A03",
    "Roles": [
     {
      "Ref": "govbizaimultipartuploadServiceRole4A0E3A89"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaimultipartuploadSecurityGroupB995DCFA": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizaimultipartuploadBB3514C9",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaimultipartuploadB5024102": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "581140a8b92d09c2c9b8a0cc6fbd36a853a4cffba8fd2b057d4c7033af92cc32.zip"
    },
    "Description": "Handle multipart uploads for large documents",
    "Environment": {
     "Variables": {
      "RAW_DOCUMENTS_BUCKET": {
       "Ref": "govbizairawdocumentsC6263907"
      },
      "PROCESSED_DOCUMENTS_BUCKET": {
       "Ref": "govbizaiprocesseddocumentsEB84F3C4"
      },
      "EMBEDDINGS_BUCKET": {
       "Ref": "govbizaiembeddings9C1E2D0C"
      },
      "COMPANIES_TABLE_NAME": {
       "Ref": "govbizaicompaniesEF47080E"
      },
      "AUDIT_LOG_TABLE_NAME": {
       "Ref": "govbizaiauditlog8C2898B9"
      },
      "TEXT_EXTRACTION_FUNCTION": "govbizai-text-extraction"
     }
    },
    "FunctionName": "govbizai-multipart-upload",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaicompanyprofilelayerA55DC6C5"
     }
    ],
    "MemorySize": 1024,
    "Role": {
     "Fn::GetAtt": [
      "govbizaimultipartuploadServiceRole4A0E3A89",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 600,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizaimultipartuploadSecurityGroupB995DCFA",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizaimultipartuploadServiceRoleDefaultPolicyF39B0A03",
    "govbizaimultipartuploadServiceRole4A0E3A89",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiuploadprogressServiceRole7A28B914": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiuploadprogressServiceRoleDefaultPolicy9E487EF1": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizairawdocumentsC6263907",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizairawdocumentsC6263907",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiprocesseddocumentsEB84F3C4",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiprocesseddocumentsEB84F3C4",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiembeddings9C1E2D0C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiembeddings9C1E2D0C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicompaniesEF47080E",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicompaniesEF47080E",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiauditlog8C2898B9",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiauditlog8C2898B9",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "bedrock:InvokeModel",
        "bedrock:InvokeModelWithResponseStream"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:bedrock:",
           {
            "Ref": "AWS::Region"
           },
           "::foundation-model/amazon.titan-embed-text-v2:0"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:bedrock:",
           {
            "Ref": "AWS::Region"
           },
           "::foundation-model/anthropic.claude-3-haiku-20240307-v1:0"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:lambda:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":function:govbizai-text-extraction"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:lambda:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":function:govbizai-*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaiuploadprogressServiceRoleDefaultPolicy9E487EF1",
    "Roles": [
     {
      "Ref": "govbizaiuploadprogressServiceRole7A28B914"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiuploadprogressSecurityGroupFA936065": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizaiuploadprogressDBE84FF6",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiuploadprogressEE5C4774": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "29ed1d164cd72f92e944de5cbde56bd072cd897d0ac1bdac06b281782a97897c.zip"
    },
    "Description": "Track and manage document upload progress",
    "Environment": {
     "Variables": {
      "RAW_DOCUMENTS_BUCKET": {
       "Ref": "govbizairawdocumentsC6263907"
      },
      "PROCESSED_DOCUMENTS_BUCKET": {
       "Ref": "govbizaiprocesseddocumentsEB84F3C4"
      },
      "EMBEDDINGS_BUCKET": {
       "Ref": "govbizaiembeddings9C1E2D0C"
      },
      "COMPANIES_TABLE_NAME": {
       "Ref": "govbizaicompaniesEF47080E"
      },
      "AUDIT_LOG_TABLE_NAME": {
       "Ref": "govbizaiauditlog8C2898B9"
      },
      "TEXT_EXTRACTION_FUNCTION": "govbizai-text-extraction"
     }
    },
    "FunctionName": "govbizai-upload-progress",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaicompanyprofilelayerA55DC6C5"
     }
    ],
    "MemorySize": 512,
    "Role": {
     "Fn::GetAtt": [
      "govbizaiuploadprogressServiceRole7A28B914",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 300,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizaiuploadprogressSecurityGroupFA936065",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizaiuploadprogressServiceRoleDefaultPolicy9E487EF1",
    "govbizaiuploadprogressServiceRole7A28B914",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaischemavalidatorServiceRole1D36BA92": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaischemavalidatorServiceRoleDefaultPolicyE1510F6C": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizairawdocumentsC6263907",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizairawdocumentsC6263907",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiprocesseddocumentsEB84F3C4",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiprocesseddocumentsEB84F3C4",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiembeddings9C1E2D0C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiembeddings9C1E2D0C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicompaniesEF47080E",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicompaniesEF47080E",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiauditlog8C2898B9",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiauditlog8C2898B9",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "bedrock:InvokeModel",
        "bedrock:InvokeModelWithResponseStream"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:bedrock:",
           {
            "Ref": "AWS::Region"
           },
           "::foundation-model/amazon.titan-embed-text-v2:0"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:bedrock:",
           {
            "Ref": "AWS::Region"
           },
           "::foundation-model/anthropic.claude-3-haiku-20240307-v1:0"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:lambda:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":function:govbizai-text-extraction"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:lambda:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":function:govbizai-*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaischemavalidatorServiceRoleDefaultPolicyE1510F6C",
    "Roles": [
     {
      "Ref": "govbizaischemavalidatorServiceRole1D36BA92"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaischemavalidatorSecurityGroupA78054CC": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizaischemavalidator555ACCB0",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaischemavalidator574DAA1D": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "c2f116717f95c09a398876f3782f7fe5aec87a212c2bdb4990eb10ffe727acd4.zip"
    },
    "Description": "Validate and sanitize company profile data",
    "Environment": {
     "Variables": {
      "RAW_DOCUMENTS_BUCKET": {
       "Ref": "govbizairawdocumentsC6263907"
      },
      "PROCESSED_DOCUMENTS_BUCKET": {
       "Ref": "govbizaiprocesseddocumentsEB84F3C4"
      },
      "EMBEDDINGS_BUCKET": {
       "Ref": "govbizaiembeddings9C1E2D0C"
      },
      "COMPANIES_TABLE_NAME": {
       "Ref": "govbizaicompaniesEF47080E"
      },
      "AUDIT_LOG_TABLE_NAME": {
       "Ref": "govbizaiauditlog8C2898B9"
      },
      "TEXT_EXTRACTION_FUNCTION": "govbizai-text-extraction"
     }
    },
    "FunctionName": "govbizai-schema-validator",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaicompanyprofilelayerA55DC6C5"
     }
    ],
    "MemorySize": 512,
    "Role": {
     "Fn::GetAtt": [
      "govbizaischemavalidatorServiceRole1D36BA92",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 300,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizaischemavalidatorSecurityGroupA78054CC",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizaischemavalidatorServiceRoleDefaultPolicyE1510F6C",
    "govbizaischemavalidatorServiceRole1D36BA92",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaidocumentcategorizerServiceRole69348B81": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaidocumentcategorizerServiceRoleDefaultPolicyCB06E0B7": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizairawdocumentsC6263907",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizairawdocumentsC6263907",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiprocesseddocumentsEB84F3C4",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiprocesseddocumentsEB84F3C4",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiembeddings9C1E2D0C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiembeddings9C1E2D0C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicompaniesEF47080E",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicompaniesEF47080E",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiauditlog8C2898B9",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiauditlog8C2898B9",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "bedrock:InvokeModel",
        "bedrock:InvokeModelWithResponseStream"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:bedrock:",
           {
            "Ref": "AWS::Region"
           },
           "::foundation-model/amazon.titan-embed-text-v2:0"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:bedrock:",
           {
            "Ref": "AWS::Region"
           },
           "::foundation-model/anthropic.claude-3-haiku-20240307-v1:0"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:lambda:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":function:govbizai-text-extraction"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:lambda:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":function:govbizai-*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaidocumentcategorizerServiceRoleDefaultPolicyCB06E0B7",
    "Roles": [
     {
      "Ref": "govbizaidocumentcategorizerServiceRole69348B81"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaidocumentcategorizerSecurityGroup0A6C8D38": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizaidocumentcategorizerDFCEA67F",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaidocumentcategorizer039E902D": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "2009b4a6b21beeefb0c307da30b27e481562d6e616368ba9fd21220843258e03.zip"
    },
    "Description": "Automatically categorize uploaded documents",
    "Environment": {
     "Variables": {
      "RAW_DOCUMENTS_BUCKET": {
       "Ref": "govbizairawdocumentsC6263907"
      },
      "PROCESSED_DOCUMENTS_BUCKET": {
       "Ref": "govbizaiprocesseddocumentsEB84F3C4"
      },
      "EMBEDDINGS_BUCKET": {
       "Ref": "govbizaiembeddings9C1E2D0C"
      },
      "COMPANIES_TABLE_NAME": {
       "Ref": "govbizaicompaniesEF47080E"
      },
      "AUDIT_LOG_TABLE_NAME": {
       "Ref": "govbizaiauditlog8C2898B9"
      },
      "TEXT_EXTRACTION_FUNCTION": "govbizai-text-extraction"
     }
    },
    "FunctionName": "govbizai-document-categorizer",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaicompanyprofilelayerA55DC6C5"
     }
    ],
    "MemorySize": 1024,
    "Role": {
     "Fn::GetAtt": [
      "govbizaidocumentcategorizerServiceRole69348B81",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 900,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizaidocumentcategorizerSecurityGroup0A6C8D38",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizaidocumentcategorizerServiceRoleDefaultPolicyCB06E0B7",
    "govbizaidocumentcategorizerServiceRole69348B81",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizairesumeparserServiceRoleB962D2FC": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizairesumeparserServiceRoleDefaultPolicy3AC2B47D": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizairawdocumentsC6263907",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizairawdocumentsC6263907",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiprocesseddocumentsEB84F3C4",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiprocesseddocumentsEB84F3C4",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiembeddings9C1E2D0C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiembeddings9C1E2D0C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicompaniesEF47080E",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicompaniesEF47080E",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiauditlog8C2898B9",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiauditlog8C2898B9",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "bedrock:InvokeModel",
        "bedrock:InvokeModelWithResponseStream"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:bedrock:",
           {
            "Ref": "AWS::Region"
           },
           "::foundation-model/amazon.titan-embed-text-v2:0"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:bedrock:",
           {
            "Ref": "AWS::Region"
           },
           "::foundation-model/anthropic.claude-3-haiku-20240307-v1:0"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:lambda:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":function:govbizai-text-extraction"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:lambda:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":function:govbizai-*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizairesumeparserServiceRoleDefaultPolicy3AC2B47D",
    "Roles": [
     {
      "Ref": "govbizairesumeparserServiceRoleB962D2FC"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizairesumeparserSecurityGroupD80C15C5": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizairesumeparser1F32BDA0",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizairesumeparser269291CA": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "9b0f6917b95edf1f8da63043f5fcfd99891d1999153bb14b1614d0674bc94a4a.zip"
    },
    "Description": "Extract structured information from resume documents",
    "Environment": {
     "Variables": {
      "RAW_DOCUMENTS_BUCKET": {
       "Ref": "govbizairawdocumentsC6263907"
      },
      "PROCESSED_DOCUMENTS_BUCKET": {
       "Ref": "govbizaiprocesseddocumentsEB84F3C4"
      },
      "EMBEDDINGS_BUCKET": {
       "Ref": "govbizaiembeddings9C1E2D0C"
      },
      "COMPANIES_TABLE_NAME": {
       "Ref": "govbizaicompaniesEF47080E"
      },
      "AUDIT_LOG_TABLE_NAME": {
       "Ref": "govbizaiauditlog8C2898B9"
      },
      "TEXT_EXTRACTION_FUNCTION": "govbizai-text-extraction"
     }
    },
    "FunctionName": "govbizai-resume-parser",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaicompanyprofilelayerA55DC6C5"
     }
    ],
    "MemorySize": 1024,
    "Role": {
     "Fn::GetAtt": [
      "govbizairesumeparserServiceRoleB962D2FC",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 900,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizairesumeparserSecurityGroupD80C15C5",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizairesumeparserServiceRoleDefaultPolicy3AC2B47D",
    "govbizairesumeparserServiceRoleB962D2FC",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaicapabilityprocessorServiceRoleA36E32D5": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaicapabilityprocessorServiceRoleDefaultPolicyB53218AA": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizairawdocumentsC6263907",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizairawdocumentsC6263907",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiprocesseddocumentsEB84F3C4",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiprocesseddocumentsEB84F3C4",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiembeddings9C1E2D0C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiembeddings9C1E2D0C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicompaniesEF47080E",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicompaniesEF47080E",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiauditlog8C2898B9",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiauditlog8C2898B9",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "bedrock:InvokeModel",
        "bedrock:InvokeModelWithResponseStream"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:bedrock:",
           {
            "Ref": "AWS::Region"
           },
           "::foundation-model/amazon.titan-embed-text-v2:0"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:bedrock:",
           {
            "Ref": "AWS::Region"
           },
           "::foundation-model/anthropic.claude-3-haiku-20240307-v1:0"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:lambda:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":function:govbizai-text-extraction"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:lambda:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":function:govbizai-*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaicapabilityprocessorServiceRoleDefaultPolicyB53218AA",
    "Roles": [
     {
      "Ref": "govbizaicapabilityprocessorServiceRoleA36E32D5"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaicapabilityprocessorSecurityGroup6943A798": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizaicapabilityprocessor4D6D20B7",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaicapabilityprocessor716CDA66": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "a6481199dc0d990cb1ff016380e87c6c3c158d942b8c92a6d80a89b3f7042548.zip"
    },
    "Description": "Process and extract information from capability statements",
    "Environment": {
     "Variables": {
      "RAW_DOCUMENTS_BUCKET": {
       "Ref": "govbizairawdocumentsC6263907"
      },
      "PROCESSED_DOCUMENTS_BUCKET": {
       "Ref": "govbizaiprocesseddocumentsEB84F3C4"
      },
      "EMBEDDINGS_BUCKET": {
       "Ref": "govbizaiembeddings9C1E2D0C"
      },
      "COMPANIES_TABLE_NAME": {
       "Ref": "govbizaicompaniesEF47080E"
      },
      "AUDIT_LOG_TABLE_NAME": {
       "Ref": "govbizaiauditlog8C2898B9"
      },
      "TEXT_EXTRACTION_FUNCTION": "govbizai-text-extraction"
     }
    },
    "FunctionName": "govbizai-capability-processor",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaicompanyprofilelayerA55DC6C5"
     }
    ],
    "MemorySize": 1024,
    "Role": {
     "Fn::GetAtt": [
      "govbizaicapabilityprocessorServiceRoleA36E32D5",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 900,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizaicapabilityprocessorSecurityGroup6943A798",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizaicapabilityprocessorServiceRoleDefaultPolicyB53218AA",
    "govbizaicapabilityprocessorServiceRoleA36E32D5",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiwebsitescraperServiceRole7AC71D11": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiwebsitescraperServiceRoleDefaultPolicyB0879F68": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizairawdocumentsC6263907",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizairawdocumentsC6263907",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiprocesseddocumentsEB84F3C4",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiprocesseddocumentsEB84F3C4",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiembeddings9C1E2D0C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiembeddings9C1E2D0C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicompaniesEF47080E",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicompaniesEF47080E",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiauditlog8C2898B9",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiauditlog8C2898B9",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "bedrock:InvokeModel",
        "bedrock:InvokeModelWithResponseStream"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:bedrock:",
           {
            "Ref": "AWS::Region"
           },
           "::foundation-model/amazon.titan-embed-text-v2:0"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:bedrock:",
           {
            "Ref": "AWS::Region"
           },
           "::foundation-model/anthropic.claude-3-haiku-20240307-v1:0"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:lambda:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":function:govbizai-text-extraction"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:lambda:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":function:govbizai-*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "events:PutRule",
        "events:PutTargets",
        "events:DeleteRule",
        "events:RemoveTargets"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:aws:events:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":rule/govbizai-website-scraping-*"
         ]
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaiwebsitescraperServiceRoleDefaultPolicyB0879F68",
    "Roles": [
     {
      "Ref": "govbizaiwebsitescraperServiceRole7AC71D11"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiwebsitescraperSecurityGroup073C2FBB": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizaiwebsitescraper720BA23C",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiwebsitescraper3BFF460F": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "81bf412e52cae21ee4aa807ed26a68ac7240ae6ade502434cfa529d774b56988.zip"
    },
    "Description": "Scrape company websites with robots.txt compliance",
    "Environment": {
     "Variables": {
      "RAW_DOCUMENTS_BUCKET": {
       "Ref": "govbizairawdocumentsC6263907"
      },
      "PROCESSED_DOCUMENTS_BUCKET": {
       "Ref": "govbizaiprocesseddocumentsEB84F3C4"
      },
      "EMBEDDINGS_BUCKET": {
       "Ref": "govbizaiembeddings9C1E2D0C"
      },
      "COMPANIES_TABLE_NAME": {
       "Ref": "govbizaicompaniesEF47080E"
      },
      "AUDIT_LOG_TABLE_NAME": {
       "Ref": "govbizaiauditlog8C2898B9"
      },
      "TEXT_EXTRACTION_FUNCTION": "govbizai-text-extraction"
     }
    },
    "FunctionName": "govbizai-website-scraper",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaicompanyprofilelayerA55DC6C5"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::GetAtt": [
      "govbizaiwebsitescraperServiceRole7AC71D11",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 900,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizaiwebsitescraperSecurityGroup073C2FBB",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758",
    "govbizaiwebsitescraperServiceRoleDefaultPolicyB0879F68",
    "govbizaiwebsitescraperServiceRole7AC71D11"
   ]
  },
  "govbizaiembeddingstrategyServiceRole6CABE457": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiembeddingstrategyServiceRoleDefaultPolicy4F3D624E": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizairawdocumentsC6263907",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizairawdocumentsC6263907",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiprocesseddocumentsEB84F3C4",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiprocesseddocumentsEB84F3C4",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiembeddings9C1E2D0C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiembeddings9C1E2D0C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicompaniesEF47080E",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicompaniesEF47080E",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiauditlog8C2898B9",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiauditlog8C2898B9",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "bedrock:InvokeModel",
        "bedrock:InvokeModelWithResponseStream"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:bedrock:",
           {
            "Ref": "AWS::Region"
           },
           "::foundation-model/amazon.titan-embed-text-v2:0"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:bedrock:",
           {
            "Ref": "AWS::Region"
           },
           "::foundation-model/anthropic.claude-3-haiku-20240307-v1:0"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:lambda:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":function:govbizai-text-extraction"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:lambda:",
           {
            "Ref": "AWS::Region"
           },
           ":",
           {
            "Ref": "AWS::AccountId"
           },
           ":function:govbizai-*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaiembeddingstrategyServiceRoleDefaultPolicy4F3D624E",
    "Roles": [
     {
      "Ref": "govbizaiembeddingstrategyServiceRole6CABE457"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiembeddingstrategySecurityGroup3E22B25B": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizaiembeddingstrategy4F004D31",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiembeddingstrategyD53F1286": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "8c6e5fcd81cf082024d0bcbf28f3a20e229c93f7da2a1fb08a831f904dcc2abe.zip"
    },
    "Description": "Create multi-level embeddings for company documents",
    "Environment": {
     "Variables": {
      "RAW_DOCUMENTS_BUCKET": {
       "Ref": "govbizairawdocumentsC6263907"
      },
      "PROCESSED_DOCUMENTS_BUCKET": {
       "Ref": "govbizaiprocesseddocumentsEB84F3C4"
      },
      "EMBEDDINGS_BUCKET": {
       "Ref": "govbizaiembeddings9C1E2D0C"
      },
      "COMPANIES_TABLE_NAME": {
       "Ref": "govbizaicompaniesEF47080E"
      },
      "AUDIT_LOG_TABLE_NAME": {
       "Ref": "govbizaiauditlog8C2898B9"
      },
      "TEXT_EXTRACTION_FUNCTION": "govbizai-text-extraction"
     }
    },
    "FunctionName": "govbizai-embedding-strategy",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaicompanyprofilelayerA55DC6C5"
     }
    ],
    "MemorySize": 2048,
    "Role": {
     "Fn::GetAtt": [
      "govbizaiembeddingstrategyServiceRole6CABE457",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 900,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizaiembeddingstrategySecurityGroup3E22B25B",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizaiembeddingstrategyServiceRoleDefaultPolicy4F3D624E",
    "govbizaiembeddingstrategyServiceRole6CABE457",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaimatchingenginelayer6D9F158E": {
   "Type": "AWS::Lambda::LayerVersion",
   "Properties": {
    "CompatibleRuntimes": [
     "python3.11"
    ],
    "Content": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "0887df0fee1e0726717ae4b106fa17e200f756eaadafda86e25c7ee19fd7dfbb.zip"
    },
    "Description": "Matching engine dependencies including numpy, scipy, scikit-learn",
    "LayerName": "govbizai-matching-engine-layer"
   }
  },
  "govbizaimatchcache4369A744": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "cache_key",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "cache_key",
      "KeyType": "HASH"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "SSESpecification": {
     "KMSMasterKeyId": {
      "Fn::GetAtt": [
       "govbizaiencryptionkeyC77D74E4",
       "Arn"
      ]
     },
     "SSEEnabled": true,
     "SSEType": "KMS"
    },
    "TableName": "govbizai-match-cache",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "TimeToLiveSpecification": {
     "AttributeName": "ttl",
     "Enabled": true
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "govbizaisemanticsimilarityServiceRole57D25F8B": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaisemanticsimilarityServiceRoleDefaultPolicy95C08C5F": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiembeddings9C1E2D0C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiembeddings9C1E2D0C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiopportunities87C89AB3",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiopportunities87C89AB3",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicompaniesEF47080E",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicompaniesEF47080E",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaimatches22EB0E45",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaimatches22EB0E45",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaimatchcache4369A744",
          "Arn"
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "bedrock:InvokeModel",
        "bedrock:InvokeModelWithResponseStream"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:aws:bedrock:",
          {
           "Ref": "AWS::Region"
          },
          "::foundation-model/amazon.titan-embed-text-v2:0"
         ]
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaisemanticsimilarityServiceRoleDefaultPolicy95C08C5F",
    "Roles": [
     {
      "Ref": "govbizaisemanticsimilarityServiceRole57D25F8B"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaisemanticsimilaritySecurityGroupA9776FDB": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizaisemanticsimilarity2F1727D9",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaisemanticsimilarityDB6B985A": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "836fc15282a4112385d2d9b50c51b989c0f1dd2b5ca1ae9fa6e14a88ea12e5a2.zip"
    },
    "Description": "Calculate semantic similarity between opportunities and companies using Bedrock embeddings",
    "Environment": {
     "Variables": {
      "EMBEDDINGS_BUCKET": {
       "Ref": "govbizaiembeddings9C1E2D0C"
      },
      "OPPORTUNITIES_TABLE": {
       "Ref": "govbizaiopportunities87C89AB3"
      },
      "COMPANIES_TABLE": {
       "Ref": "govbizaicompaniesEF47080E"
      },
      "MATCHES_TABLE": {
       "Ref": "govbizaimatches22EB0E45"
      },
      "CACHE_TABLE": {
       "Ref": "govbizaimatchcache4369A744"
      }
     }
    },
    "FunctionName": "govbizai-semantic-similarity",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaimatchingenginelayer6D9F158E"
     }
    ],
    "MemorySize": 512,
    "Role": {
     "Fn::GetAtt": [
      "govbizaisemanticsimilarityServiceRole57D25F8B",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 30,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizaisemanticsimilaritySecurityGroupA9776FDB",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizaisemanticsimilarityServiceRoleDefaultPolicy95C08C5F",
    "govbizaisemanticsimilarityServiceRole57D25F8B",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaikeywordmatchingServiceRole510AFA90": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaikeywordmatchingServiceRoleDefaultPolicy0F144605": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiembeddings9C1E2D0C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiembeddings9C1E2D0C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiopportunities87C89AB3",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiopportunities87C89AB3",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicompaniesEF47080E",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicompaniesEF47080E",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaimatches22EB0E45",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaimatches22EB0E45",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaimatchcache4369A744",
          "Arn"
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "bedrock:InvokeModel",
        "bedrock:InvokeModelWithResponseStream"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:aws:bedrock:",
          {
           "Ref": "AWS::Region"
          },
          "::foundation-model/amazon.titan-embed-text-v2:0"
         ]
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaikeywordmatchingServiceRoleDefaultPolicy0F144605",
    "Roles": [
     {
      "Ref": "govbizaikeywordmatchingServiceRole510AFA90"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaikeywordmatchingSecurityGroupADACBB6B": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizaikeywordmatching1EA2BF70",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaikeywordmatching0DEC26F4": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "c97cc41d7da06f76c102fba377c5830d494e5905b08f4de486c8f582ba2dd089.zip"
    },
    "Description": "Perform keyword matching with TF-IDF scoring and acronym handling",
    "Environment": {
     "Variables": {
      "EMBEDDINGS_BUCKET": {
       "Ref": "govbizaiembeddings9C1E2D0C"
      },
      "OPPORTUNITIES_TABLE": {
       "Ref": "govbizaiopportunities87C89AB3"
      },
      "COMPANIES_TABLE": {
       "Ref": "govbizaicompaniesEF47080E"
      },
      "MATCHES_TABLE": {
       "Ref": "govbizaimatches22EB0E45"
      },
      "CACHE_TABLE": {
       "Ref": "govbizaimatchcache4369A744"
      }
     }
    },
    "FunctionName": "govbizai-keyword-matching",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaimatchingenginelayer6D9F158E"
     }
    ],
    "MemorySize": 512,
    "Role": {
     "Fn::GetAtt": [
      "govbizaikeywordmatchingServiceRole510AFA90",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 30,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizaikeywordmatchingSecurityGroupADACBB6B",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizaikeywordmatchingServiceRoleDefaultPolicy0F144605",
    "govbizaikeywordmatchingServiceRole510AFA90",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizainaicsalignmentServiceRoleFAE75B6B": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizainaicsalignmentServiceRoleDefaultPolicy3B6D784A": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiembeddings9C1E2D0C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiembeddings9C1E2D0C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiopportunities87C89AB3",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiopportunities87C89AB3",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicompaniesEF47080E",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicompaniesEF47080E",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaimatches22EB0E45",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaimatches22EB0E45",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaimatchcache4369A744",
          "Arn"
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "bedrock:InvokeModel",
        "bedrock:InvokeModelWithResponseStream"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:aws:bedrock:",
          {
           "Ref": "AWS::Region"
          },
          "::foundation-model/amazon.titan-embed-text-v2:0"
         ]
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizainaicsalignmentServiceRoleDefaultPolicy3B6D784A",
    "Roles": [
     {
      "Ref": "govbizainaicsalignmentServiceRoleFAE75B6B"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizainaicsalignmentSecurityGroup9B04C2F8": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizainaicsalignment3D613D1F",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizainaicsalignmentE3D11B46": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "cc2145ed35364f306ce5daed6ffb095ddbbd8db9c16f3537ffe2ff598ad12b4d.zip"
    },
    "Description": "Calculate NAICS code alignment with tiered matching",
    "Environment": {
     "Variables": {
      "EMBEDDINGS_BUCKET": {
       "Ref": "govbizaiembeddings9C1E2D0C"
      },
      "OPPORTUNITIES_TABLE": {
       "Ref": "govbizaiopportunities87C89AB3"
      },
      "COMPANIES_TABLE": {
       "Ref": "govbizaicompaniesEF47080E"
      },
      "MATCHES_TABLE": {
       "Ref": "govbizaimatches22EB0E45"
      },
      "CACHE_TABLE": {
       "Ref": "govbizaimatchcache4369A744"
      }
     }
    },
    "FunctionName": "govbizai-naics-alignment",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaimatchingenginelayer6D9F158E"
     }
    ],
    "MemorySize": 512,
    "Role": {
     "Fn::GetAtt": [
      "govbizainaicsalignmentServiceRoleFAE75B6B",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 30,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizainaicsalignmentSecurityGroup9B04C2F8",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizainaicsalignmentServiceRoleDefaultPolicy3B6D784A",
    "govbizainaicsalignmentServiceRoleFAE75B6B",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaipastperformanceServiceRole7CF6F4DF": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaipastperformanceServiceRoleDefaultPolicyB00D0697": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiembeddings9C1E2D0C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiembeddings9C1E2D0C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiopportunities87C89AB3",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiopportunities87C89AB3",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicompaniesEF47080E",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicompaniesEF47080E",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaimatches22EB0E45",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaimatches22EB0E45",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaimatchcache4369A744",
          "Arn"
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "bedrock:InvokeModel",
        "bedrock:InvokeModelWithResponseStream"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:aws:bedrock:",
          {
           "Ref": "AWS::Region"
          },
          "::foundation-model/amazon.titan-embed-text-v2:0"
         ]
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaipastperformanceServiceRoleDefaultPolicyB00D0697",
    "Roles": [
     {
      "Ref": "govbizaipastperformanceServiceRole7CF6F4DF"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaipastperformanceSecurityGroupC1F84189": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizaipastperformanceC691EE06",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaipastperformance68675781": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "3959a95c702ee1c0a55d6691edfdb965b0f670ebaf3a4ef7945e3513461bfd16.zip"
    },
    "Description": "Analyze past performance relevance and CPARS ratings",
    "Environment": {
     "Variables": {
      "EMBEDDINGS_BUCKET": {
       "Ref": "govbizaiembeddings9C1E2D0C"
      },
      "OPPORTUNITIES_TABLE": {
       "Ref": "govbizaiopportunities87C89AB3"
      },
      "COMPANIES_TABLE": {
       "Ref": "govbizaicompaniesEF47080E"
      },
      "MATCHES_TABLE": {
       "Ref": "govbizaimatches22EB0E45"
      },
      "CACHE_TABLE": {
       "Ref": "govbizaimatchcache4369A744"
      }
     }
    },
    "FunctionName": "govbizai-past-performance",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaimatchingenginelayer6D9F158E"
     }
    ],
    "MemorySize": 512,
    "Role": {
     "Fn::GetAtt": [
      "govbizaipastperformanceServiceRole7CF6F4DF",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 30,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizaipastperformanceSecurityGroupC1F84189",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizaipastperformanceServiceRoleDefaultPolicyB00D0697",
    "govbizaipastperformanceServiceRole7CF6F4DF",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaicertificationbonusServiceRole1C66F863": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaicertificationbonusServiceRoleDefaultPolicyD537650B": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiembeddings9C1E2D0C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiembeddings9C1E2D0C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiopportunities87C89AB3",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiopportunities87C89AB3",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicompaniesEF47080E",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicompaniesEF47080E",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaimatches22EB0E45",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaimatches22EB0E45",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaimatchcache4369A744",
          "Arn"
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "bedrock:InvokeModel",
        "bedrock:InvokeModelWithResponseStream"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:aws:bedrock:",
          {
           "Ref": "AWS::Region"
          },
          "::foundation-model/amazon.titan-embed-text-v2:0"
         ]
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaicertificationbonusServiceRoleDefaultPolicyD537650B",
    "Roles": [
     {
      "Ref": "govbizaicertificationbonusServiceRole1C66F863"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaicertificationbonusSecurityGroupAA37E3BC": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizaicertificationbonus82D74AED",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaicertificationbonus21E6EE86": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "84a4e7c3abc0c56f7d1693af46a88772bef7d8588905ec599daca2c22aa8cda4.zip"
    },
    "Description": "Calculate certification bonus scores and set-aside compliance",
    "Environment": {
     "Variables": {
      "EMBEDDINGS_BUCKET": {
       "Ref": "govbizaiembeddings9C1E2D0C"
      },
      "OPPORTUNITIES_TABLE": {
       "Ref": "govbizaiopportunities87C89AB3"
      },
      "COMPANIES_TABLE": {
       "Ref": "govbizaicompaniesEF47080E"
      },
      "MATCHES_TABLE": {
       "Ref": "govbizaimatches22EB0E45"
      },
      "CACHE_TABLE": {
       "Ref": "govbizaimatchcache4369A744"
      }
     }
    },
    "FunctionName": "govbizai-certification-bonus",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaimatchingenginelayer6D9F158E"
     }
    ],
    "MemorySize": 512,
    "Role": {
     "Fn::GetAtt": [
      "govbizaicertificationbonusServiceRole1C66F863",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 30,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizaicertificationbonusSecurityGroupAA37E3BC",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizaicertificationbonusServiceRoleDefaultPolicyD537650B",
    "govbizaicertificationbonusServiceRole1C66F863",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaigeographicmatchServiceRole75F57FDC": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaigeographicmatchServiceRoleDefaultPolicyB7C2C687": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiembeddings9C1E2D0C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiembeddings9C1E2D0C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiopportunities87C89AB3",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiopportunities87C89AB3",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicompaniesEF47080E",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicompaniesEF47080E",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaimatches22EB0E45",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaimatches22EB0E45",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaimatchcache4369A744",
          "Arn"
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "bedrock:InvokeModel",
        "bedrock:InvokeModelWithResponseStream"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:aws:bedrock:",
          {
           "Ref": "AWS::Region"
          },
          "::foundation-model/amazon.titan-embed-text-v2:0"
         ]
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaigeographicmatchServiceRoleDefaultPolicyB7C2C687",
    "Roles": [
     {
      "Ref": "govbizaigeographicmatchServiceRole75F57FDC"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaigeographicmatchSecurityGroupEC9003CF": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizaigeographicmatch6A7FE582",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaigeographicmatch5E81C651": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "7bac1fdb07540b90db3eac7e36e723d6c3f0d08ba5c43abe3875f41655a60f46.zip"
    },
    "Description": "Calculate geographic proximity and location-based scoring",
    "Environment": {
     "Variables": {
      "EMBEDDINGS_BUCKET": {
       "Ref": "govbizaiembeddings9C1E2D0C"
      },
      "OPPORTUNITIES_TABLE": {
       "Ref": "govbizaiopportunities87C89AB3"
      },
      "COMPANIES_TABLE": {
       "Ref": "govbizaicompaniesEF47080E"
      },
      "MATCHES_TABLE": {
       "Ref": "govbizaimatches22EB0E45"
      },
      "CACHE_TABLE": {
       "Ref": "govbizaimatchcache4369A744"
      }
     }
    },
    "FunctionName": "govbizai-geographic-match",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaimatchingenginelayer6D9F158E"
     }
    ],
    "MemorySize": 512,
    "Role": {
     "Fn::GetAtt": [
      "govbizaigeographicmatchServiceRole75F57FDC",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 30,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizaigeographicmatchSecurityGroupEC9003CF",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizaigeographicmatchServiceRoleDefaultPolicyB7C2C687",
    "govbizaigeographicmatchServiceRole75F57FDC",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaicapacityfitServiceRole3F14982D": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaicapacityfitServiceRoleDefaultPolicy4BDD4B8D": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiembeddings9C1E2D0C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiembeddings9C1E2D0C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiopportunities87C89AB3",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiopportunities87C89AB3",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicompaniesEF47080E",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicompaniesEF47080E",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaimatches22EB0E45",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaimatches22EB0E45",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaimatchcache4369A744",
          "Arn"
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "bedrock:InvokeModel",
        "bedrock:InvokeModelWithResponseStream"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:aws:bedrock:",
          {
           "Ref": "AWS::Region"
          },
          "::foundation-model/amazon.titan-embed-text-v2:0"
         ]
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaicapacityfitServiceRoleDefaultPolicy4BDD4B8D",
    "Roles": [
     {
      "Ref": "govbizaicapacityfitServiceRole3F14982D"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaicapacityfitSecurityGroup9BD0AE3B": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizaicapacityfitE18715A3",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaicapacityfitF94A514F": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "5d1db7f79748b515d14ba3902a41d481085fff841d95956436f54b2077360bf5.zip"
    },
    "Description": "Assess capacity fit between company size and contract requirements",
    "Environment": {
     "Variables": {
      "EMBEDDINGS_BUCKET": {
       "Ref": "govbizaiembeddings9C1E2D0C"
      },
      "OPPORTUNITIES_TABLE": {
       "Ref": "govbizaiopportunities87C89AB3"
      },
      "COMPANIES_TABLE": {
       "Ref": "govbizaicompaniesEF47080E"
      },
      "MATCHES_TABLE": {
       "Ref": "govbizaimatches22EB0E45"
      },
      "CACHE_TABLE": {
       "Ref": "govbizaimatchcache4369A744"
      }
     }
    },
    "FunctionName": "govbizai-capacity-fit",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaimatchingenginelayer6D9F158E"
     }
    ],
    "MemorySize": 512,
    "Role": {
     "Fn::GetAtt": [
      "govbizaicapacityfitServiceRole3F14982D",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 30,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizaicapacityfitSecurityGroup9BD0AE3B",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizaicapacityfitServiceRoleDefaultPolicy4BDD4B8D",
    "govbizaicapacityfitServiceRole3F14982D",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizairecencyfactorServiceRoleA3318C22": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizairecencyfactorServiceRoleDefaultPolicy762434B0": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiembeddings9C1E2D0C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiembeddings9C1E2D0C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiopportunities87C89AB3",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiopportunities87C89AB3",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicompaniesEF47080E",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicompaniesEF47080E",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaimatches22EB0E45",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaimatches22EB0E45",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaimatchcache4369A744",
          "Arn"
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "bedrock:InvokeModel",
        "bedrock:InvokeModelWithResponseStream"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:aws:bedrock:",
          {
           "Ref": "AWS::Region"
          },
          "::foundation-model/amazon.titan-embed-text-v2:0"
         ]
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizairecencyfactorServiceRoleDefaultPolicy762434B0",
    "Roles": [
     {
      "Ref": "govbizairecencyfactorServiceRoleA3318C22"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizairecencyfactorSecurityGroup1098EA4F": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizairecencyfactorB7A195E2",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizairecencyfactor6CD38D36": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "0d7ca17794df914f52cec944163628d1aac2f4cb0682acffdf8ccd02e42c52c8.zip"
    },
    "Description": "Calculate recency factor with time-based decay",
    "Environment": {
     "Variables": {
      "EMBEDDINGS_BUCKET": {
       "Ref": "govbizaiembeddings9C1E2D0C"
      },
      "OPPORTUNITIES_TABLE": {
       "Ref": "govbizaiopportunities87C89AB3"
      },
      "COMPANIES_TABLE": {
       "Ref": "govbizaicompaniesEF47080E"
      },
      "MATCHES_TABLE": {
       "Ref": "govbizaimatches22EB0E45"
      },
      "CACHE_TABLE": {
       "Ref": "govbizaimatchcache4369A744"
      }
     }
    },
    "FunctionName": "govbizai-recency-factor",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaimatchingenginelayer6D9F158E"
     }
    ],
    "MemorySize": 512,
    "Role": {
     "Fn::GetAtt": [
      "govbizairecencyfactorServiceRoleA3318C22",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 30,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizairecencyfactorSecurityGroup1098EA4F",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizairecencyfactorServiceRoleDefaultPolicy762434B0",
    "govbizairecencyfactorServiceRoleA3318C22",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiquickfilterServiceRole6DCBE038": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiquickfilterServiceRoleDefaultPolicyFD4876D8": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiembeddings9C1E2D0C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiembeddings9C1E2D0C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiopportunities87C89AB3",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiopportunities87C89AB3",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicompaniesEF47080E",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicompaniesEF47080E",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaimatches22EB0E45",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaimatches22EB0E45",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaimatchcache4369A744",
          "Arn"
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "bedrock:InvokeModel",
        "bedrock:InvokeModelWithResponseStream"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:aws:bedrock:",
          {
           "Ref": "AWS::Region"
          },
          "::foundation-model/amazon.titan-embed-text-v2:0"
         ]
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaiquickfilterServiceRoleDefaultPolicyFD4876D8",
    "Roles": [
     {
      "Ref": "govbizaiquickfilterServiceRole6DCBE038"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiquickfilterSecurityGroup391EBF44": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizaiquickfilterD89AC33C",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaiquickfilterEB9D4EF7": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "4ec160dc3fff4ea45a6de84fc4fe123036492d3e5634a749a507df228c148f40.zip"
    },
    "Description": "Rapid pre-screening filter for potential matches",
    "Environment": {
     "Variables": {
      "EMBEDDINGS_BUCKET": {
       "Ref": "govbizaiembeddings9C1E2D0C"
      },
      "OPPORTUNITIES_TABLE": {
       "Ref": "govbizaiopportunities87C89AB3"
      },
      "COMPANIES_TABLE": {
       "Ref": "govbizaicompaniesEF47080E"
      },
      "MATCHES_TABLE": {
       "Ref": "govbizaimatches22EB0E45"
      },
      "CACHE_TABLE": {
       "Ref": "govbizaimatchcache4369A744"
      }
     }
    },
    "FunctionName": "govbizai-quick-filter",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaimatchingenginelayer6D9F158E"
     }
    ],
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "govbizaiquickfilterServiceRole6DCBE038",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 10,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizaiquickfilterSecurityGroup391EBF44",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizaiquickfilterServiceRoleDefaultPolicyFD4876D8",
    "govbizaiquickfilterServiceRole6DCBE038",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaimatchorchestratorServiceRoleCC64E38B": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     },
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaimatchorchestratorServiceRoleDefaultPolicy8DA9333D": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiembeddings9C1E2D0C",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiembeddings9C1E2D0C",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiopportunities87C89AB3",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiopportunities87C89AB3",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicompaniesEF47080E",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicompaniesEF47080E",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaiencryptionkeyC77D74E4",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaimatches22EB0E45",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaimatches22EB0E45",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaimatchcache4369A744",
          "Arn"
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "bedrock:InvokeModel",
        "bedrock:InvokeModelWithResponseStream"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:aws:bedrock:",
          {
           "Ref": "AWS::Region"
          },
          "::foundation-model/amazon.titan-embed-text-v2:0"
         ]
        ]
       }
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaisemanticsimilarityDB6B985A",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaisemanticsimilarityDB6B985A",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaikeywordmatching0DEC26F4",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaikeywordmatching0DEC26F4",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizainaicsalignmentE3D11B46",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizainaicsalignmentE3D11B46",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaipastperformance68675781",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaipastperformance68675781",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicertificationbonus21E6EE86",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicertificationbonus21E6EE86",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaigeographicmatch5E81C651",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaigeographicmatch5E81C651",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaicapacityfitF94A514F",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaicapacityfitF94A514F",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizairecencyfactor6CD38D36",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizairecencyfactor6CD38D36",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiquickfilterEB9D4EF7",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiquickfilterEB9D4EF7",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "sqs:SendMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaibatchmatchingqueue2199B9CE",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "sqs:ReceiveMessage",
        "sqs:ChangeMessageVisibility",
        "sqs:GetQueueUrl",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaibatchmatchingqueue2199B9CE",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaimatchorchestratorServiceRoleDefaultPolicy8DA9333D",
    "Roles": [
     {
      "Ref": "govbizaimatchorchestratorServiceRoleCC64E38B"
     }
    ]
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaimatchorchestratorSecurityGroup7F8F2E86": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatic security group for Lambda Function TestInfrastructureStackgovbizaimatchorchestrator7DAD44A4",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VpcId": {
     "Ref": "govbizaivpcC82B5B04"
    }
   },
   "DependsOn": [
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaimatchorchestratorC15BB73B": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "a5813d14706184db71a6577bfe44aced2fae14e36d24af15154aeae45d4b55f7.zip"
    },
    "Description": "Main orchestrator coordinating all matching components",
    "Environment": {
     "Variables": {
      "EMBEDDINGS_BUCKET": {
       "Ref": "govbizaiembeddings9C1E2D0C"
      },
      "OPPORTUNITIES_TABLE": {
       "Ref": "govbizaiopportunities87C89AB3"
      },
      "COMPANIES_TABLE": {
       "Ref": "govbizaicompaniesEF47080E"
      },
      "MATCHES_TABLE": {
       "Ref": "govbizaimatches22EB0E45"
      },
      "CACHE_TABLE": {
       "Ref": "govbizaimatchcache4369A744"
      }
     }
    },
    "FunctionName": "govbizai-match-orchestrator",
    "Handler": "handler.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaimatchingenginelayer6D9F158E"
     }
    ],
    "MemorySize": 1024,
    "Role": {
     "Fn::GetAtt": [
      "govbizaimatchorchestratorServiceRoleCC64E38B",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 120,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "govbizaimatchorchestratorSecurityGroup7F8F2E86",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet1Subnet22BEE1F8"
      },
      {
       "Ref": "govbizaivpcgovbizaiprivatesubnetSubnet2Subnet5E86CC4D"
      }
     ]
    }
   },
   "DependsOn": [
    "govbizaimatchorchestratorServiceRoleDefaultPolicy8DA9333D",
    "govbizaimatchorchestratorServiceRoleCC64E38B",
    "govbizaivpcgovbizaiprivatesubnetSubnet1DefaultRoute8918BD88",
    "govbizaivpcgovbizaiprivatesubnetSubnet1RouteTableAssociation09F9AEB4",
    "govbizaivpcgovbizaiprivatesubnetSubnet2DefaultRoute6488C86C",
    "govbizaivpcgovbizaiprivatesubnetSubnet2RouteTableAssociation63B8C758"
   ]
  },
  "govbizaibatchmatchingdlqB25C2077": {
   "Type": "AWS::SQS::Queue",
   "Properties": {
    "QueueName": "govbizai-batch-matching-dlq",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "govbizaibatchmatchingqueue2199B9CE": {
   "Type": "AWS::SQS::Queue",
   "Properties": {
    "MessageRetentionPeriod": 1209600,
    "QueueName": "govbizai-batch-matching-queue",
    "RedrivePolicy": {
     "deadLetterTargetArn": {
      "Fn::GetAtt": [
       "govbizaibatchmatchingdlqB25C2077",
       "Arn"
      ]
     },
     "maxReceiveCount": 3
    },
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VisibilityTimeout": 300
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "govbizaimatchingapi6A20D473": {
   "Type": "AWS::ApiGateway::RestApi",
   "Properties": {
    "Description": "API for opportunity matching operations",
    "Name": "govbizai-matching-api",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   }
  },
  "govbizaimatchingapiCloudWatchRole6D42C8B6": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "apigateway.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain"
  },
  "govbizaimatchingapiAccountE04B6A89": {
   "Type": "AWS::ApiGateway::Account",
   "Properties": {
    "CloudWatchRoleArn": {
     "Fn::GetAtt": [
      "govbizaimatchingapiCloudWatchRole6D42C8B6",
      "Arn"
     ]
    }
   },
   "DependsOn": [
    "govbizaimatchingapi6A20D473"
   ],
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain"
  },
  "govbizaimatchingapiDeployment3DF773EA12fd9a6498af447c4714644ad959da5c": {
   "Type": "AWS::ApiGateway::Deployment",
   "Properties": {
    "Description": "API for opportunity matching operations",
    "RestApiId": {
     "Ref": "govbizaimatchingapi6A20D473"
    }
   },
   "DependsOn": [
    "govbizaimatchingapimatchOPTIONSCD2EA8DF",
    "govbizaimatchingapimatchPOST64ACA1BA",
    "govbizaimatchingapimatch91443665",
    "govbizaimatchingapiOPTIONS09407AE3"
   ],
   "Metadata": {
    "aws:cdk:do-not-refactor": true
   }
  },
  "govbizaimatchingapiDeploymentStageprodF1E7177F": {
   "Type": "AWS::ApiGateway::Stage",
   "Properties": {
    "DeploymentId": {
     "Ref": "govbizaimatchingapiDeployment3DF773EA12fd9a6498af447c4714644ad959da5c"
    },
    "RestApiId": {
     "Ref": "govbizaimatchingapi6A20D473"
    },
    "StageName": "prod",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaimatchingapiAccountE04B6A89"
   ]
  },
  "govbizaimatchingapiOPTIONS09407AE3": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Fn::GetAtt": [
      "govbizaimatchingapi6A20D473",
      "RootResourceId"
     ]
    },
    "RestApiId": {
     "Ref": "govbizaimatchingapi6A20D473"
    }
   }
  },
  "govbizaimatchingapimatch91443665": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "govbizaimatchingapi6A20D473",
      "RootResourceId"
     ]
    },
    "PathPart": "match",
    "RestApiId": {
     "Ref": "govbizaimatchingapi6A20D473"
    }
   }
  },
  "govbizaimatchingapimatchOPTIONSCD2EA8DF": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "govbizaimatchingapimatch91443665"
    },
    "RestApiId": {
     "Ref": "govbizaimatchingapi6A20D473"
    }
   }
  },
  "govbizaimatchingapimatchPOSTApiPermissionTestInfrastructureStackgovbizaimatchingapiE33BF68CPOSTmatch2E836CE4": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "govbizaimatchorchestratorC15BB73B",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "govbizaimatchingapi6A20D473"
       },
       "/",
       {
        "Ref": "govbizaimatchingapiDeploymentStageprodF1E7177F"
       },
       "/POST/match"
      ]
     ]
    }
   }
  },
  "govbizaimatchingapimatchPOSTApiPermissionTestTestInfrastructureStackgovbizaimatchingapiE33BF68CPOSTmatch8BD9782B": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "govbizaimatchorchestratorC15BB73B",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "govbizaimatchingapi6A20D473"
       },
       "/test-invoke-stage/POST/match"
      ]
     ]
    }
   }
  },
  "govbizaimatchingapimatchPOST64ACA1BA": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "COGNITO_USER_POOLS",
    "AuthorizerId": {
     "Ref": "govbizaimatchingauthorizer90696A09"
    },
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "govbizaimatchorchestratorC15BB73B",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "govbizaimatchingapimatch91443665"
    },
    "RestApiId": {
     "Ref": "govbizaimatchingapi6A20D473"
    }
   }
  },
  "govbizaimatchingauthorizer90696A09": {
   "Type": "AWS::ApiGateway::Authorizer",
   "Properties": {
    "IdentitySource": "method.request.header.Authorization",
    "Name": "TestInfrastructureStackgovbizaimatchingauthorizer89627D1A",
    "ProviderARNs": [
     {
      "Fn::GetAtt": [
       "govbizaiuserpool36C7E10A",
       "Arn"
      ]
     }
    ],
    "RestApiId": {
     "Ref": "govbizaimatchingapi6A20D473"
    },
    "Type": "COGNITO_USER_POOLS"
   }
  },
  "govbizaimatchingapikey48DB3AFB": {
   "Type": "AWS::ApiGateway::ApiKey",
   "Properties": {
    "Description": "API key for GovBizAI matching engine",
    "Enabled": true,
    "Name": "govbizai-matching-api-key",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   }
  },
  "govbizaimatchingusageplanC69309D3": {
   "Type": "AWS::ApiGateway::UsagePlan",
   "Properties": {
    "ApiStages": [
     {
      "ApiId": {
       "Ref": "govbizaimatchingapi6A20D473"
      },
      "Stage": {
       "Ref": "govbizaimatchingapiDeploymentStageprodF1E7177F"
      },
      "Throttle": {}
     }
    ],
    "Description": "Usage plan for GovBizAI matching API",
    "Quota": {
     "Limit": 10000,
     "Period": "MONTH"
    },
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Throttle": {
     "BurstLimit": 200,
     "RateLimit": 100
    },
    "UsagePlanName": "govbizai-matching-usage-plan"
   }
  },
  "govbizaimatchingusageplanUsagePlanKeyResourceTestInfrastructureStackgovbizaimatchingapikey1F4574B98074CCED": {
   "Type": "AWS::ApiGateway::UsagePlanKey",
   "Properties": {
    "KeyId": {
     "Ref": "govbizaimatchingapikey48DB3AFB"
    },
    "KeyType": "API_KEY",
    "UsagePlanId": {
     "Ref": "govbizaimatchingusageplanC69309D3"
    }
   }
  },
  "govbizaibatchcoordination6E6DAA30": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "coordination_id",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "coordination_id",
      "KeyType": "HASH"
     }
    ],
    "SSESpecification": {
     "SSEEnabled": true
    },
    "TableName": "govbizai-batch-coordination",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "TimeToLiveSpecification": {
     "AttributeName": "ttl",
     "Enabled": true
    }
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain"
  },
  "govbizaiprogresstrackingCE98B3BF": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "coordination_id",
      "AttributeType": "S"
     },
     {
      "AttributeName": "batch_id",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "coordination_id",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "batch_id",
      "KeyType": "RANGE"
     }
    ],
    "SSESpecification": {
     "SSEEnabled": true
    },
    "TableName": "govbizai-progress-tracking",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "TimeToLiveSpecification": {
     "AttributeName": "ttl",
     "Enabled": true
    }
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain"
  },
  "govbizaibatchoptimizationhistoryD86040AB": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "processing_type",
      "AttributeType": "S"
     },
     {
      "AttributeName": "timestamp",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "processing_type",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "timestamp",
      "KeyType": "RANGE"
     }
    ],
    "SSESpecification": {
     "SSEEnabled": true
    },
    "TableName": "govbizai-batch-optimization-history",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "TimeToLiveSpecification": {
     "AttributeName": "ttl",
     "Enabled": true
    }
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain"
  },
  "govbizaischedulemanagementE696443A": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "schedule_name",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "schedule_name",
      "KeyType": "HASH"
     }
    ],
    "SSESpecification": {
     "SSEEnabled": true
    },
    "TableName": "govbizai-schedule-management",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "TimeToLiveSpecification": {
     "AttributeName": "ttl",
     "Enabled": true
    }
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain"
  },
  "govbizaibatchcoordinationdlq94776801": {
   "Type": "AWS::SQS::Queue",
   "Properties": {
    "FifoQueue": true,
    "QueueName": "govbizai-batch-coordination-dlq.fifo",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "govbizaibatchcoordinationqueueBCD854C6": {
   "Type": "AWS::SQS::Queue",
   "Properties": {
    "ContentBasedDeduplication": true,
    "FifoQueue": true,
    "MessageRetentionPeriod": 1209600,
    "QueueName": "govbizai-batch-coordination-queue.fifo",
    "RedrivePolicy": {
     "deadLetterTargetArn": {
      "Fn::GetAtt": [
       "govbizaibatchcoordinationdlq94776801",
       "Arn"
      ]
     },
     "maxReceiveCount": 3
    },
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "VisibilityTimeout": 900
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "govbizaibatchorchestrationlayer389F2B23": {
   "Type": "AWS::Lambda::LayerVersion",
   "Properties": {
    "CompatibleRuntimes": [
     "python3.11"
    ],
    "Content": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "931eee9b7146122ab73afb70280c3c538cbf352bde154d7b544dec1d325240ff.zip"
    },
    "Description": "Batch orchestration dependencies including boto3, CloudWatch metrics, etc.",
    "LayerName": "govbizai-batch-orchestration-layer"
   }
  },
  "govbizaibatchoptimizerfunctionServiceRoleC08D4F4D": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   }
  },
  "govbizaibatchoptimizerfunctionServiceRoleDefaultPolicy7C0F422F": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaibatchcoordination6E6DAA30",
          "Arn"
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaibatchoptimizationhistoryD86040AB",
          "Arn"
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "cloudwatch:GetMetricStatistics",
        "cloudwatch:PutMetricData",
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaibatchoptimizerfunctionServiceRoleDefaultPolicy7C0F422F",
    "Roles": [
     {
      "Ref": "govbizaibatchoptimizerfunctionServiceRoleC08D4F4D"
     }
    ]
   }
  },
  "govbizaibatchoptimizerfunction6E4BA428": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "65c4056b2c25387655d9580a1fe4e31a78754ab009588fc71a1c2d7b32e265fe.zip"
    },
    "Description": "Optimizes batch sizes based on performance metrics and system constraints",
    "Environment": {
     "Variables": {
      "COORDINATION_TABLE": {
       "Ref": "govbizaibatchcoordination6E6DAA30"
      },
      "PROGRESS_TABLE": {
       "Ref": "govbizaiprogresstrackingCE98B3BF"
      },
      "OPTIMIZATION_TABLE": {
       "Ref": "govbizaibatchoptimizationhistoryD86040AB"
      },
      "SCHEDULE_TABLE": {
       "Ref": "govbizaischedulemanagementE696443A"
      },
      "COORDINATION_QUEUE_URL": {
       "Ref": "govbizaibatchcoordinationqueueBCD854C6"
      }
     }
    },
    "FunctionName": "govbizai-batch-optimizer-function",
    "Handler": "batch_optimizer.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaibatchorchestrationlayer389F2B23"
     }
    ],
    "MemorySize": 1024,
    "Role": {
     "Fn::GetAtt": [
      "govbizaibatchoptimizerfunctionServiceRoleC08D4F4D",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 900
   },
   "DependsOn": [
    "govbizaibatchoptimizerfunctionServiceRoleDefaultPolicy7C0F422F",
    "govbizaibatchoptimizerfunctionServiceRoleC08D4F4D"
   ]
  },
  "govbizaibatchcoordinatorfunctionServiceRole5A25ACBA": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   }
  },
  "govbizaibatchcoordinatorfunctionServiceRoleDefaultPolicy64065E64": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaibatchcoordination6E6DAA30",
          "Arn"
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiprogresstrackingCE98B3BF",
          "Arn"
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "sqs:SendMessage",
        "sqs:GetQueueAttributes",
        "sqs:GetQueueUrl"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaibatchcoordinationqueueBCD854C6",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "sqs:ReceiveMessage",
        "sqs:ChangeMessageVisibility",
        "sqs:GetQueueUrl",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "govbizaibatchcoordinationqueueBCD854C6",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaibatchcoordinatorfunctionServiceRoleDefaultPolicy64065E64",
    "Roles": [
     {
      "Ref": "govbizaibatchcoordinatorfunctionServiceRole5A25ACBA"
     }
    ]
   }
  },
  "govbizaibatchcoordinatorfunction3A0B477D": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "86053fc5323dcc104fade57dce79e15d505a09d2914975fe0695a7605c74ea8b.zip"
    },
    "Description": "Coordinates parallel batch processing with intelligent distribution",
    "Environment": {
     "Variables": {
      "COORDINATION_TABLE": {
       "Ref": "govbizaibatchcoordination6E6DAA30"
      },
      "PROGRESS_TABLE": {
       "Ref": "govbizaiprogresstrackingCE98B3BF"
      },
      "OPTIMIZATION_TABLE": {
       "Ref": "govbizaibatchoptimizationhistoryD86040AB"
      },
      "SCHEDULE_TABLE": {
       "Ref": "govbizaischedulemanagementE696443A"
      },
      "COORDINATION_QUEUE_URL": {
       "Ref": "govbizaibatchcoordinationqueueBCD854C6"
      }
     }
    },
    "FunctionName": "govbizai-batch-coordinator-function",
    "Handler": "batch_coordinator.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaibatchorchestrationlayer389F2B23"
     }
    ],
    "MemorySize": 1024,
    "Role": {
     "Fn::GetAtt": [
      "govbizaibatchcoordinatorfunctionServiceRole5A25ACBA",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 900
   },
   "DependsOn": [
    "govbizaibatchcoordinatorfunctionServiceRoleDefaultPolicy64065E64",
    "govbizaibatchcoordinatorfunctionServiceRole5A25ACBA"
   ]
  },
  "govbizaiprogresstrackerfunctionServiceRole94B73BD9": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   }
  },
  "govbizaiprogresstrackerfunctionServiceRoleDefaultPolicyDAAA3D23": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaibatchcoordination6E6DAA30",
          "Arn"
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiprogresstrackingCE98B3BF",
          "Arn"
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "cloudwatch:PutMetricData",
        "sns:Publish",
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaiprogresstrackerfunctionServiceRoleDefaultPolicyDAAA3D23",
    "Roles": [
     {
      "Ref": "govbizaiprogresstrackerfunctionServiceRole94B73BD9"
     }
    ]
   }
  },
  "govbizaiprogresstrackerfunction971A3D14": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "f8a7ab98fbaff2c4df60ff5864d252f0a468c6f65e4de3c7fd21460b834aeea8.zip"
    },
    "Description": "Tracks and reports real-time progress of batch processing operations",
    "Environment": {
     "Variables": {
      "COORDINATION_TABLE": {
       "Ref": "govbizaibatchcoordination6E6DAA30"
      },
      "PROGRESS_TABLE": {
       "Ref": "govbizaiprogresstrackingCE98B3BF"
      },
      "OPTIMIZATION_TABLE": {
       "Ref": "govbizaibatchoptimizationhistoryD86040AB"
      },
      "SCHEDULE_TABLE": {
       "Ref": "govbizaischedulemanagementE696443A"
      },
      "COORDINATION_QUEUE_URL": {
       "Ref": "govbizaibatchcoordinationqueueBCD854C6"
      }
     }
    },
    "FunctionName": "govbizai-progress-tracker-function",
    "Handler": "progress_tracker.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaibatchorchestrationlayer389F2B23"
     }
    ],
    "MemorySize": 1024,
    "Role": {
     "Fn::GetAtt": [
      "govbizaiprogresstrackerfunctionServiceRole94B73BD9",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 900
   },
   "DependsOn": [
    "govbizaiprogresstrackerfunctionServiceRoleDefaultPolicyDAAA3D23",
    "govbizaiprogresstrackerfunctionServiceRole94B73BD9"
   ]
  },
  "govbizaischedulemanagerfunctionServiceRoleC6CF02C7": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   }
  },
  "govbizaischedulemanagerfunctionServiceRoleDefaultPolicy3188A896": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaischedulemanagementE696443A",
          "Arn"
         ]
        },
        {
         "Ref": "AWS::NoValue"
        }
       ]
      },
      {
       "Action": [
        "events:PutRule",
        "events:DeleteRule",
        "events:DescribeRule",
        "events:PutTargets",
        "events:RemoveTargets",
        "events:ListTargetsByRule",
        "states:StartExecution",
        "states:DescribeExecution"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaischedulemanagerfunctionServiceRoleDefaultPolicy3188A896",
    "Roles": [
     {
      "Ref": "govbizaischedulemanagerfunctionServiceRoleC6CF02C7"
     }
    ]
   }
  },
  "govbizaischedulemanagerfunction1E885BCC": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": {
      "Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"
     },
     "S3Key": "db479d6a766471569c53f805fc5d3192da44edbb985253b5962b496fc3811f65.zip"
    },
    "Description": "Manages EventBridge schedules for batch processing operations",
    "Environment": {
     "Variables": {
      "COORDINATION_TABLE": {
       "Ref": "govbizaibatchcoordination6E6DAA30"
      },
      "PROGRESS_TABLE": {
       "Ref": "govbizaiprogresstrackingCE98B3BF"
      },
      "OPTIMIZATION_TABLE": {
       "Ref": "govbizaibatchoptimizationhistoryD86040AB"
      },
      "SCHEDULE_TABLE": {
       "Ref": "govbizaischedulemanagementE696443A"
      },
      "COORDINATION_QUEUE_URL": {
       "Ref": "govbizaibatchcoordinationqueueBCD854C6"
      }
     }
    },
    "FunctionName": "govbizai-schedule-manager-function",
    "Handler": "schedule_manager.lambda_handler",
    "Layers": [
     {
      "Ref": "govbizaibatchorchestrationlayer389F2B23"
     }
    ],
    "MemorySize": 1024,
    "Role": {
     "Fn::GetAtt": [
      "govbizaischedulemanagerfunctionServiceRoleC6CF02C7",
      "Arn"
     ]
    },
    "Runtime": "python3.11",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Timeout": 900
   },
   "DependsOn": [
    "govbizaischedulemanagerfunctionServiceRoleDefaultPolicy3188A896",
    "govbizaischedulemanagerfunctionServiceRoleC6CF02C7"
   ]
  },
  "govbizaienhancedprocessinglogs87C4E77C": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": "/aws/stepfunctions/govbizai-enhanced-processing-state-machine",
    "RetentionInDays": 30,
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain"
  },
  "govbizaienhancedprocessingstatemachineRole49755F09": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "states.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   }
  },
  "govbizaienhancedprocessingstatemachineRoleDefaultPolicyFEE62B88": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaibatchoptimizerfunction6E4BA428",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaibatchoptimizerfunction6E4BA428",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaibatchcoordinatorfunction3A0B477D",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaibatchcoordinatorfunction3A0B477D",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "govbizaiprogresstrackerfunction971A3D14",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "govbizaiprogresstrackerfunction971A3D14",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "logs:CreateLogDelivery",
        "logs:GetLogDelivery",
        "logs:UpdateLogDelivery",
        "logs:DeleteLogDelivery",
        "logs:ListLogDeliveries",
        "logs:PutResourcePolicy",
        "logs:DescribeResourcePolicies",
        "logs:DescribeLogGroups"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaienhancedprocessingstatemachineRoleDefaultPolicyFEE62B88",
    "Roles": [
     {
      "Ref": "govbizaienhancedprocessingstatemachineRole49755F09"
     }
    ]
   }
  },
  "govbizaienhancedprocessingstatemachine93FE10C0": {
   "Type": "AWS::StepFunctions::StateMachine",
   "Properties": {
    "DefinitionString": {
     "Fn::Join": [
      "",
      [
       "{\"StartAt\":\"Optimize Batch Size\",\"States\":{\"Optimize Batch Size\":{\"Next\":\"Coordinate Processing\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Catch\":[{\"ErrorEquals\":[\"States.ALL\"],\"ResultPath\":\"$.error\",\"Next\":\"Enhanced Processing Failed\"}],\"Type\":\"Task\",\"TimeoutSeconds\":300,\"OutputPath\":\"$.Payload\",\"Resource\":\"arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",
       {
        "Fn::GetAtt": [
         "govbizaibatchoptimizerfunction6E4BA428",
         "Arn"
        ]
       },
       "\",\"Payload.$\":\"$\"}},\"Coordinate Processing\":{\"Next\":\"Track Progress\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Catch\":[{\"ErrorEquals\":[\"States.ALL\"],\"ResultPath\":\"$.error\",\"Next\":\"Enhanced Processing Failed\"}],\"Type\":\"Task\",\"TimeoutSeconds\":600,\"OutputPath\":\"$.Payload\",\"Resource\":\"arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",
       {
        "Fn::GetAtt": [
         "govbizaibatchcoordinatorfunction3A0B477D",
         "Arn"
        ]
       },
       "\",\"Payload.$\":\"$\"}},\"Track Progress\":{\"Next\":\"Wait for Progress\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Catch\":[{\"ErrorEquals\":[\"States.ALL\"],\"ResultPath\":\"$.error\",\"Next\":\"Enhanced Processing Failed\"}],\"Type\":\"Task\",\"TimeoutSeconds\":120,\"OutputPath\":\"$.Payload\",\"Resource\":\"arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",
       {
        "Fn::GetAtt": [
         "govbizaiprogresstrackerfunction971A3D14",
         "Arn"
        ]
       },
       "\",\"Payload.$\":\"$\"}},\"Wait for Progress\":{\"Type\":\"Wait\",\"Seconds\":60,\"Next\":\"Track Progress Loop\"},\"Track Progress Loop\":{\"Next\":\"Check Progress Status\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"TimeoutSeconds\":120,\"ResultPath\":\"$.progress\",\"Resource\":\"arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",
       {
        "Fn::GetAtt": [
         "govbizaiprogresstrackerfunction971A3D14",
         "Arn"
        ]
       },
       "\",\"Payload.$\":\"$\"}},\"Check Progress Status\":{\"Type\":\"Choice\",\"Choices\":[{\"Variable\":\"$.progress.is_complete\",\"StringEquals\":\"true\",\"Next\":\"Enhanced Processing Complete\"},{\"Variable\":\"$.progress.failed_batches\",\"NumericGreaterThan\":0,\"Next\":\"Enhanced Processing Failed\"}],\"Default\":\"Wait for Progress\"},\"Enhanced Processing Complete\":{\"Type\":\"Succeed\",\"Comment\":\"Enhanced batch processing completed successfully\"},\"Enhanced Processing Failed\":{\"Type\":\"Fail\",\"Comment\":\"Enhanced batch processing failed\"}},\"TimeoutSeconds\":14400}"
      ]
     ]
    },
    "LoggingConfiguration": {
     "Destinations": [
      {
       "CloudWatchLogsLogGroup": {
        "LogGroupArn": {
         "Fn::GetAtt": [
          "govbizaienhancedprocessinglogs87C4E77C",
          "Arn"
         ]
        }
       }
      }
     ],
     "Level": "ALL"
    },
    "RoleArn": {
     "Fn::GetAtt": [
      "govbizaienhancedprocessingstatemachineRole49755F09",
      "Arn"
     ]
    },
    "StateMachineName": "govbizai-enhanced-processing-state-machine",
    "StateMachineType": "EXPRESS",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaienhancedprocessingstatemachineRoleDefaultPolicyFEE62B88",
    "govbizaienhancedprocessingstatemachineRole49755F09"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete"
  },
  "govbizaienhancedprocessingstatemachineEventsRole84E26938": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "events.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   }
  },
  "govbizaienhancedprocessingstatemachineEventsRoleDefaultPolicyD7BF2D05": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "states:StartExecution",
       "Effect": "Allow",
       "Resource": {
        "Ref": "govbizaienhancedprocessingstatemachine93FE10C0"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "govbizaienhancedprocessingstatemachineEventsRoleDefaultPolicyD7BF2D05",
    "Roles": [
     {
      "Ref": "govbizaienhancedprocessingstatemachineEventsRole84E26938"
     }
    ]
   }
  },
  "govbizaienhancednightlyprocessingrule2476B237": {
   "Type": "AWS::Events::Rule",
   "Properties": {
    "Description": "Enhanced nightly processing with batch optimization at 2:00 AM EST",
    "Name": "govbizai-enhanced-nightly-processing-rule",
    "ScheduleExpression": "cron(0 7 * * ? *)",
    "State": "ENABLED",
    "Targets": [
     {
      "Arn": {
       "Ref": "govbizaienhancedprocessingstatemachine93FE10C0"
      },
      "Id": "Target0",
      "Input": "{\"processing_type\":\"nightly_batch\",\"enable_optimization\":true,\"enable_progress_tracking\":true}",
      "RoleArn": {
       "Fn::GetAtt": [
        "govbizaienhancedprocessingstatemachineEventsRole84E26938",
        "Arn"
       ]
      }
     }
    ]
   }
  },
  "govbizaibatchorchestrationapi784AFF7C": {
   "Type": "AWS::ApiGateway::RestApi",
   "Properties": {
    "Description": "API for managing batch processing orchestration",
    "Name": "govbizai-batch-orchestration-api",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   }
  },
  "govbizaibatchorchestrationapiCloudWatchRoleAFD732D6": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "apigateway.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain"
  },
  "govbizaibatchorchestrationapiAccount7AEC5712": {
   "Type": "AWS::ApiGateway::Account",
   "Properties": {
    "CloudWatchRoleArn": {
     "Fn::GetAtt": [
      "govbizaibatchorchestrationapiCloudWatchRoleAFD732D6",
      "Arn"
     ]
    }
   },
   "DependsOn": [
    "govbizaibatchorchestrationapi784AFF7C"
   ],
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain"
  },
  "govbizaibatchorchestrationapiDeployment7C57D11963be6093014c93febb052664f487e654": {
   "Type": "AWS::ApiGateway::Deployment",
   "Properties": {
    "Description": "API for managing batch processing orchestration",
    "RestApiId": {
     "Ref": "govbizaibatchorchestrationapi784AFF7C"
    }
   },
   "DependsOn": [
    "govbizaibatchorchestrationapibatchcoordinatorOPTIONSE86D8C9F",
    "govbizaibatchorchestrationapibatchcoordinatorPOST2FE2A632",
    "govbizaibatchorchestrationapibatchcoordinatorAFE05993",
    "govbizaibatchorchestrationapibatchoptimizerOPTIONS1704A8A8",
    "govbizaibatchorchestrationapibatchoptimizerPOSTF24449DC",
    "govbizaibatchorchestrationapibatchoptimizer22E4487C",
    "govbizaibatchorchestrationapibatchOPTIONSDAF88B59",
    "govbizaibatchorchestrationapibatchprogressGET10CDAD1D",
    "govbizaibatchorchestrationapibatchprogressOPTIONSEFE2A31F",
    "govbizaibatchorchestrationapibatchprogressPOST67017645",
    "govbizaibatchorchestrationapibatchprogressC3F2A572",
    "govbizaibatchorchestrationapibatchB919BE43",
    "govbizaibatchorchestrationapibatchscheduleDELETE06694BD9",
    "govbizaibatchorchestrationapibatchscheduleGET1F888A9D",
    "govbizaibatchorchestrationapibatchscheduleOPTIONSC75B25CA",
    "govbizaibatchorchestrationapibatchschedulePOSTF3F5B0B9",
    "govbizaibatchorchestrationapibatchschedulePUT20574E2B",
    "govbizaibatchorchestrationapibatchschedule6814F40B",
    "govbizaibatchorchestrationapiOPTIONS272EE655"
   ],
   "Metadata": {
    "aws:cdk:do-not-refactor": true
   }
  },
  "govbizaibatchorchestrationapiDeploymentStageprod5243BDFD": {
   "Type": "AWS::ApiGateway::Stage",
   "Properties": {
    "DeploymentId": {
     "Ref": "govbizaibatchorchestrationapiDeployment7C57D11963be6093014c93febb052664f487e654"
    },
    "RestApiId": {
     "Ref": "govbizaibatchorchestrationapi784AFF7C"
    },
    "StageName": "prod",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   },
   "DependsOn": [
    "govbizaibatchorchestrationapiAccount7AEC5712"
   ]
  },
  "govbizaibatchorchestrationapiOPTIONS272EE655": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Fn::GetAtt": [
      "govbizaibatchorchestrationapi784AFF7C",
      "RootResourceId"
     ]
    },
    "RestApiId": {
     "Ref": "govbizaibatchorchestrationapi784AFF7C"
    }
   }
  },
  "govbizaibatchorchestrationapibatchB919BE43": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "govbizaibatchorchestrationapi784AFF7C",
      "RootResourceId"
     ]
    },
    "PathPart": "batch",
    "RestApiId": {
     "Ref": "govbizaibatchorchestrationapi784AFF7C"
    }
   }
  },
  "govbizaibatchorchestrationapibatchOPTIONSDAF88B59": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "govbizaibatchorchestrationapibatchB919BE43"
    },
    "RestApiId": {
     "Ref": "govbizaibatchorchestrationapi784AFF7C"
    }
   }
  },
  "govbizaibatchorchestrationapibatchoptimizer22E4487C": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "govbizaibatchorchestrationapibatchB919BE43"
    },
    "PathPart": "optimizer",
    "RestApiId": {
     "Ref": "govbizaibatchorchestrationapi784AFF7C"
    }
   }
  },
  "govbizaibatchorchestrationapibatchoptimizerOPTIONS1704A8A8": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "govbizaibatchorchestrationapibatchoptimizer22E4487C"
    },
    "RestApiId": {
     "Ref": "govbizaibatchorchestrationapi784AFF7C"
    }
   }
  },
  "govbizaibatchorchestrationapibatchoptimizerPOSTApiPermissionTestInfrastructureStackgovbizaibatchorchestrationapiE83D08E1POSTbatchoptimizer22229FE5": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "govbizaibatchoptimizerfunction6E4BA428",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "govbizaibatchorchestrationapi784AFF7C"
       },
       "/",
       {
        "Ref": "govbizaibatchorchestrationapiDeploymentStageprod5243BDFD"
       },
       "/POST/batch/optimizer"
      ]
     ]
    }
   }
  },
  "govbizaibatchorchestrationapibatchoptimizerPOSTApiPermissionTestTestInfrastructureStackgovbizaibatchorchestrationapiE83D08E1POSTbatchoptimizer62F29686": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "govbizaibatchoptimizerfunction6E4BA428",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "govbizaibatchorchestrationapi784AFF7C"
       },
       "/test-invoke-stage/POST/batch/optimizer"
      ]
     ]
    }
   }
  },
  "govbizaibatchorchestrationapibatchoptimizerPOSTF24449DC": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "govbizaibatchoptimizerfunction6E4BA428",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "govbizaibatchorchestrationapibatchoptimizer22E4487C"
    },
    "RestApiId": {
     "Ref": "govbizaibatchorchestrationapi784AFF7C"
    }
   }
  },
  "govbizaibatchorchestrationapibatchcoordinatorAFE05993": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "govbizaibatchorchestrationapibatchB919BE43"
    },
    "PathPart": "coordinator",
    "RestApiId": {
     "Ref": "govbizaibatchorchestrationapi784AFF7C"
    }
   }
  },
  "govbizaibatchorchestrationapibatchcoordinatorOPTIONSE86D8C9F": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "govbizaibatchorchestrationapibatchcoordinatorAFE05993"
    },
    "RestApiId": {
     "Ref": "govbizaibatchorchestrationapi784AFF7C"
    }
   }
  },
  "govbizaibatchorchestrationapibatchcoordinatorPOSTApiPermissionTestInfrastructureStackgovbizaibatchorchestrationapiE83D08E1POSTbatchcoordinator6D90B740": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "govbizaibatchcoordinatorfunction3A0B477D",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "govbizaibatchorchestrationapi784AFF7C"
       },
       "/",
       {
        "Ref": "govbizaibatchorchestrationapiDeploymentStageprod5243BDFD"
       },
       "/POST/batch/coordinator"
      ]
     ]
    }
   }
  },
  "govbizaibatchorchestrationapibatchcoordinatorPOSTApiPermissionTestTestInfrastructureStackgovbizaibatchorchestrationapiE83D08E1POSTbatchcoordinatorB2354DC0": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "govbizaibatchcoordinatorfunction3A0B477D",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "govbizaibatchorchestrationapi784AFF7C"
       },
       "/test-invoke-stage/POST/batch/coordinator"
      ]
     ]
    }
   }
  },
  "govbizaibatchorchestrationapibatchcoordinatorPOST2FE2A632": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "govbizaibatchcoordinatorfunction3A0B477D",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "govbizaibatchorchestrationapibatchcoordinatorAFE05993"
    },
    "RestApiId": {
     "Ref": "govbizaibatchorchestrationapi784AFF7C"
    }
   }
  },
  "govbizaibatchorchestrationapibatchprogressC3F2A572": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "govbizaibatchorchestrationapibatchB919BE43"
    },
    "PathPart": "progress",
    "RestApiId": {
     "Ref": "govbizaibatchorchestrationapi784AFF7C"
    }
   }
  },
  "govbizaibatchorchestrationapibatchprogressOPTIONSEFE2A31F": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "govbizaibatchorchestrationapibatchprogressC3F2A572"
    },
    "RestApiId": {
     "Ref": "govbizaibatchorchestrationapi784AFF7C"
    }
   }
  },
  "govbizaibatchorchestrationapibatchprogressGETApiPermissionTestInfrastructureStackgovbizaibatchorchestrationapiE83D08E1GETbatchprogress1D67EF1E": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "govbizaiprogresstrackerfunction971A3D14",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "govbizaibatchorchestrationapi784AFF7C"
       },
       "/",
       {
        "Ref": "govbizaibatchorchestrationapiDeploymentStageprod5243BDFD"
       },
       "/GET/batch/progress"
      ]
     ]
    }
   }
  },
  "govbizaibatchorchestrationapibatchprogressGETApiPermissionTestTestInfrastructureStackgovbizaibatchorchestrationapiE83D08E1GETbatchprogress3C3D2820": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "govbizaiprogresstrackerfunction971A3D14",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "govbizaibatchorchestrationapi784AFF7C"
       },
       "/test-invoke-stage/GET/batch/progress"
      ]
     ]
    }
   }
  },
  "govbizaibatchorchestrationapibatchprogressGET10CDAD1D": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "govbizaiprogresstrackerfunction971A3D14",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "govbizaibatchorchestrationapibatchprogressC3F2A572"
    },
    "RestApiId": {
     "Ref": "govbizaibatchorchestrationapi784AFF7C"
    }
   }
  },
  "govbizaibatchorchestrationapibatchprogressPOSTApiPermissionTestInfrastructureStackgovbizaibatchorchestrationapiE83D08E1POSTbatchprogressB383835B": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "govbizaiprogresstrackerfunction971A3D14",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "govbizaibatchorchestrationapi784AFF7C"
       },
       "/",
       {
        "Ref": "govbizaibatchorchestrationapiDeploymentStageprod5243BDFD"
       },
       "/POST/batch/progress"
      ]
     ]
    }
   }
  },
  "govbizaibatchorchestrationapibatchprogressPOSTApiPermissionTestTestInfrastructureStackgovbizaibatchorchestrationapiE83D08E1POSTbatchprogress56AF0452": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "govbizaiprogresstrackerfunction971A3D14",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "govbizaibatchorchestrationapi784AFF7C"
       },
       "/test-invoke-stage/POST/batch/progress"
      ]
     ]
    }
   }
  },
  "govbizaibatchorchestrationapibatchprogressPOST67017645": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "govbizaiprogresstrackerfunction971A3D14",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "govbizaibatchorchestrationapibatchprogressC3F2A572"
    },
    "RestApiId": {
     "Ref": "govbizaibatchorchestrationapi784AFF7C"
    }
   }
  },
  "govbizaibatchorchestrationapibatchschedule6814F40B": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "govbizaibatchorchestrationapibatchB919BE43"
    },
    "PathPart": "schedule",
    "RestApiId": {
     "Ref": "govbizaibatchorchestrationapi784AFF7C"
    }
   }
  },
  "govbizaibatchorchestrationapibatchscheduleOPTIONSC75B25CA": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "govbizaibatchorchestrationapibatchschedule6814F40B"
    },
    "RestApiId": {
     "Ref": "govbizaibatchorchestrationapi784AFF7C"
    }
   }
  },
  "govbizaibatchorchestrationapibatchscheduleGETApiPermissionTestInfrastructureStackgovbizaibatchorchestrationapiE83D08E1GETbatchschedule952E672B": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "govbizaischedulemanagerfunction1E885BCC",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "govbizaibatchorchestrationapi784AFF7C"
       },
       "/",
       {
        "Ref": "govbizaibatchorchestrationapiDeploymentStageprod5243BDFD"
       },
       "/GET/batch/schedule"
      ]
     ]
    }
   }
  },
  "govbizaibatchorchestrationapibatchscheduleGETApiPermissionTestTestInfrastructureStackgovbizaibatchorchestrationapiE83D08E1GETbatchschedule2D305E36": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "govbizaischedulemanagerfunction1E885BCC",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "govbizaibatchorchestrationapi784AFF7C"
       },
       "/test-invoke-stage/GET/batch/schedule"
      ]
     ]
    }
   }
  },
  "govbizaibatchorchestrationapibatchscheduleGET1F888A9D": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "govbizaischedulemanagerfunction1E885BCC",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "govbizaibatchorchestrationapibatchschedule6814F40B"
    },
    "RestApiId": {
     "Ref": "govbizaibatchorchestrationapi784AFF7C"
    }
   }
  },
  "govbizaibatchorchestrationapibatchschedulePOSTApiPermissionTestInfrastructureStackgovbizaibatchorchestrationapiE83D08E1POSTbatchschedule1DF9ED27": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "govbizaischedulemanagerfunction1E885BCC",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "govbizaibatchorchestrationapi784AFF7C"
       },
       "/",
       {
        "Ref": "govbizaibatchorchestrationapiDeploymentStageprod5243BDFD"
       },
       "/POST/batch/schedule"
      ]
     ]
    }
   }
  },
  "govbizaibatchorchestrationapibatchschedulePOSTApiPermissionTestTestInfrastructureStackgovbizaibatchorchestrationapiE83D08E1POSTbatchschedule3CE9BC10": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "govbizaischedulemanagerfunction1E885BCC",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "govbizaibatchorchestrationapi784AFF7C"
       },
       "/test-invoke-stage/POST/batch/schedule"
      ]
     ]
    }
   }
  },
  "govbizaibatchorchestrationapibatchschedulePOSTF3F5B0B9": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "govbizaischedulemanagerfunction1E885BCC",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "govbizaibatchorchestrationapibatchschedule6814F40B"
    },
    "RestApiId": {
     "Ref": "govbizaibatchorchestrationapi784AFF7C"
    }
   }
  },
  "govbizaibatchorchestrationapibatchschedulePUTApiPermissionTestInfrastructureStackgovbizaibatchorchestrationapiE83D08E1PUTbatchschedule97272E5E": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "govbizaischedulemanagerfunction1E885BCC",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "govbizaibatchorchestrationapi784AFF7C"
       },
       "/",
       {
        "Ref": "govbizaibatchorchestrationapiDeploymentStageprod5243BDFD"
       },
       "/PUT/batch/schedule"
      ]
     ]
    }
   }
  },
  "govbizaibatchorchestrationapibatchschedulePUTApiPermissionTestTestInfrastructureStackgovbizaibatchorchestrationapiE83D08E1PUTbatchschedule19A62334": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "govbizaischedulemanagerfunction1E885BCC",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "govbizaibatchorchestrationapi784AFF7C"
       },
       "/test-invoke-stage/PUT/batch/schedule"
      ]
     ]
    }
   }
  },
  "govbizaibatchorchestrationapibatchschedulePUT20574E2B": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "PUT",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "govbizaischedulemanagerfunction1E885BCC",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "govbizaibatchorchestrationapibatchschedule6814F40B"
    },
    "RestApiId": {
     "Ref": "govbizaibatchorchestrationapi784AFF7C"
    }
   }
  },
  "govbizaibatchorchestrationapibatchscheduleDELETEApiPermissionTestInfrastructureStackgovbizaibatchorchestrationapiE83D08E1DELETEbatchscheduleAECB5253": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "govbizaischedulemanagerfunction1E885BCC",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "govbizaibatchorchestrationapi784AFF7C"
       },
       "/",
       {
        "Ref": "govbizaibatchorchestrationapiDeploymentStageprod5243BDFD"
       },
       "/DELETE/batch/schedule"
      ]
     ]
    }
   }
  },
  "govbizaibatchorchestrationapibatchscheduleDELETEApiPermissionTestTestInfrastructureStackgovbizaibatchorchestrationapiE83D08E1DELETEbatchschedule7BFCCC02": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "govbizaischedulemanagerfunction1E885BCC",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:",
       {
        "Ref": "AWS::Region"
       },
       ":",
       {
        "Ref": "AWS::AccountId"
       },
       ":",
       {
        "Ref": "govbizaibatchorchestrationapi784AFF7C"
       },
       "/test-invoke-stage/DELETE/batch/schedule"
      ]
     ]
    }
   }
  },
  "govbizaibatchorchestrationapibatchscheduleDELETE06694BD9": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "NONE",
    "HttpMethod": "DELETE",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":apigateway:",
        {
         "Ref": "AWS::Region"
        },
        ":lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "govbizaischedulemanagerfunction1E885BCC",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "govbizaibatchorchestrationapibatchschedule6814F40B"
    },
    "RestApiId": {
     "Ref": "govbizaibatchorchestrationapi784AFF7C"
    }
   }
  },
  "govbizaibatchorchestrationapigovbizaibatchapikeyC78132A4": {
   "Type": "AWS::ApiGateway::ApiKey",
   "Properties": {
    "Description": "API Key for GovBizAI Batch Orchestration API",
    "Enabled": true,
    "Name": "govbizai-batch-api-key",
    "StageKeys": [
     {
      "RestApiId": {
       "Ref": "govbizaibatchorchestrationapi784AFF7C"
      },
      "StageName": {
       "Ref": "govbizaibatchorchestrationapiDeploymentStageprod5243BDFD"
      }
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ]
   }
  },
  "govbizaibatchorchestrationapigovbizaibatchusageplanAB250BA0": {
   "Type": "AWS::ApiGateway::UsagePlan",
   "Properties": {
    "ApiStages": [
     {
      "ApiId": {
       "Ref": "govbizaibatchorchestrationapi784AFF7C"
      },
      "Stage": {
       "Ref": "govbizaibatchorchestrationapiDeploymentStageprod5243BDFD"
      },
      "Throttle": {}
     }
    ],
    "Description": "Usage plan for GovBizAI Batch Orchestration API",
    "Quota": {
     "Limit": 10000,
     "Period": "DAY"
    },
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "govbizai"
     }
    ],
    "Throttle": {
     "BurstLimit": 2000,
     "RateLimit": 1000
    },
    "UsagePlanName": "govbizai-batch-usage-plan"
   }
  },
  "govbizaibatchorchestrationapigovbizaibatchusageplanUsagePlanKeyResourceTestInfrastructureStackgovbizaibatchorchestrationapigovbizaibatchapikey83419E98BA52F8B8": {
   "Type": "AWS::ApiGateway::UsagePlanKey",
   "Properties": {
    "KeyId": {
     "Ref": "govbizaibatchorchestrationapigovbizaibatchapikeyC78132A4"
    },
    "KeyType": "API_KEY",
    "UsagePlanId": {
     "Ref": "govbizaibatchorchestrationapigovbizaibatchusageplanAB250BA0"
    }
   }
  }
 },
 "Outputs": {
  "UserPoolId": {
   "Description": "Cognito User Pool ID",
   "Value": {
    "Ref": "govbizaiuserpool36C7E10A"
   },
   "Export": {
    "Name": "govbizai-user-pool-id"
   }
  },
  "UserPoolClientId": {
   "Description": "Cognito User Pool Client ID",
   "Value": {
    "Ref": "govbizaiuserpoolclientBE0A385B"
   },
   "Export": {
    "Name": "govbizai-user-pool-client-id"
   }
  },
  "IdentityPoolId": {
   "Description": "Cognito Identity Pool ID",
   "Value": {
    "Ref": "govbizaiidentitypool"
   },
   "Export": {
    "Name": "govbizai-identity-pool-id"
   }
  },
  "UserPoolDomain": {
   "Description": "Cognito User Pool Domain",
   "Value": {
    "Ref": "govbizaiuserpooldomainFCB1ACC2"
   },
   "Export": {
    "Name": "govbizai-user-pool-domain"
   }
  },
  "CreateTenantFunctionArn": {
   "Description": "ARN of the Create Tenant Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaicreatetenantA6EE1C83",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-create-tenant-function-arn"
   }
  },
  "UpdateTenantFunctionArn": {
   "Description": "ARN of the Update Tenant Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaiupdatetenant4465400B",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-update-tenant-function-arn"
   }
  },
  "DeleteTenantFunctionArn": {
   "Description": "ARN of the Delete Tenant Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaideletetenant7284722D",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-delete-tenant-function-arn"
   }
  },
  "GetTenantFunctionArn": {
   "Description": "ARN of the Get Tenant Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaigettenant1C7B9A38",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-get-tenant-function-arn"
   }
  },
  "TextExtractionFunctionArn": {
   "Description": "ARN of the Text Extraction Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaitextextraction0C176196",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-text-extraction-function-arn"
   }
  },
  "TextractProcessorFunctionArn": {
   "Description": "ARN of the Textract Processor Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaitextractprocessor559DCF0C",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-textract-processor-function-arn"
   }
  },
  "TextCleanerFunctionArn": {
   "Description": "ARN of the Text Cleaner Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaitextcleaner06583528",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-text-cleaner-function-arn"
   }
  },
  "DocumentChunkerFunctionArn": {
   "Description": "ARN of the Document Chunker Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaidocumentchunker87A36F3D",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-document-chunker-function-arn"
   }
  },
  "FileHandlersFunctionArn": {
   "Description": "ARN of the File Handlers Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaifilehandlers2E6047C4",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-file-handlers-function-arn"
   }
  },
  "UnifiedProcessorFunctionArn": {
   "Description": "ARN of the Unified Processor Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaiunifiedprocessor2109B988",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-unified-processor-function-arn"
   }
  },
  "DocumentProcessingLayerArn": {
   "Description": "ARN of the Document Processing Lambda Layer",
   "Value": {
    "Ref": "govbizaidocumentprocessinglayer39856FE2"
   },
   "Export": {
    "Name": "govbizai-document-processing-layer-arn"
   }
  },
  "LambdaExecutionRoleArn": {
   "Description": "ARN of the Lambda execution role",
   "Value": {
    "Fn::GetAtt": [
     "govbizailambdaexecutionrole23B5D5E8",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-lambda-execution-role-arn"
   }
  },
  "StepFunctionsExecutionRoleArn": {
   "Description": "ARN of the Step Functions execution role",
   "Value": {
    "Fn::GetAtt": [
     "govbizaistepfunctionsrole7E7C04ED",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-step-functions-execution-role-arn"
   }
  },
  "EventBridgeExecutionRoleArn": {
   "Description": "ARN of the EventBridge execution role",
   "Value": {
    "Fn::GetAtt": [
     "govbizaieventbridgerole2252CEC9",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-eventbridge-execution-role-arn"
   }
  },
  "CsvProcessorFunctionArn": {
   "Description": "ARN of the CSV Processor Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaicsvprocessorE4C498A4",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-csv-processor-function-arn"
   }
  },
  "SamgovApiClientFunctionArn": {
   "Description": "ARN of the SAM.gov API Client Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaisamgovapiclientD137678A",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-samgov-api-client-function-arn"
   }
  },
  "AttachmentDownloaderFunctionArn": {
   "Description": "ARN of the Attachment Downloader Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaiattachmentdownloaderCB0D7297",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-attachment-downloader-function-arn"
   }
  },
  "OpportunityProcessorFunctionArn": {
   "Description": "ARN of the Opportunity Processor Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaiopportunityprocessorE3114360",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-opportunity-processor-function-arn"
   }
  },
  "DataRetentionFunctionArn": {
   "Description": "ARN of the Data Retention Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaidataretentionB54F2C67",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-data-retention-function-arn"
   }
  },
  "SamgovOrchestratorFunctionArn": {
   "Description": "ARN of the SAM.gov Orchestrator Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaisamgovorchestrator3A18D42F",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-samgov-orchestrator-function-arn"
   }
  },
  "ProcessingStateMachineArn": {
   "Description": "ARN of the Processing Step Functions State Machine",
   "Value": {
    "Ref": "govbizaiprocessingstatemachineF42BD87C"
   },
   "Export": {
    "Name": "govbizai-processing-state-machine-arn"
   }
  },
  "OpportunityProcessingQueueUrl": {
   "Description": "URL of the Opportunity Processing SQS Queue",
   "Value": {
    "Ref": "govbizaiopportunityprocessingqueueA25C3C4F"
   },
   "Export": {
    "Name": "govbizai-opportunity-processing-queue-url"
   }
  },
  "SamgovLayerArn": {
   "Description": "ARN of the SAM.gov Lambda Layer",
   "Value": {
    "Ref": "govbizaisamgovlayerE234361B"
   },
   "Export": {
    "Name": "govbizai-samgov-layer-arn"
   }
  },
  "UploadPresignedUrlFunctionArn": {
   "Description": "ARN of the Upload Presigned URL Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaiuploadpresignedurl733AD037",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-upload-presigned-url-function-arn"
   }
  },
  "MultipartUploadFunctionArn": {
   "Description": "ARN of the Multipart Upload Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaimultipartuploadB5024102",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-multipart-upload-function-arn"
   }
  },
  "UploadProgressFunctionArn": {
   "Description": "ARN of the Upload Progress Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaiuploadprogressEE5C4774",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-upload-progress-function-arn"
   }
  },
  "SchemaValidatorFunctionArn": {
   "Description": "ARN of the Schema Validator Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaischemavalidator574DAA1D",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-schema-validator-function-arn"
   }
  },
  "DocumentCategorizerFunctionArn": {
   "Description": "ARN of the Document Categorizer Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaidocumentcategorizer039E902D",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-document-categorizer-function-arn"
   }
  },
  "ResumeParserFunctionArn": {
   "Description": "ARN of the Resume Parser Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizairesumeparser269291CA",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-resume-parser-function-arn"
   }
  },
  "CapabilityProcessorFunctionArn": {
   "Description": "ARN of the Capability Processor Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaicapabilityprocessor716CDA66",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-capability-processor-function-arn"
   }
  },
  "WebsiteScraperFunctionArn": {
   "Description": "ARN of the Website Scraper Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaiwebsitescraper3BFF460F",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-website-scraper-function-arn"
   }
  },
  "EmbeddingStrategyFunctionArn": {
   "Description": "ARN of the Embedding Strategy Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaiembeddingstrategyD53F1286",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-embedding-strategy-function-arn"
   }
  },
  "CompanyProfileLayerArn": {
   "Description": "ARN of the Company Profile Lambda Layer",
   "Value": {
    "Ref": "govbizaicompanyprofilelayerA55DC6C5"
   },
   "Export": {
    "Name": "govbizai-company-profile-layer-arn"
   }
  },
  "govbizaimatchingapiEndpointD9C633FD": {
   "Value": {
    "Fn::Join": [
     "",
     [
      "https://",
      {
       "Ref": "govbizaimatchingapi6A20D473"
      },
      ".execute-api.",
      {
       "Ref": "AWS::Region"
      },
      ".",
      {
       "Ref": "AWS::URLSuffix"
      },
      "/",
      {
       "Ref": "govbizaimatchingapiDeploymentStageprodF1E7177F"
      },
      "/"
     ]
    ]
   }
  },
  "SemanticSimilarityFunctionArn": {
   "Description": "ARN of the Semantic Similarity Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaisemanticsimilarityDB6B985A",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-semantic-similarity-function-arn"
   }
  },
  "KeywordMatchingFunctionArn": {
   "Description": "ARN of the Keyword Matching Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaikeywordmatching0DEC26F4",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-keyword-matching-function-arn"
   }
  },
  "NAICSAlignmentFunctionArn": {
   "Description": "ARN of the NAICS Alignment Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizainaicsalignmentE3D11B46",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-naics-alignment-function-arn"
   }
  },
  "PastPerformanceFunctionArn": {
   "Description": "ARN of the Past Performance Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaipastperformance68675781",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-past-performance-function-arn"
   }
  },
  "CertificationBonusFunctionArn": {
   "Description": "ARN of the Certification Bonus Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaicertificationbonus21E6EE86",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-certification-bonus-function-arn"
   }
  },
  "GeographicMatchFunctionArn": {
   "Description": "ARN of the Geographic Match Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaigeographicmatch5E81C651",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-geographic-match-function-arn"
   }
  },
  "CapacityFitFunctionArn": {
   "Description": "ARN of the Capacity Fit Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaicapacityfitF94A514F",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-capacity-fit-function-arn"
   }
  },
  "RecencyFactorFunctionArn": {
   "Description": "ARN of the Recency Factor Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizairecencyfactor6CD38D36",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-recency-factor-function-arn"
   }
  },
  "QuickFilterFunctionArn": {
   "Description": "ARN of the Quick Filter Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaiquickfilterEB9D4EF7",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-quick-filter-function-arn"
   }
  },
  "MatchOrchestratorFunctionArn": {
   "Description": "ARN of the Match Orchestrator Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaimatchorchestratorC15BB73B",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-match-orchestrator-function-arn"
   }
  },
  "MatchingEngineLayerArn": {
   "Description": "ARN of the Matching Engine Lambda Layer",
   "Value": {
    "Ref": "govbizaimatchingenginelayer6D9F158E"
   },
   "Export": {
    "Name": "govbizai-matching-engine-layer-arn"
   }
  },
  "MatchCacheTableName": {
   "Description": "Name of the Match Cache DynamoDB table",
   "Value": {
    "Ref": "govbizaimatchcache4369A744"
   },
   "Export": {
    "Name": "govbizai-match-cache-table-name"
   }
  },
  "BatchMatchingQueueUrl": {
   "Description": "URL of the Batch Matching SQS Queue",
   "Value": {
    "Ref": "govbizaibatchmatchingqueue2199B9CE"
   },
   "Export": {
    "Name": "govbizai-batch-matching-queue-url"
   }
  },
  "MatchingApiEndpoint": {
   "Description": "Endpoint URL of the Matching API",
   "Value": {
    "Fn::Join": [
     "",
     [
      "https://",
      {
       "Ref": "govbizaimatchingapi6A20D473"
      },
      ".execute-api.",
      {
       "Ref": "AWS::Region"
      },
      ".",
      {
       "Ref": "AWS::URLSuffix"
      },
      "/",
      {
       "Ref": "govbizaimatchingapiDeploymentStageprodF1E7177F"
      },
      "/"
     ]
    ]
   },
   "Export": {
    "Name": "govbizai-matching-api-endpoint"
   }
  },
  "MatchingApiKey": {
   "Description": "API Key ID for the Matching API",
   "Value": {
    "Ref": "govbizaimatchingapikey48DB3AFB"
   },
   "Export": {
    "Name": "govbizai-matching-api-key-id"
   }
  },
  "govbizaibatchorchestrationapiEndpointA0F82420": {
   "Value": {
    "Fn::Join": [
     "",
     [
      "https://",
      {
       "Ref": "govbizaibatchorchestrationapi784AFF7C"
      },
      ".execute-api.",
      {
       "Ref": "AWS::Region"
      },
      ".",
      {
       "Ref": "AWS::URLSuffix"
      },
      "/",
      {
       "Ref": "govbizaibatchorchestrationapiDeploymentStageprod5243BDFD"
      },
      "/"
     ]
    ]
   }
  },
  "BatchOptimizerFunctionArn": {
   "Description": "ARN of the Batch Optimizer Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaibatchoptimizerfunction6E4BA428",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-batch-optimizer-function-arn"
   }
  },
  "BatchCoordinatorFunctionArn": {
   "Description": "ARN of the Batch Coordinator Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaibatchcoordinatorfunction3A0B477D",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-batch-coordinator-function-arn"
   }
  },
  "ProgressTrackerFunctionArn": {
   "Description": "ARN of the Progress Tracker Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaiprogresstrackerfunction971A3D14",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-progress-tracker-function-arn"
   }
  },
  "ScheduleManagerFunctionArn": {
   "Description": "ARN of the Schedule Manager Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "govbizaischedulemanagerfunction1E885BCC",
     "Arn"
    ]
   },
   "Export": {
    "Name": "govbizai-schedule-manager-function-arn"
   }
  },
  "EnhancedProcessingStateMachineArn": {
   "Description": "ARN of the Enhanced Processing Step Functions State Machine",
   "Value": {
    "Ref": "govbizaienhancedprocessingstatemachine93FE10C0"
   },
   "Export": {
    "Name": "govbizai-enhanced-processing-state-machine-arn"
   }
  },
  "BatchCoordinationQueueUrl": {
   "Description": "URL of the Batch Coordination SQS Queue",
   "Value": {
    "Ref": "govbizaibatchcoordinationqueueBCD854C6"
   },
   "Export": {
    "Name": "govbizai-batch-coordination-queue-url"
   }
  },
  "BatchOrchestrationApiEndpoint": {
   "Description": "Endpoint URL of the Batch Orchestration API",
   "Value": {
    "Fn::Join": [
     "",
     [
      "https://",
      {
       "Ref": "govbizaibatchorchestrationapi784AFF7C"
      },
      ".execute-api.",
      {
       "Ref": "AWS::Region"
      },
      ".",
      {
       "Ref": "AWS::URLSuffix"
      },
      "/",
      {
       "Ref": "govbizaibatchorchestrationapiDeploymentStageprod5243BDFD"
      },
      "/"
     ]
    ]
   },
   "Export": {
    "Name": "govbizai-batch-orchestration-api-endpoint"
   }
  },
  "BatchOrchestrationApiKey": {
   "Description": "API Key ID for the Batch Orchestration API",
   "Value": {
    "Ref": "govbizaibatchorchestrationapigovbizaibatchapikeyC78132A4"
   },
   "Export": {
    "Name": "govbizai-batch-orchestration-api-key-id"
   }
  }
 },
 "Parameters": {
  "BootstrapVersion": {
   "Type": "AWS::SSM::Parameter::Value<String>",
   "Default": "/cdk-bootstrap/hnb659fds/version",
   "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]"
  }
 },
 "Rules": {
  "CheckBootstrapVersion": {
   "Assertions": [
    {
     "Assert": {
      "Fn::Not": [
       {
        "Fn::Contains": [
         [
          "1",
          "2",
          "3",
          "4",
          "5"
         ],
         {
          "Ref": "BootstrapVersion"
         }
        ]
       }
      ]
     },
     "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."
    }
   ]
  }
 }
}